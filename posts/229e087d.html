<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://www.ionluo.cn/blog">
  <title>【前端】JS小技巧 | ionluo的个人博客站点</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1_获取URL参数并转换成对象1234567891011121314151617181920212223242526272829303132333435&#x2F;&#x2F; 获取URL参数并转换成对象function getQueryParams(url, name)&amp;#123;    var result &#x3D; &amp;#123;&amp;#125;    var reg &#x3D; &#x2F;[?&amp;][^?&amp;#]+&#x3D;[^?&amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="【前端】JS小技巧">
<meta property="og:url" content="http://www.ionluo.cn/blog/posts/229e087d.html">
<meta property="og:site_name" content="ionluo的个人博客站点">
<meta property="og:description" content="1_获取URL参数并转换成对象1234567891011121314151617181920212223242526272829303132333435&#x2F;&#x2F; 获取URL参数并转换成对象function getQueryParams(url, name)&amp;#123;    var result &#x3D; &amp;#123;&amp;#125;    var reg &#x3D; &#x2F;[?&amp;][^?&amp;#]+&#x3D;[^?&amp;">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-06-25T03:27:26.000Z">
<meta property="article:modified_time" content="2023-11-06T12:06:04.028Z">
<meta property="article:author" content="ionluo">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="ionluo的个人博客站点" type="application/atom+xml">
  
  
    <link rel="icon" href="/blog/assets/img/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/blog/./main.dd9d91.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/blog/assets/img/avatar.jpg" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/"></a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/blog/">主页</a></li>
	        
				<li><a href="/blog/categories">分类</a></li>
	        
				<li><a href="/blog/archives">归档</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
            
    			
    			<a q-on="click: openSlider(e, 'outline')" href="javascript:void(0)">大纲</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://gitee.com/cheerfulion" title="github"><i class="icon-github"></i></a>
		        
					<a class="rss" target="_blank" href="/blog/atom.xml" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="weibo" target="_blank" href="https://blog.csdn.net/ion_L" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="qq" target="_blank" href="tencent://message/?uin=2437403125&Site=qq&Menu=yes" title="qq"><i class="icon-qq"></i></a>
		        
			</div>
			<!--BEGIN 音乐播放插件-->
			<!-- <div style="margin-top:15px;">
				<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=86 style="max-width: 100%;"
					src="//music.163.com/outchain/player?type=2&id=28815583&auto=1&height=66"></iframe>
			</div> -->
			<!--END 音乐播放插件-->
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/blog/assets/img/avatar.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author"></h1>
			</hgroup>
			
			
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://gitee.com/cheerfulion" title="github"><i class="icon-github"></i></a>
			        
						<a class="rss" target="_blank" href="/blog/atom.xml" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="weibo" target="_blank" href="https://blog.csdn.net/ion_L" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="qq" target="_blank" href="tencent://message/?uin=2437403125&Site=qq&Menu=yes" title="qq"><i class="icon-qq"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 70%">
				
				
					<li style="width: 33.333333333333336%"><a href="/blog/">主页</a></li>
		        
					<li style="width: 33.333333333333336%"><a href="/blog/categories">分类</a></li>
		        
					<li style="width: 33.333333333333336%"><a href="/blog/archives">归档</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            <article id="post-【前端】JS小技巧" class="article article-type-post " itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      【前端】JS小技巧
    </h1>
  

        <!-- START 显示阅读次数-->
        
          <br/>
          <a class="cloud-tie-join-count" href="javascript:void(0);" style="color:gray;font-size:14px;">
            <!-- <span class="icon-sort"></span> -->
            <span id="busuanzi_container_page_pv">
                阅读数: <span id="busuanzi_value_page_pv"></span> &nbsp;&nbsp;
            </span>
          </a>
        
        <!-- END 显示阅读次数-->
        
        <a href="/blog/posts/229e087d.html" class="archive-article-date">
  	<time datetime="2021-06-25T03:27:26.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-06-25</time>
</a>
        <!-- START 添加字数统计-->
        
        <!-- END 添加字数统计-->
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      <!-- 首页不展示文章所有内容开始 -->
      
        <h2 id="1-获取URL参数并转换成对象"><a href="#1-获取URL参数并转换成对象" class="headerlink" title="1_获取URL参数并转换成对象"></a>1_获取URL参数并转换成对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取URL参数并转换成对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getQueryParams</span>(<span class="params">url, name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = &#123;&#125;</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="regexp">/[?&amp;][^?&amp;#]+=[^?&amp;#]+/g</span></span><br><span class="line">    <span class="comment">// &quot;?name=ionluo&amp;age=25&quot;</span></span><br><span class="line">    <span class="keyword">var</span> queryList = url.match(reg) || []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; queryList.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> item = queryList[i]</span><br><span class="line">        <span class="keyword">var</span> temp = item.substring(<span class="number">1</span>).split(<span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">        <span class="keyword">var</span> key = <span class="built_in">decodeURIComponent</span>(temp[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">var</span> value = <span class="built_in">decodeURIComponent</span>(temp[<span class="number">1</span>])</span><br><span class="line">        result[key] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> name ? result[name] : result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据对象转换成URL查询参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setQueryParams</span>(<span class="params">url, params</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> originParams = getQueryParams(url)</span><br><span class="line">    params = <span class="built_in">Object</span>.assign(originParams, params)</span><br><span class="line">    url = url.split(<span class="string">&#x27;?&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">var</span> paramsKeys = <span class="built_in">Object</span>.keys(params)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; paramsKeys.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i === <span class="number">0</span>) url += <span class="string">&#x27;?&#x27;</span></span><br><span class="line">        <span class="keyword">var</span> key = paramsKeys[i]</span><br><span class="line">        url += <span class="built_in">encodeURIComponent</span>(key) + <span class="string">&#x27;=&#x27;</span> + <span class="built_in">encodeURIComponent</span>(params[key])</span><br><span class="line">        <span class="keyword">if</span> (i !== paramsKeys.length - <span class="number">1</span>) url += <span class="string">&#x27;&amp;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> url</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">	getQueryParams,</span><br><span class="line">    setQueryParams</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="2-封装storage的存取"><a href="#2-封装storage的存取" class="headerlink" title="2_封装storage的存取"></a>2_封装storage的存取</h2><blockquote>
<p>还可以参考下这里实现：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/oD3qDWkYSjBkJpsoLARavw">https://mp.weixin.qq.com/s/oD3qDWkYSjBkJpsoLARavw</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 封装storage的存取(加入命名空间和过期时间控制)</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     created_on: &#x27;&#x27;,  // 创建时间</span></span><br><span class="line"><span class="comment">//     updated_on: &#x27;&#x27;,  // 更新时间（默认等于创建时间）</span></span><br><span class="line"><span class="comment">//     expires: &#x27;&#x27;,   // 过期时间（毫秒）</span></span><br><span class="line"><span class="comment">//     data: &#x27;&#x27;,    // 存储的数据</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    namespace: <span class="string">&#x27;manage&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="title">init</span>(<span class="params">namespace</span>)</span>&#123;</span><br><span class="line">        <span class="comment">// 初始化命名空间</span></span><br><span class="line">        <span class="built_in">this</span>.namespace = namespace || <span class="built_in">this</span>.namespace;</span><br><span class="line">        <span class="comment">// 删除过期变量</span></span><br><span class="line">        <span class="keyword">let</span> storage = <span class="built_in">window</span>.localStorage.getItem(<span class="built_in">this</span>.namespace);</span><br><span class="line">        storage = storage || <span class="string">&#x27;&#123;&#125;&#x27;</span>;</span><br><span class="line">        storage = <span class="built_in">JSON</span>.parse(storage);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">in</span> storage)&#123;</span><br><span class="line">            <span class="keyword">if</span> (storage[k].expires &amp;&amp; <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() - <span class="keyword">new</span> <span class="built_in">Date</span>(storage[k].updated_on).getTime() &gt; storage[k].expires)&#123;</span><br><span class="line">                <span class="keyword">delete</span> storage[k];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">window</span>.localStorage.setItem(<span class="built_in">this</span>.namespace, <span class="built_in">JSON</span>.stringify(storage));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">setItem</span>(<span class="params">key, value, expires</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> storage = <span class="built_in">window</span>.localStorage.getItem(<span class="built_in">this</span>.namespace);</span><br><span class="line">        storage = storage || <span class="string">&#x27;&#123;&#125;&#x27;</span>;</span><br><span class="line">        storage = <span class="built_in">JSON</span>.parse(storage);</span><br><span class="line">        <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">        storage[key] = &#123;</span><br><span class="line">            created_on: date,  <span class="comment">// 创建时间</span></span><br><span class="line">            updated_on: date,  <span class="comment">// 更新时间（默认等于创建时间）</span></span><br><span class="line">            expires: expires,   <span class="comment">// 过期时间（毫秒, 空表示永不过期）</span></span><br><span class="line">            data: value,    <span class="comment">// 存储的数据</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 对于存储大小超出了限制的情况处理</span></span><br><span class="line">        <span class="comment">// https://segmentfault.com/q/1010000014736335/a-1020000014736515</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="built_in">window</span>.localStorage.setItem(<span class="built_in">this</span>.namespace, <span class="built_in">JSON</span>.stringify(storage));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            <span class="comment">// 删除过期数据</span></span><br><span class="line">            <span class="comment">// this.init();</span></span><br><span class="line">            <span class="comment">// 删除最久远的10条数据</span></span><br><span class="line">            <span class="comment">// this.removeOldestTen();</span></span><br><span class="line">            <span class="built_in">window</span>.localStorage.setItem(<span class="built_in">this</span>.namespace, <span class="string">&#x27;&#123;&#125;&#x27;</span>);</span><br><span class="line">            <span class="built_in">this</span>.setItem(key, value, expires);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">getItem</span>(<span class="params">key</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.init();</span><br><span class="line">        <span class="keyword">let</span> storage = <span class="built_in">window</span>.localStorage.getItem(<span class="built_in">this</span>.namespace);</span><br><span class="line">        storage = storage || <span class="string">&#x27;&#123;&#125;&#x27;</span>;</span><br><span class="line">        storage = <span class="built_in">JSON</span>.parse(storage);</span><br><span class="line">        <span class="keyword">return</span> storage[key] &amp;&amp; storage[key].data;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">removeItem</span>(<span class="params">key</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> storage = <span class="built_in">window</span>.localStorage.getItem(<span class="built_in">this</span>.namespace);</span><br><span class="line">        storage = storage || <span class="string">&#x27;&#123;&#125;&#x27;</span>;</span><br><span class="line">        storage = <span class="built_in">JSON</span>.parse(storage);</span><br><span class="line">        <span class="keyword">if</span> (storage[key])&#123;</span><br><span class="line">            <span class="keyword">delete</span> storage[key]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">window</span>.localStorage.setItem(<span class="built_in">this</span>.namespace, <span class="built_in">JSON</span>.stringify(storage));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">// obj.init(&#x27;custom&#x27;);</span></span><br><span class="line"><span class="comment">// obj.setItem(&#x27;key1&#x27;, &#x27;value1&#x27;, 5 * 1000);</span></span><br><span class="line"><span class="comment">// setTimeout(function()&#123;</span></span><br><span class="line"><span class="comment">//     console.log(obj.getItem(&#x27;key1&#x27;));</span></span><br><span class="line"><span class="comment">// &#125;, 6 * 1000)</span></span><br></pre></td></tr></table></figure>



<h2 id="3-实现洗牌函数"><a href="#3-实现洗牌函数" class="headerlink" title="3_实现洗牌函数"></a>3_实现洗牌函数</h2><blockquote>
<p>多提一嘴，该方式可以实现较少数量下的结果尽可能满足正态分布（与之相对的是随机数需要在大数据的情况才能满足正态分布），但是在游戏概率模拟上，要人为干预防止出现欧皇和脸黑的情况，这时候可以通过RPD算法实现。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取一个在[min, max]的整数 </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandomNumber</span>(<span class="params">min, max</span>) </span>&#123;</span><br><span class="line">     <span class="comment">// [0, 1) -&gt; [0, max-min+1) -&gt; [min, max+1) -&gt; [min, max]</span></span><br><span class="line">     <span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>) + min);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现洗牌函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shuffle</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 浅拷贝</span></span><br><span class="line">    <span class="keyword">let</span> _arr = arr.slice();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; _arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">const</span> j = getRandomNumber(<span class="number">0</span>, i);</span><br><span class="line">        [_arr[i], _arr[j]] =  [_arr[j], _arr[i]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> shuffle;</span><br></pre></td></tr></table></figure>



<h2 id="4-格式化UTC时间"><a href="#4-格式化UTC时间" class="headerlink" title="4_格式化UTC时间"></a>4_格式化UTC时间</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Date</span>.prototype.format = <span class="function"><span class="keyword">function</span> (<span class="params">fmt</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = &#123;</span><br><span class="line">        <span class="string">&quot;M+&quot;</span>: <span class="built_in">this</span>.getMonth() + <span class="number">1</span>,                 <span class="comment">//月份</span></span><br><span class="line">        <span class="string">&quot;d+&quot;</span>: <span class="built_in">this</span>.getDate(),                    <span class="comment">//日</span></span><br><span class="line">        <span class="string">&quot;H+&quot;</span>: <span class="built_in">this</span>.getHours(),                   <span class="comment">//小时</span></span><br><span class="line">        <span class="string">&quot;m+&quot;</span>: <span class="built_in">this</span>.getMinutes(),                 <span class="comment">//分</span></span><br><span class="line">        <span class="string">&quot;s+&quot;</span>: <span class="built_in">this</span>.getSeconds(),                 <span class="comment">//秒</span></span><br><span class="line">        <span class="string">&quot;q+&quot;</span>: <span class="built_in">Math</span>.floor((<span class="built_in">this</span>.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">//季度</span></span><br><span class="line">        <span class="string">&quot;S&quot;</span>: <span class="built_in">this</span>.getMilliseconds()             <span class="comment">//毫秒</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(fmt))&#123;</span><br><span class="line">        fmt = fmt.replace(<span class="built_in">RegExp</span>.$1, (<span class="built_in">this</span>.getFullYear() + <span class="string">&quot;&quot;</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$1.length));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> o)&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&quot;(&quot;</span> + k + <span class="string">&quot;)&quot;</span>).test(fmt))&#123;</span><br><span class="line">            fmt = fmt.replace(<span class="built_in">RegExp</span>.$1, (<span class="built_in">RegExp</span>.$1.length === <span class="number">1</span>) ? (o[k]) : ((<span class="string">&quot;00&quot;</span> + o[k]).substr((<span class="string">&quot;&quot;</span> + o[k]).length)));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fmt;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用法</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().format(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"><span class="comment">// 中间可以插入其他字符，不替换，如</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().format(<span class="string">&quot;yyyy-MM-ddTHH:mm:ss&quot;</span>);</span><br></pre></td></tr></table></figure>



<h2 id="5-移动端拖拽"><a href="#5-移动端拖拽" class="headerlink" title="5_移动端拖拽"></a>5_移动端拖拽</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> block = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#element&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> oW, oH;</span><br><span class="line">    <span class="comment">// 绑定touchstart事件</span></span><br><span class="line">    block.addEventListener(<span class="string">&quot;touchstart&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e);</span><br><span class="line">        <span class="keyword">var</span> touches = e.touches[<span class="number">0</span>];</span><br><span class="line">        oW = touches.clientX - block.offsetLeft;</span><br><span class="line">        oH = touches.clientY - block.offsetTop;</span><br><span class="line">    &#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    block.addEventListener(<span class="string">&quot;touchmove&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> touches = e.touches[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">var</span> oLeft = touches.clientX - oW;</span><br><span class="line">        <span class="keyword">var</span> oTop = touches.clientY - oH;</span><br><span class="line">        <span class="keyword">if</span> (oLeft &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            oLeft = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oLeft &gt; <span class="built_in">document</span>.documentElement.clientWidth - block.offsetWidth) &#123;</span><br><span class="line">            oLeft = (<span class="built_in">document</span>.documentElement.clientWidth - block.offsetWidth);</span><br><span class="line">        &#125;</span><br><span class="line">        block.style.left = oLeft + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">        block.style.top = oTop + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">    &#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/lvmingyin/p/5372678.html">https://www.cnblogs.com/lvmingyin/p/5372678.html</a></p>
<p>touchstart→touchmove→touchend或者touchstart→touchend→click。</p>
<h2 id="6-PC端拖拽"><a href="#6-PC端拖拽" class="headerlink" title="6_PC端拖拽"></a>6_PC端拖拽</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> running_mouse = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;running-mouse&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadStatus</span>(<span class="params">element, storage_name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> storage = <span class="built_in">window</span>.localStorage.getItem(storage_name);</span><br><span class="line">    <span class="keyword">if</span> (storage) &#123;</span><br><span class="line">        storage = <span class="built_in">JSON</span>.parse(storage);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>().getTime() - <span class="keyword">new</span> <span class="built_in">Date</span>(storage.created_on).getTime() &gt; <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>) &#123;</span><br><span class="line">            <span class="built_in">window</span>.localStorage.removeItem(storage_name);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            element.style.left = storage.left;</span><br><span class="line">            element.style.top = storage.top;</span><br><span class="line">            element.style.display = storage.close ? <span class="string">&#x27;none&#x27;</span> : <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loadStatus(running_mouse, <span class="string">&#x27;running-mouse&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragElement</span>(<span class="params">element, url, storage_name</span>) </span>&#123;</span><br><span class="line">    element.addEventListener(<span class="string">&#x27;mousedown&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> originMouseX, originMouseY, moveX, moveY;</span><br><span class="line"></span><br><span class="line">        originMouseX = event.clientX;</span><br><span class="line">        originMouseY = event.clientY;</span><br><span class="line">        <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;mousemove&#x27;</span>, mouseMove, <span class="literal">false</span>);</span><br><span class="line">        <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;mouseup&#x27;</span>, mouseUp, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">mouseMove</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">            moveX = event.clientX - originMouseX;</span><br><span class="line">            moveY = event.clientY - originMouseY;</span><br><span class="line">            originMouseX = event.clientX;</span><br><span class="line">            originMouseY = event.clientY;</span><br><span class="line">            element.style.left = +moveX + element.offsetLeft + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            element.style.top = +moveY + element.offsetTop + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            event.preventDefault();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">mouseUp</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">document</span>.removeEventListener(<span class="string">&#x27;mousemove&#x27;</span>, mouseMove, <span class="literal">false</span>);</span><br><span class="line">            <span class="built_in">document</span>.removeEventListener(<span class="string">&#x27;mouseup&#x27;</span>, mouseUp, <span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">var</span> is_close = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span> (url &amp;&amp; !moveX &amp;&amp; !moveY) &#123;</span><br><span class="line">                <span class="keyword">if</span> (event.target.tagName === <span class="string">&quot;SPAN&quot;</span>) &#123;</span><br><span class="line">                    element.style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">                    is_close = <span class="literal">true</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">                    a.href = url;</span><br><span class="line">                    a.style.display = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">                    a.click();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">window</span>.localStorage.setItem(storage_name, <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">                left: element.style.left,</span><br><span class="line">                top: element.style.top,</span><br><span class="line">                close: is_close,</span><br><span class="line">                created_on: <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">            &#125;));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dragElement(running_mouse, <span class="string">&#x27;/cn/zh-cn/public-search.html&#x27;</span>, <span class="string">&#x27;running-mouse&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="7-移动到元素上出现滚动条，移出滚动条消失"><a href="#7-移动到元素上出现滚动条，移出滚动条消失" class="headerlink" title="7_ 移动到元素上出现滚动条，移出滚动条消失"></a>7_ 移动到元素上出现滚动条，移出滚动条消失</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 移动到元素上出现滚动条，移出滚动条消失 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onmouseover</span>=<span class="string">&quot;this.style.overflowY=&#x27;auto&#x27;&quot;</span> <span class="attr">onmouseout</span>=<span class="string">&quot;this.style.overflowY=&#x27;hidden&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="8-全局异常处理"><a href="#8-全局异常处理" class="headerlink" title="8_ 全局异常处理"></a>8_ 全局异常处理</h2><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903751271055374">https://juejin.cn/post/6844903751271055374</a></p>
<h2 id="9-同步阻塞法实现sleep函数"><a href="#9-同步阻塞法实现sleep函数" class="headerlink" title="9_ 同步阻塞法实现sleep函数"></a>9_ 同步阻塞法实现sleep函数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sleep = <span class="function"><span class="params">delay</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> start = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">new</span> <span class="built_in">Date</span>().getTime() &lt; start + delay) &#123;</span><br><span class="line">       <span class="keyword">continue</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">sleep(<span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>



<h2 id="10-利用-new-URL-解析-URL"><a href="#10-利用-new-URL-解析-URL" class="headerlink" title="10_ 利用 new URL 解析 URL"></a>10_ 利用 new URL 解析 URL</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> parseURL = <span class="function">(<span class="params">url = <span class="string">&#x27;&#x27;</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// https://developer.mozilla.org/zh-CN/docs/Web/API/URL/URL</span></span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">new</span> URL(url);</span><br><span class="line">    res.queryParams = <span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key) &#123;</span><br><span class="line">           <span class="keyword">return</span> res.searchParams.get(key)</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">const</span> params = &#123;&#125;;</span><br><span class="line">        <span class="keyword">const</span> paramGroup = res.search.replace(<span class="regexp">/^\?/</span>,<span class="string">&#x27;&#x27;</span>).split(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">        paramGroup.forEach(<span class="function"><span class="params">param</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> [key, val] = param.split(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">            params[key] = val;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> params;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line">parseURL(<span class="string">&#x27;https://www.example.com/a/b?c=1&amp;d=2&#x27;</span>);</span><br></pre></td></tr></table></figure>



<h2 id="11-一行代码实现星级评分"><a href="#11-一行代码实现星级评分" class="headerlink" title="11_ 一行代码实现星级评分"></a>11_ 一行代码实现星级评分</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getRate = <span class="function">(<span class="params">rate = <span class="number">0</span></span>) =&gt;</span> <span class="string">&#x27;★★★★★☆☆☆☆☆&#x27;</span>.slice(<span class="number">5</span> - rate, <span class="number">10</span> - rate);</span><br><span class="line">getRate(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>



<h2 id="12-用位运算提升效率"><a href="#12-用位运算提升效率" class="headerlink" title="12_用位运算提升效率"></a>12_用位运算提升效率</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ｜ 取整</span></span><br><span class="line"><span class="keyword">let</span> num1 = <span class="number">1.7</span>;</span><br><span class="line">num1 = num1 | <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &gt;&gt; 取半</span></span><br><span class="line"><span class="keyword">let</span> num2 = <span class="number">6</span>;</span><br><span class="line">num2 = num2 &gt;&gt; <span class="number">1</span>; <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;&lt; 加倍</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> num3 = <span class="number">6</span>;</span><br><span class="line">num3 = num3 &lt;&lt; <span class="number">1</span>; <span class="regexp">/ /</span> <span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ^ 交换值</span></span><br><span class="line"><span class="keyword">let</span> num4 = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> num5 = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">num4 ^= num5;</span><br><span class="line">num5 ^= num4;</span><br><span class="line">num4 ^= num5; <span class="comment">// num4 === 2, num5 === 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &amp; 判断奇数</span></span><br><span class="line"><span class="keyword">let</span> num6 = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> num7 = <span class="number">11</span>;</span><br><span class="line"></span><br><span class="line">num6 &amp; <span class="number">1</span> === <span class="number">1</span>; <span class="comment">// true</span></span><br><span class="line">num7 &amp; <span class="number">1</span> === <span class="number">1</span>; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ~ 判断是否存在</span></span><br><span class="line"><span class="keyword">const</span> data = <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> key = <span class="string">&#x27;3&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> keyIsExist = !!~data.indexOf(key); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否 2 的整数幂</span></span><br><span class="line"><span class="keyword">const</span> isPowerOf2 = <span class="function"><span class="params">num</span> =&gt;</span> (num &amp; (num - <span class="number">1</span>)) === <span class="number">0</span>;</span><br><span class="line">isPowerOf2(<span class="number">8</span>) <span class="comment">// true</span></span><br><span class="line">isPowerOf2(<span class="number">7</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>



<h2 id="13-判断是否是千分符字符"><a href="#13-判断是否是千分符字符" class="headerlink" title="13_判断是否是千分符字符"></a>13_判断是否是千分符字符</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numberIsThousand = <span class="function"><span class="params">str</span> =&gt;</span> <span class="regexp">/^-?\d&#123;1,3&#125;(,\d&#123;3&#125;)*(\.\d+)?$/</span>.test(str);</span><br><span class="line">numberIsThousand(<span class="string">&#x27;100,000,000,000&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">numberIsThousand(<span class="string">&#x27;100,000,000,00&#x27;</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>





<h2 id="14-复制文本到剪切板"><a href="#14-复制文本到剪切板" class="headerlink" title="14_复制文本到剪切板"></a>14_复制文本到剪切板</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> copyToClipboard = <span class="function"><span class="params">content</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> clipboardData = <span class="built_in">window</span>.clipboardData;</span><br><span class="line">    <span class="keyword">if</span> (clipboardData) &#123; <span class="comment">// IE</span></span><br><span class="line">        clipboardData.clearData();</span><br><span class="line">        clipboardData.setData(<span class="string">&#x27;Text&#x27;</span>, content);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.execCommand) &#123; <span class="comment">// Firefox、Chrome、Edge，只能用户点击有效（https://caniuse.com/?search=execCommand）</span></span><br><span class="line">        <span class="keyword">const</span> el = <span class="built_in">document</span>.createElement(<span class="string">&#x27;textarea&#x27;</span>);</span><br><span class="line">        el.value = content;</span><br><span class="line">        el.setAttribute(<span class="string">&#x27;readonly&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        el.style.position = <span class="string">&#x27;absolute&#x27;</span>;</span><br><span class="line">        el.style.left = <span class="string">&#x27;-9999px&#x27;</span>;</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(el);</span><br><span class="line">        el.select();</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> <span class="built_in">document</span>.body.removeChild(el), <span class="number">300</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">document</span>.execCommand(<span class="string">&#x27;copy&#x27;</span>); <span class="comment">// 复制失败返回false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 复制失败，需要引导用户手动复制</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> isCopyed = copyToClipboard(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line"><span class="comment">// 会失败</span></span><br><span class="line"><span class="comment">// const tryAgain = !isCopyed ? window.confirm(&#x27;自动复制失败，是否重试&#x27;) : false</span></span><br><span class="line"><span class="comment">// tryAgain &amp;&amp; copyToClipboard(&#x27;hello world&#x27;)</span></span><br><span class="line">!isCopyed &amp;&amp; <span class="built_in">this</span>.$confirm(<span class="string">&#x27;自动复制失败，是否重试&#x27;</span>, <span class="string">&#x27;提示&#x27;</span>, &#123;</span><br><span class="line">    confirmButtonText: <span class="string">&#x27;确定&#x27;</span>,</span><br><span class="line">    cancelButtonText: <span class="string">&#x27;取消&#x27;</span>,</span><br><span class="line">    type: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> isCopyed2 = copyToClipboard(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> isCopyed2 ? <span class="built_in">this</span>.$message.success(<span class="string">&#x27;复制成功&#x27;</span>) : <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;faild&#x27;</span>))</span><br><span class="line">&#125;).catch(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$message.error(<span class="string">&#x27;复制失败，请到手动复制&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里发现一个奇怪的现象，Chrome浏览器异步时间不是太久就可以复制成功，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(copyToClipboard(<span class="string">&#x27;123456&#x27;</span>))&#125;, <span class="number">5000</span>)</span><br><span class="line">VM39945:<span class="number">1</span> <span class="literal">false</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;<span class="built_in">console</span>.log(copyToClipboard(<span class="string">&#x27;123456&#x27;</span>))&#125;, <span class="number">1000</span>)</span><br><span class="line">VM39959:<span class="number">1</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>这点不应该滥用，因为不同浏览器似乎支持不一样，见<a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000005783830?utm_source=sf-similar-question">https://segmentfault.com/q/1010000005783830?utm_source=sf-similar-question</a></p>
</blockquote>
<h2 id="15-一行代码生成指定长度的数组"><a href="#15-一行代码生成指定长度的数组" class="headerlink" title="15_一行代码生成指定长度的数组"></a>15_一行代码生成指定长度的数组</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> List = <span class="function"><span class="params">len</span> =&gt;</span> [...new <span class="built_in">Array</span>(len).keys()];</span><br><span class="line"><span class="keyword">const</span> list = List(<span class="number">10</span>); <span class="comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br></pre></td></tr></table></figure>



<h2 id="16-判断数据类型"><a href="#16-判断数据类型" class="headerlink" title="16_判断数据类型"></a>16_判断数据类型</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> type = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line">      <span class="keyword">const</span> dataType =</span><br><span class="line">        data <span class="keyword">instanceof</span> Element</span><br><span class="line">          ? <span class="string">&#x27;element&#x27;</span> <span class="comment">// 为了统一DOM节点类型输出</span></span><br><span class="line">          : toString</span><br><span class="line">              .call(data)</span><br><span class="line">              .replace(<span class="regexp">/\[object\s(.+)\]/</span>, <span class="string">&#x27;$1&#x27;</span>)</span><br><span class="line">              .toLowerCase()</span><br><span class="line">      <span class="keyword">return</span> dataType</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">type(&#123;&#125;); <span class="comment">// object</span></span><br></pre></td></tr></table></figure>



<h2 id="17-正则判断字符重复次数不超过两次"><a href="#17-正则判断字符重复次数不超过两次" class="headerlink" title="17_正则判断字符重复次数不超过两次"></a>17_正则判断字符重复次数不超过两次</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> strIsRepeatThan2 = <span class="function">(<span class="params">str = <span class="string">&#x27;&#x27;</span></span>) =&gt;</span> <span class="regexp">/^(?!.*(.).*\1&#123;2&#125;)[\da-zA-Z].+$/</span>.test(str);</span><br><span class="line">strIsRepeatThan2(<span class="string">&#x27;123456&#x27;</span>); <span class="comment">// true</span></span><br><span class="line">strIsRepeatThan2(<span class="string">&#x27;1234566&#x27;</span>); <span class="comment">// true</span></span><br><span class="line">strIsRepeatThan2(<span class="string">&#x27;12345666&#x27;</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>



<h2 id="18-正则匹配可以只有-0-但开头不能是-0-的数字"><a href="#18-正则匹配可以只有-0-但开头不能是-0-的数字" class="headerlink" title="18_正则匹配可以只有 0 但开头不能是 0 的数字"></a>18_正则匹配可以只有 0 但开头不能是 0 的数字</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getCorrectNumber = <span class="function">(<span class="params">str = <span class="string">&#x27;&#x27;</span></span>) =&gt;</span> <span class="regexp">/^(\d|[1-9]\d*)$/</span>.test(str);</span><br><span class="line">getCorrectNumber(<span class="string">&#x27;0&#x27;</span>); <span class="comment">// true</span></span><br><span class="line">getCorrectNumber(<span class="string">&#x27;011&#x27;</span>); <span class="comment">// false</span></span><br><span class="line">getCorrectNumber(<span class="string">&#x27;101&#x27;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>



<h2 id="19-获取显示器分辨率"><a href="#19-获取显示器分辨率" class="headerlink" title="19_获取显示器分辨率"></a>19_获取显示器分辨率</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> radio = <span class="built_in">window</span>.devicePixeRatio;</span><br><span class="line"><span class="comment">// screen获取屏幕分辨率，如果是高清显示屏（4K显示器、Retina屏等），一个像素可能包括2,3,4个甚至更多的物理分辨率，所以需要乘以设备像素比(devicePixeRatio)。</span></span><br><span class="line">screen.width * radio + <span class="string">&#x27;X&#x27;</span> + screen.height * radio</span><br></pre></td></tr></table></figure>

<p>关于设备分辨率和物理分辨率可以参考：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Sb4qj4m5WGiWiNEP98RC0A">https://mp.weixin.qq.com/s/Sb4qj4m5WGiWiNEP98RC0A</a></p>
<h2 id="20-目录树的选中和取消选中"><a href="#20-目录树的选中和取消选中" class="headerlink" title="20_目录树的选中和取消选中"></a>20_目录树的选中和取消选中</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; forEach, padStart, filter, every, assign &#125; = <span class="built_in">require</span>(<span class="string">&#x27;lodash&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="function"><span class="title">init</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.selectedFoldersId = [<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>] <span class="comment">// 选中的文件夹id列表</span></span><br><span class="line">        <span class="built_in">this</span>.folders = [] <span class="comment">// 所有的文件夹</span></span><br><span class="line">        <span class="built_in">this</span>.showAllFolders()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 异步获取所有文件夹</span></span><br><span class="line">    getAllFolders: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve([&#123;<span class="attr">name</span>: <span class="string">&#x27;文件夹1&#x27;</span>, <span class="attr">flags</span>: &#123;<span class="attr">system</span>: <span class="literal">true</span>&#125;, <span class="attr">id</span>: <span class="number">1</span>&#125;， &#123;<span class="attr">name</span>: <span class="string">&#x27;文件夹2&#x27;</span>, <span class="attr">flags</span>: &#123;<span class="attr">system</span>: <span class="literal">false</span>&#125;, <span class="attr">id</span>: <span class="number">2</span>&#125;])</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 根据返回的所有文件夹数据处理得到用于html显示的数据</span></span><br><span class="line">    showAllFolders: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> that = <span class="built_in">this</span></span><br><span class="line">        $scope.isLoading = <span class="literal">true</span></span><br><span class="line">        <span class="built_in">this</span>.getAllFolders().then(<span class="function"><span class="params">resData</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 生成指定的数据结构</span></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">dataGenerator</span>(<span class="params">originData</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">const</span> newData = []</span><br><span class="line">                <span class="keyword">const</span> folders = &#123;</span><br><span class="line">                    id: <span class="number">0</span>,</span><br><span class="line">                    name: <span class="string">&#x27;文件夹&#x27;</span>,</span><br><span class="line">                    children: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            id: -<span class="number">1</span>,</span><br><span class="line">                            name: <span class="string">&#x27;系统文件夹&#x27;</span>,</span><br><span class="line">                            children: []，</span><br><span class="line">                            disabled: <span class="literal">false</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            id: -<span class="number">2</span>,</span><br><span class="line">                            name: <span class="string">&#x27;自定义文件夹&#x27;</span>,</span><br><span class="line">                            children: []，</span><br><span class="line">                            disabled: <span class="literal">false</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">                forEach(originData, <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (item.flags &amp;&amp; item.flags.system) &#123;</span><br><span class="line">                        folders.children[<span class="number">0</span>].children.push(item)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        folders.children[<span class="number">1</span>].children.push(item)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                folders.children[<span class="number">0</span>].disabled = !folders.children[<span class="number">0</span>].children.length</span><br><span class="line">                folders.children[<span class="number">1</span>].disabled = !folders.children[<span class="number">1</span>].children.length</span><br><span class="line">                <span class="comment">// 递归获取所有的子节点，通过level标识层级</span></span><br><span class="line">                <span class="function"><span class="keyword">function</span> <span class="title">pushAllTo</span>(<span class="params">item, level, pid</span>) </span>&#123;</span><br><span class="line">                    item.level = level <span class="comment">// 层级</span></span><br><span class="line">                    item.pid = pid <span class="comment">// 父级节点id</span></span><br><span class="line">                    item.selected = <span class="literal">false</span></span><br><span class="line">                    newData.push(item)</span><br><span class="line">                    item.children = item.children || []</span><br><span class="line">                    forEach(item.children, <span class="function"><span class="params">child</span> =&gt;</span> &#123;</span><br><span class="line">                        pushAllTo(child, level + <span class="number">1</span>, item.id)</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">                pushAllTo(folders, <span class="number">0</span>, <span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">return</span> newData</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 初始化上次的选中状态</span></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">initStatus</span>(<span class="params">folders</span>) </span>&#123;</span><br><span class="line">                forEach(folders, <span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (~that.selectedFoldersId.indexOf(item.id + <span class="string">&#x27;&#x27;</span>)) &#123;</span><br><span class="line">                        that.selectFolder(item)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            that.folders = dataGenerator(resData)</span><br><span class="line">            initStatus(that.folders)</span><br><span class="line">            <span class="comment">// console.log(&#x27;that.folders&#x27;, that.folders)</span></span><br><span class="line">        &#125;).finally(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $scope.isLoading = <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 选择文件夹（自动更新其上下级的选中状态）</span></span><br><span class="line">    selectFolder: <span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">        item.selected = !item.selected</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> that = <span class="built_in">this</span></span><br><span class="line">        <span class="comment">// 更新下级文件夹状态</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">updateLowLevel</span>(<span class="params">item, status</span>) </span>&#123;</span><br><span class="line">            forEach(that.folders, <span class="function"><span class="params">folder</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (folder.pid === item.id) &#123;</span><br><span class="line">                    folder.selected = status</span><br><span class="line">                    updateLowLevel(folder, folder.selected)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 更新上级文件夹状态</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">updateHighLevel</span>(<span class="params">item, status</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> parent = filter(that.folders, <span class="function"><span class="params">folder</span> =&gt;</span> folder.id === item.pid)[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">if</span> (!parent) <span class="keyword">return</span></span><br><span class="line">            <span class="keyword">const</span> childrenList = filter(that.folders, <span class="function"><span class="params">folder</span> =&gt;</span> (folder.pid === parent.id &amp;&amp; !folder.disabled))</span><br><span class="line">            <span class="keyword">if</span> (status &amp;&amp; childrenList.length &amp;&amp; every(childrenList, <span class="function"><span class="params">item</span> =&gt;</span> item.selected === status)) &#123;</span><br><span class="line">                parent.selected = status</span><br><span class="line">                updateHighLevel(parent, status)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!status) &#123;</span><br><span class="line">                parent.selected = status</span><br><span class="line">                updateHighLevel(parent, status)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        updateLowLevel(item, item.selected)</span><br><span class="line">        updateHighLevel(item, item.selected)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="21-JS加载脚本"><a href="#21-JS加载脚本" class="headerlink" title="21_JS加载脚本"></a>21_JS加载脚本</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不阻塞加载，不能保证加载完成的顺序，只能保证加载时间的顺序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span>(<span class="params">url, success, fail</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">    script.type = <span class="string">&#x27;text/javascript&#x27;</span></span><br><span class="line"></span><br><span class="line">    script.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        success &amp;&amp; success()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    script.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Script loading failed&#x27;</span>, url)</span><br><span class="line">        fail &amp;&amp; fail()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    script.src = url</span><br><span class="line">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>].appendChild(script)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 阻塞加载，保证加载完成顺序，但是会有警告</span></span><br><span class="line"><span class="built_in">document</span>.write(<span class="string">&#x27;&lt;script src=&quot;./jquery.js&quot;&gt;&lt;\/script&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h2 id="22-判断元素在当前窗口是否可见"><a href="#22-判断元素在当前窗口是否可见" class="headerlink" title="22_判断元素在当前窗口是否可见"></a>22_判断元素在当前窗口是否可见</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断元素是否可见</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkVisible</span>(<span class="params">elem</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// https://stackoverflow.com/questions/19669786/check-if-element-is-visible-in-dom</span></span><br><span class="line">    <span class="keyword">if</span> (!(elem <span class="keyword">instanceof</span> Element)) <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">&#x27;DomUtil: elem is not an element.&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (elem.checkVisibility) <span class="keyword">return</span> elem.checkVisibility(&#123;</span><br><span class="line">        checkOpacity: <span class="literal">true</span>,      <span class="comment">// Check CSS opacity property too</span></span><br><span class="line">        checkVisibilityCSS: <span class="literal">true</span> <span class="comment">// Check CSS visibility property too</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );</span><br><span class="line">    <span class="comment">// var rect = elm.getBoundingClientRect();</span></span><br><span class="line">    <span class="comment">// var viewHeight = Math.max(document.documentElement.clientHeight, window.innerHeight);</span></span><br><span class="line">    <span class="comment">// return !(rect.bottom &lt; 0 || rect.top - viewHeight &gt;= 0);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="23-页面显示状态变化"><a href="#23-页面显示状态变化" class="headerlink" title="23_页面显示状态变化"></a>23_页面显示状态变化</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.visibilityState == <span class="string">&#x27;hidden&#x27;</span>) &#123;</span><br><span class="line">         <span class="built_in">document</span>.title = <span class="string">&#x27;(つェ⊂)我藏好了哦~ &#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">document</span>.title = <span class="string">&#x27;(*´∇｀*) 被你发现啦~ &#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="24-使用ES6删除对象中某些属性"><a href="#24-使用ES6删除对象中某些属性" class="headerlink" title="24_使用ES6删除对象中某些属性"></a>24_使用ES6删除对象中某些属性</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    id: <span class="string">&#x27;1111&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;测试一&#x27;</span>,</span><br><span class="line">    description: <span class="string">&#x27;测试demo&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标: 取到删除description属性的对象, 即下文的data</span></span><br><span class="line"><span class="comment">//方法一:</span></span><br><span class="line"><span class="keyword">let</span> data = (<span class="function">(<span class="params">&#123;id, name&#125;</span>) =&gt;</span>(&#123;id, name&#125;))(obj);</span><br><span class="line"><span class="built_in">console</span>.log(data) <span class="comment">// data:&#123; id: &#x27;011&#x27;, name: &#x27;测试一&#x27;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(form) <span class="comment">// form:&#123; id: &#x27;011&#x27;, name: &#x27;测试一&#x27;, description: &#x27;测试demo&#x27; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法二:</span></span><br><span class="line"><span class="keyword">let</span> &#123;description, ...data&#125; = obj;</span><br><span class="line"><span class="comment">// data默认接收剩余的属性值, 打印结果同上</span></span><br></pre></td></tr></table></figure>



<h2 id="25-连续点击多次事件"><a href="#25-连续点击多次事件" class="headerlink" title="25_连续点击多次事件"></a>25_连续点击多次事件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 连续点击多次触发</span></span><br><span class="line"><span class="keyword">const</span> multipleClick = <span class="function"><span class="keyword">function</span>(<span class="params">times</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">dom, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">var</span> waitTime = <span class="number">500</span>; <span class="comment">// 该时间间隔内点击才算连续点击（单位：ms）</span></span><br><span class="line">    <span class="keyword">var</span> lastTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime(); <span class="comment">// 上次点击时间</span></span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span>; <span class="comment">// 连续点击次数</span></span><br><span class="line">    <span class="comment">// 获取对象</span></span><br><span class="line">    dom.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> currentTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">        <span class="comment">// 计算两次相连的点击时间间隔</span></span><br><span class="line">        count = (currentTime-lastTime) &lt; waitTime ? count + <span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">        lastTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">        <span class="comment">// console.log(&#x27;点击&#x27; + count + &#x27;次了&#x27;)</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">            count &gt;= times &amp;&amp; callback &amp;&amp; callback()</span><br><span class="line">        &#125;, waitTime)</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fiveClick = multipleClick(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>


<h2 id="26-原生javasript实现ajax请求"><a href="#26-原生javasript实现ajax请求" class="headerlink" title="26_原生javasript实现ajax请求"></a>26_原生javasript实现ajax请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $xhr = &#123;</span><br><span class="line">    xhr: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.ActiveXObjcet) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ActiveXObjcet(<span class="string">&#x27;Microsoft.XMLHTTP&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;浏览器不支持ajax请求，请升级浏览器重试&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">url, successFn, failFn</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> xhr = <span class="built_in">this</span>.xhr();</span><br><span class="line">        xhr.timeout = <span class="number">2000</span> <span class="comment">// 超时设置 2s 设置（超过2s请求取消）</span></span><br><span class="line">        <span class="comment">// xhr.responseType = &quot;blob&quot;</span></span><br><span class="line">        xhr.ontimeout = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// 超时回调</span></span><br><span class="line">            alert(<span class="string">&#x27;网络异常，请稍后重试！！！&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// 网络异常回调</span></span><br><span class="line">            alert(<span class="string">&#x27;你的网络似乎出了一些问题！！&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.open(<span class="string">&#x27;GET&#x27;</span>, url, <span class="literal">true</span>);</span><br><span class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// readyState == 4说明请求已完成</span></span><br><span class="line">            <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (xhr.status == <span class="number">200</span> || xhr.status == <span class="number">202</span> || xhr.status == <span class="number">304</span>) &#123;</span><br><span class="line">                   successFn.call(<span class="built_in">this</span>, &#123;</span><br><span class="line">                        status: xhr.status,</span><br><span class="line">                        headers: xhr.getAllResponseHeaders(),</span><br><span class="line">                        data: xhr.responseText</span><br><span class="line">                    &#125;); </span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    failFn.call(<span class="built_in">this</span>, &#123;</span><br><span class="line">                        status: xhr.status,</span><br><span class="line">                        headers: xhr.getAllResponseHeaders(),</span><br><span class="line">                        data: xhr.responseText</span><br><span class="line">                    &#125;); </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        xhr.send();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// data应为&#x27;a=a1&amp;b=b1&#x27;这种字符串格式，在jq里如果data为对象会自动将对象转成这种字符串格式</span></span><br><span class="line">    post: <span class="function"><span class="keyword">function</span> (<span class="params">url, data, successFn, failFn</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> xhr = <span class="built_in">this</span>.xhr();</span><br><span class="line">        xhr.open(<span class="string">&quot;POST&quot;</span>, url, <span class="literal">true</span>);</span><br><span class="line">        <span class="comment">// 添加http头，发送信息至服务器时内容编码类型</span></span><br><span class="line">        xhr.setRequestHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>);</span><br><span class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (xhr.status == <span class="number">200</span> || xhr.status == <span class="number">202</span> || xhr.status == <span class="number">304</span>) &#123;</span><br><span class="line">                    successFn.call(<span class="built_in">this</span>, &#123;</span><br><span class="line">                        status: xhr.status,</span><br><span class="line">                        headers: xhr.getAllResponseHeaders(),</span><br><span class="line">                        data: xhr.responseText</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    failFn.call(<span class="built_in">this</span>, &#123;</span><br><span class="line">                        status: xhr.status,</span><br><span class="line">                        headers: xhr.getAllResponseHeaders(),</span><br><span class="line">                        data: xhr.responseText</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        xhr.timeout = <span class="number">60000</span>;</span><br><span class="line">        xhr.send(data);</span><br><span class="line">    &#125;,</span><br><span class="line">    ajax: <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> xhr = <span class="built_in">this</span>.xhr()</span><br><span class="line">        xhr.timeout = options.timeout || <span class="number">60000</span></span><br><span class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (xhr.readyState !== <span class="number">4</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">const</span> result = &#123;</span><br><span class="line">            status: xhr.status,</span><br><span class="line">            headers: xhr.getAllResponseHeaders(),</span><br><span class="line">            data: xhr.responseText</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;-response-&#x27;</span>, result)</span><br><span class="line">          <span class="keyword">if</span> (xhr.status === <span class="number">200</span> || xhr.status === <span class="number">304</span> || xhr.status === <span class="number">202</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              result.data = <span class="built_in">JSON</span>.parse(result.data) || &#123;&#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">              <span class="built_in">console</span>.log(e)</span><br><span class="line">            &#125;</span><br><span class="line">            options.success &amp;&amp; options.success(result)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            options.error &amp;&amp; options.error(result)</span><br><span class="line">          &#125;</span><br><span class="line">          options.complete &amp;&amp; options.complete(result)</span><br><span class="line">        &#125;</span><br><span class="line">        options.async = <span class="keyword">typeof</span> options.async === <span class="string">&#x27;boolean&#x27;</span> ? options.async : <span class="literal">true</span></span><br><span class="line">        options.data = <span class="keyword">typeof</span> data === <span class="string">&#x27;object&#x27;</span> ? <span class="built_in">JSON</span>.stringify(options.data) : options.data</span><br><span class="line">        options.type = [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;put&#x27;</span>, <span class="string">&#x27;delete&#x27;</span>, <span class="string">&#x27;update&#x27;</span>, <span class="string">&#x27;patch&#x27;</span>].indexOf(options.type.toLowerCase()) ? options.type : <span class="string">&#x27;GET&#x27;</span></span><br><span class="line">        options.type = options.type.toUpperCase()</span><br><span class="line">        options.contentType = options.contentType || <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class="line">        options.headers = &#123;&#125;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;-request-&#x27;</span>, <span class="built_in">JSON</span>.stringify(options))</span><br><span class="line">        xhr.open(options.type, options.url, options.async)</span><br><span class="line">        xhr.setRequestHeader(<span class="string">&#x27;Content-Type&#x27;</span>, options.contentType)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> options.headers) &#123;</span><br><span class="line">          xhr.setRequestHeader(key, options.headers[key])</span><br><span class="line">        &#125;</span><br><span class="line">        options.data ? xhr.send() : xhr.send(options.data)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>202：Accepted  服务器已接受请求，但尚未处理。（202状态码适合异步任务或者说须要处理时间比较长的请求，避免HTTP链接一直占用，超时这些状况。常见的就是使用MQ异步处理批任务，客户端定时轮训结果。缓存）</p>
<p>304：Not Modified 缓存可用 </p>
<p>0：未定义的错误，可能是在联系服务器之前发生错误的结果（<a target="_blank" rel="noopener" href="https://www.cnblogs.com/ranyonsue/p/9187799.html%EF%BC%89">https://www.cnblogs.com/ranyonsue/p/9187799.html）</a></p>
<p>更多见：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status</a></p>
</blockquote>
<h2 id="27-取消滚动的默认行为"><a href="#27-取消滚动的默认行为" class="headerlink" title="27_取消滚动的默认行为"></a>27_取消滚动的默认行为</h2><p>一些参考资料：</p>
<p><a target="_blank" rel="noopener" href="https://zh.javascript.info/default-browser-action">https://zh.javascript.info/default-browser-action</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/crystal6918/article/details/77507414">https://blog.csdn.net/crystal6918/article/details/77507414</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过阻止动作来达到阻止默认行为（即不能通过ui事件去阻止，ui事件触发了的时候，行为已经产生了）</span></span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">&#x27;touchmove&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">	e.preventDefault();</span><br><span class="line">&#125;, &#123;<span class="attr">passive</span>: <span class="literal">false</span>&#125;);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;wheel&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">&#125;, &#123;<span class="attr">passive</span>:<span class="literal">false</span>&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>UI事件包括：</p>
<ul>
<li>load、unload</li>
<li>abort</li>
<li>error</li>
<li>select</li>
<li>resize</li>
<li>scroll</li>
</ul>
</blockquote>
<h2 id="28-创建隔离的css样式区域"><a href="#28-创建隔离的css样式区域" class="headerlink" title="28_创建隔离的css样式区域"></a>28_创建隔离的css样式区域</h2><p>CSS一旦生效，就会应用于全局，所以很容易出现冲突。有时候，我们一些内容是用户自己编辑或者公司的运营人员编辑展示到页面上的，如果用户编辑的内容使用了全局css类名，就会导致意想不到的混乱。下面讲讲我对这种情况的处理方式：</p>
<ol>
<li><p>Web组件封装（主流的方式，这里不做介绍，可以看看vue-cli的做法）</p>
</li>
<li><p>shadowDOM</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> html = <span class="string">`&lt;h1&gt;我是一个标题&lt;/h1&gt;`</span>‘’</span><br><span class="line"><span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;contentContainer&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> shadow = container.attachShadow(&#123;<span class="attr">mode</span>: <span class="string">&#x27;closed&#x27;</span>&#125;)</span><br><span class="line"><span class="keyword">const</span> div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">div.innerHTML = mailContent</span><br><span class="line">shadow.appendChild(div)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>缺点：1. 出于安全考虑，一些元素（如<code>&lt;a&gt;</code>）不能使用shadow DOM，详见：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/attachShadow">https://developer.mozilla.org/zh-CN/docs/Web/API/Element/attachShadow</a></p>
<ol start="2">
<li>一个页面无法加载多个shadow DOM，否则报错<code>Error: Failed to execute &#39;attachShadow&#39; on &#39;Element&#39;: Shadow root cannot be created on a host which already hosts a shadow tree.</code></li>
</ol>
</blockquote>
</li>
<li><p>iframe</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> html = <span class="string">`&lt;h1&gt;我是一个标题&lt;/h1&gt;`</span></span><br><span class="line"><span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;contentContainer&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> myIframe = <span class="built_in">document</span>.createElement(<span class="string">&#x27;iframe&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> attrDict = &#123;</span><br><span class="line">    frameborder: <span class="number">0</span>,</span><br><span class="line">    scrolling: <span class="string">&#x27;no&#x27;</span>,</span><br><span class="line">    seamless: <span class="literal">true</span>,</span><br><span class="line">    allowtransparency: <span class="literal">true</span>,</span><br><span class="line">    referrerpolicy: <span class="string">&#x27;no-referrer&#x27;</span>,</span><br><span class="line">    <span class="comment">// sandbox: &#x27;&#x27;,  // 安全限制</span></span><br><span class="line">    src: <span class="string">&#x27;about:blank&#x27;</span>,</span><br><span class="line">    <span class="comment">// srcdoc: html // 填充html</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(attrDict)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> key = keys[i]</span><br><span class="line">    <span class="keyword">const</span> value = attrDict[key]</span><br><span class="line">    myIframe.setAttribute(key, value)</span><br><span class="line">&#125;</span><br><span class="line">myIframe.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> body = myIframe.contentDocument.querySelector(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line">    body.innerHTML = mailContent</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 先渲染DOM，再执行样式设置</span></span><br><span class="line">        myIframe.setAttribute(<span class="string">&#x27;width&#x27;</span>, body.scrollWidth)</span><br><span class="line">        myIframe.setAttribute(<span class="string">&#x27;height&#x27;</span>, body.scrollHeight)</span><br><span class="line">        body.style.overflow = <span class="string">&#x27;hidden&#x27;</span></span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line">container.appendChild(myIframe)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>缺点：1. iframe有许多安全性的问题，允许用户在你的网站嵌入内容，那么最好通过sandbox属性进行隔离，同时对用户的内容进行预解析处理，比如阻止用户嵌入link,script,iframe等容易导致安全性的标签。更多见：<a target="_blank" rel="noopener" href="https://www.xf1433.com/7986.html">https://www.xf1433.com/7986.html</a></p>
<ol start="2">
<li>iframe里面嵌入的链接打开是在iframe里面打开的，这个和正常的页面链接表现不一致，所以需要把所有的链接都改成<code>target=&quot;_blank&quot;</code>新页面打开，不能允许当前页面打开</li>
</ol>
</blockquote>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2016/06/css_modules.html">CSS Modules</a></p>
</li>
<li><p>js仿CSS Modules(无法处理外部样式，如通过link或者@import引入的样式)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 即通过JavaScript，解析css rule，然后对rule进行作用域限制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">limitStyleScope</span>(<span class="params">html, scopeStr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> replaceFun = <span class="function"><span class="keyword">function</span>(<span class="params">matched, item</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> matched.replace(item, item.split(<span class="string">&#x27;,&#x27;</span>).map(<span class="function"><span class="params">item</span> =&gt;</span> (scopeStr + <span class="string">&#x27;&#x27;</span> + item.trim())).join(<span class="string">&#x27;,&#x27;</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> html.replace(<span class="regexp">/&lt;style&gt;([\s\S]*?)&lt;\/style&gt;/gi</span>, <span class="function"><span class="keyword">function</span>(<span class="params">matched, item</span>) </span>&#123;</span><br><span class="line">        item = item.replace(<span class="regexp">/&amp;nbsp;/g</span>, <span class="string">&#x27; &#x27;</span>).replace(<span class="regexp">/\n/g</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="regexp">/\s+/g</span>, <span class="string">&#x27; &#x27;</span>).replace(<span class="regexp">/([\s\S]*?)&#123;/</span>, replaceFun).replace(<span class="regexp">/&#125;([\s\S]*?)&#123;/g</span>, replaceFun)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&lt;style&gt;&#x27;</span> + item + <span class="string">&#x27;&lt;/style&gt;&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 该方式的最佳实践是使用juice（&quot;juice&quot;: &quot;^4.2.0&quot;），上面仅仅是简单处理</span></span><br><span class="line"><span class="keyword">const</span> juice = <span class="built_in">require</span>(<span class="string">&#x27;juice&#x27;</span>)</span><br><span class="line"><span class="comment">// 转成行内样式（防止局部样式污染全局样式）</span></span><br><span class="line"><span class="keyword">const</span> htmlContent = ~htmlContent.indexOf(<span class="string">&#x27;&lt;/style&gt;&#x27;</span>) ? juice(htmlContent) : htmlContent</span><br><span class="line"><span class="comment">// 去除原来DOM上的类（防止全局样式污染局部样式）</span></span><br><span class="line">htmlContent = htmlContent.replace(<span class="regexp">/class=[&#x27;&quot;].+?[&#x27;&quot;]/</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment">// 解决&amp;nbsp;导致的单词内换行失效问题（word-beak: break-word;）</span></span><br><span class="line">htmlContent = htmlContent.replace(<span class="regexp">/(&amp;nbsp;)+/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">matched, item, index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> preWord = htmlContent[index - <span class="number">1</span>]</span><br><span class="line">    <span class="keyword">const</span> nextWord = htmlContent[index + matched.length]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (preWord === <span class="string">&#x27; &#x27;</span> &amp;&amp; nextWord === <span class="string">&#x27; &#x27;</span>) <span class="keyword">return</span> matched</span><br><span class="line">    <span class="keyword">if</span> (preWord === <span class="string">&#x27; &#x27;</span>) <span class="keyword">return</span> matched.slice(<span class="number">0</span>, -item.length) + <span class="string">&#x27; &#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (nextWord === <span class="string">&#x27; &#x27;</span>) <span class="keyword">return</span> <span class="string">&#x27; &#x27;</span> + matched.slice(item.length)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 前后都不为空</span></span><br><span class="line">    <span class="keyword">if</span> (blankLength &gt; <span class="number">2</span>) <span class="keyword">return</span> <span class="string">&#x27; &#x27;</span> + matched.slice(item.length, -item.length) + <span class="string">&#x27; &#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (blankLength === <span class="number">2</span>) <span class="keyword">return</span> <span class="string">&#x27; &#x27;</span> + item</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27; &#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>综上所述，iframe和web组件（借助css预处理）这两种方式比较符合，但是对于移动端传统应用无法使用上面2种方式也可以使用juice。</p>
<p>​    - 对于不太复杂的场景，如文章的发布建议使用web组件的css作用域隔离的方式。</p>
<p>​    - 如果是邮件等高危场景推荐使用iframe方便对内容更好做限制</p>
<p>​    - 如果是普通文本且不需要支持低版本浏览器，则可以使用shadowDOM</p>
<h2 id="29-js对象如何优雅的取出-设置一个深度的值？"><a href="#29-js对象如何优雅的取出-设置一个深度的值？" class="headerlink" title="29_js对象如何优雅的取出/设置一个深度的值？"></a>29_js对象如何优雅的取出/设置一个深度的值？</h2><p><a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000016285893">取出任意深度的js对象的值</a></p>
<blockquote>
<p>我这里是对lodash的简单实现，不考虑性能以及过多的安全因素</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  link: &#123;</span><br><span class="line">    title: <span class="string">&#x27;xxxx&#x27;</span>,</span><br><span class="line">    goods: [&#123; <span class="attr">name</span>: <span class="string">&#x27;西瓜&#x27;</span>, <span class="attr">price</span>: <span class="number">200</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;桃子&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// path错误不抛出，如果path路径下数据不存在则返回defaultValue</span></span><br><span class="line"><span class="comment">// data必须是普通对象，path必须是字符串</span></span><br><span class="line"><span class="keyword">const</span> _get = <span class="function"><span class="keyword">function</span> (<span class="params">data, path, defaultValue</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 通过正则表达式  查找路径数据</span></span><br><span class="line">  <span class="keyword">const</span> regex = <span class="regexp">/([\w$]+)|\[(:\d)\]/g</span></span><br><span class="line">  <span class="keyword">const</span> patten = path.match(regex)</span><br><span class="line">  <span class="keyword">let</span> result = data</span><br><span class="line">  <span class="comment">// 遍历路径  逐级查找 没有遍历完成就返回defaultValue</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = patten.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> key = patten[i]</span><br><span class="line">    result = result[key]</span><br><span class="line">    <span class="keyword">if</span> (!~[<span class="string">&#x27;[object Object]&#x27;</span>, <span class="string">&#x27;[object Array]&#x27;</span>].indexOf(<span class="built_in">Object</span>.prototype.toString.call(result)) &amp;&amp; i !== len - <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> defaultValue</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(_get(data, <span class="string">&#x27;link.goods[1].name&#x27;</span>, <span class="string">&#x27;苹果&#x27;</span>))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>还可以使用<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?enc=hObJyV9RZ3CG2HPGhfOs9g==.lIR+Og7ofTjDlFZFwZ2WyytczNckbhwHE7PQO9c+nKtYHizNnOtCJvJCxhSls97T">lodash/get</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 实现见：https://github.com/lodash/lodash/blob/master/get.js</span><br><span class="line">_.get(obj,<span class="string">&#x27;school.class1.student&#x27;</span>, <span class="literal">undefined</span>)</span><br></pre></td></tr></table></figure>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45031595/article/details/99695212">设置任意深度对象的值</a></p>
<blockquote>
<p>类似微信小程序的setData</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  link: &#123;</span><br><span class="line">    title: <span class="string">&#x27;xxxx&#x27;</span>,</span><br><span class="line">    goods: [&#123; <span class="attr">name</span>: <span class="string">&#x27;西瓜&#x27;</span>, <span class="attr">price</span>: <span class="number">200</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;桃子&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// path错误会抛出</span></span><br><span class="line"><span class="comment">// data必须是普通对象，path必须是字符串</span></span><br><span class="line"><span class="keyword">const</span> setData = <span class="function"><span class="keyword">function</span> (<span class="params">data, path, value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 通过正则表达式  查找路径数据</span></span><br><span class="line">    <span class="keyword">const</span> regex = <span class="regexp">/([\w$]+)|\[(:\d)\]/g</span></span><br><span class="line">    <span class="keyword">const</span> patten = path.match(regex)</span><br><span class="line">    <span class="keyword">let</span> result = data <span class="comment">// 指向调用的数据</span></span><br><span class="line">    <span class="comment">// 遍历路径  逐级查找  最后一级直接赋值</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = patten.length; i &lt; len; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> key = patten[i]</span><br><span class="line">      <span class="keyword">if</span> (i === len - <span class="number">1</span>) &#123;</span><br><span class="line">          result[key] = value</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          result = result[key]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">setData(data, <span class="string">&#x27;link.goods[1].name&#x27;</span>, <span class="string">&#x27;苹果&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(data.link.goods[<span class="number">1</span>].name)</span><br></pre></td></tr></table></figure>

<h2 id="30-自定义事件的使用"><a href="#30-自定义事件的使用" class="headerlink" title="30_自定义事件的使用"></a>30_自定义事件的使用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 推荐使用发布订阅者模式去实现，这里还涉及兼容性问题，不太推荐使用，了解即可</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;event_name&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;得到标题为：&#x27;</span>, event.detail.title);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> myEvent = <span class="keyword">new</span> CustomEvent(<span class="string">&#x27;event_name&#x27;</span>, &#123; </span><br><span class="line">    detail: &#123; <span class="attr">title</span>: <span class="string">&#x27;This is title!&#x27;</span>&#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">window</span>.dispatchEvent ? <span class="built_in">window</span>.dispatchEvent(myEvent) : <span class="built_in">window</span>.fireEvent(myEvent);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 简单的订阅发布模式的实现方式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Event</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.callbacks = &#123;&#125;</span><br><span class="line">    <span class="built_in">this</span>.$on = <span class="function"><span class="keyword">function</span> (<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.callbacks[name] = <span class="built_in">this</span>.callbacks[name] || []</span><br><span class="line">        <span class="built_in">this</span>.callbacks[name].push(fn);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.$emit = <span class="function"><span class="keyword">function</span> (<span class="params">name, value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">this</span>.callbacks[name]) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.callbacks[name].forEach(<span class="function"><span class="params">fn</span> =&gt;</span> fn(value))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.$off = <span class="function"><span class="keyword">function</span> (<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!name) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (fn) &#123;</span><br><span class="line">            <span class="keyword">let</span> index = <span class="built_in">this</span>.callbacks[name].indexOf(fn);</span><br><span class="line">            <span class="built_in">this</span>.callbacks[name].splice(index, <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.callbacks[name].length = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//   简单使用</span></span><br><span class="line"><span class="keyword">let</span> event = <span class="keyword">new</span> Event()</span><br><span class="line">event.$on(<span class="string">&#x27;event1&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;事件1&#x27;</span>, arg)</span><br><span class="line">&#125;)</span><br><span class="line">event.$on(<span class="string">&#x27;event2&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;事件2&#x27;</span>, arg)</span><br><span class="line">&#125;)</span><br><span class="line">event.$emit(<span class="string">&#x27;event1&#x27;</span>, &#123;<span class="attr">name</span>: <span class="string">&#x27;111&#x27;</span>&#125;)</span><br><span class="line">event.$emit(<span class="string">&#x27;event2&#x27;</span>, &#123;<span class="attr">age</span>: <span class="string">&#x27;222&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="31-冻结对象"><a href="#31-冻结对象" class="headerlink" title="31_冻结对象"></a>31_冻结对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 使用Object.freeze实现</span></span><br><span class="line"><span class="comment">// https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 通过Object.definedProperty() + Object.seal()模拟实现Object.freeze</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFreeze</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || obj === <span class="literal">null</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">Object</span>.seal(obj) <span class="comment">// 让对象不能被扩展、删除属性等等</span></span><br><span class="line">    <span class="keyword">const</span> propNames = <span class="built_in">Object</span>.getOwnPropertyNames(obj)</span><br><span class="line">    propNames.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// const propValue = obj[name]</span></span><br><span class="line">        <span class="built_in">Object</span>.defineProperty(obj, name, &#123;</span><br><span class="line">            <span class="comment">// configurable: false, // 表示能否通过delete删除属性，能否修改属性的特性...</span></span><br><span class="line">            <span class="comment">// enumerable: false, // 表示是否可以枚举。直接在对象上定义的属性，基本默认true</span></span><br><span class="line">            writable: <span class="literal">false</span>, <span class="comment">// 表示能否修改属性的值。直接在对象上定义的属性，基本默认true</span></span><br><span class="line">            <span class="comment">// value: propValue// 表示属性的值。访问属性时从这里读取，修改属性时，也保存在这里。</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现深度冻结</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepFreeze</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> propNames = <span class="built_in">Object</span>.getOwnPropertyNames(obj)</span><br><span class="line">  propNames.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> prop = obj[name]</span><br><span class="line">    <span class="comment">// 如果prop是个对象，冻结它(这里复杂对象也是一样的，因为复杂对象的Object.getOwnPropertyNames为[], 调用Object.freeze可以冻结原型上的所有属性)</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> prop == <span class="string">&#x27;object&#x27;</span> &amp;&amp; prop !== <span class="literal">null</span>) deepFreeze(prop)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.freeze(obj)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="32-原生js实现移动端的一些常用事件"><a href="#32-原生js实现移动端的一些常用事件" class="headerlink" title="32_原生js实现移动端的一些常用事件"></a>32_原生js实现移动端的一些常用事件</h2><p>更多手势事件见：<a target="_blank" rel="noopener" href="https://www.runoob.com/ionic/ionic-gesture-event.html">https://www.runoob.com/ionic/ionic-gesture-event.html</a></p>
<p>这里目前只实现了部分</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 支持事件列表</span></span><br><span class="line">  <span class="keyword">const</span> eventArr = [<span class="string">&#x27;swipeleft&#x27;</span>, <span class="string">&#x27;swiperight&#x27;</span>, <span class="string">&#x27;slideup&#x27;</span>, <span class="string">&#x27;slidedown&#x27;</span>, <span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;longpress&#x27;</span>]</span><br><span class="line">  <span class="comment">// 自定义事件的前缀标识</span></span><br><span class="line">  <span class="keyword">const</span> prefix = <span class="string">&#x27;event_&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// touchstart事件，delta记录开始触摸位置</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">touchStart</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.delta = &#123;&#125;</span><br><span class="line">    <span class="built_in">this</span>.delta.startX = event.touches[<span class="number">0</span>].pageX</span><br><span class="line">    <span class="built_in">this</span>.delta.startY = event.touches[<span class="number">0</span>].pageY</span><br><span class="line">    <span class="built_in">this</span>.delta.startTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * touchmove事件，手势滑动情况处理</span></span><br><span class="line"><span class="comment">   * 1、如果位移量很小或没有位移，可能是点击事件交由touchEnd处理</span></span><br><span class="line"><span class="comment">   * 2、如果位移量较大，x大于y，可以看做平移，x&gt;0,向右滑，反之向左滑。</span></span><br><span class="line"><span class="comment">   * 3、如果位移量较大，x小于y，看做上下移动，y&gt;0,向下滑，反之向上滑</span></span><br><span class="line"><span class="comment">   * */</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">touchMove</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> delta = <span class="built_in">this</span>.delta</span><br><span class="line">    delta.x = delta.startX - event.changedTouches[<span class="number">0</span>].pageX</span><br><span class="line">    delta.y = delta.startY - event.changedTouches[<span class="number">0</span>].pageY</span><br><span class="line"></span><br><span class="line">    event.delta = delta</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(delta.x) &lt; <span class="number">5</span> &amp;&amp; <span class="built_in">Math</span>.abs(delta.y) &lt; <span class="number">5</span>) &#123; <span class="comment">// 移动距离小于5认为是点击</span></span><br><span class="line">      <span class="comment">// Pass</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(delta.x) &gt; <span class="built_in">Math</span>.abs(delta.y)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (delta.x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>[prefix + <span class="string">&#x27;swipeleft&#x27;</span>] &amp;&amp; <span class="built_in">this</span>[prefix + <span class="string">&#x27;swipeleft&#x27;</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">          event.ctype = <span class="string">&#x27;swipeleft&#x27;</span></span><br><span class="line">          fn(event)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (delta.x &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>[prefix + <span class="string">&#x27;swiperight&#x27;</span>] &amp;&amp; <span class="built_in">this</span>[prefix + <span class="string">&#x27;swiperight&#x27;</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">          event.ctype = <span class="string">&#x27;swiperight&#x27;</span></span><br><span class="line">          fn(event)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (delta.y &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>[prefix + <span class="string">&#x27;slidedown&#x27;</span>] &amp;&amp; <span class="built_in">this</span>[prefix + <span class="string">&#x27;slidedown&#x27;</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">          event.ctype = <span class="string">&#x27;slidedown&#x27;</span></span><br><span class="line">          fn(event)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (delta.y &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>[prefix + <span class="string">&#x27;slideup&#x27;</span>] &amp;&amp; <span class="built_in">this</span>[prefix + <span class="string">&#x27;slideup&#x27;</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">          event.ctype = <span class="string">&#x27;slideup&#x27;</span></span><br><span class="line">          fn(event)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// touchend事件，非手势滑动情况处理</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">touchEnd</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> delta = <span class="built_in">this</span>.delta</span><br><span class="line">    delta.endX = delta.startX - event.changedTouches[<span class="number">0</span>].pageX</span><br><span class="line">    delta.endY = delta.startY - event.changedTouches[<span class="number">0</span>].pageY</span><br><span class="line">    <span class="built_in">this</span>.delta.endTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">    <span class="keyword">const</span> timegap = <span class="built_in">this</span>.delta.startTime - <span class="built_in">this</span>.delta.endTime</span><br><span class="line"></span><br><span class="line">    event.delta = delta</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Math</span>.abs(delta.endX) &lt; <span class="number">5</span> &amp;&amp; <span class="built_in">Math</span>.abs(delta.endY) &lt; <span class="number">5</span>) &#123; <span class="comment">// 移动距离小于5认为是点击</span></span><br><span class="line">      <span class="keyword">if</span> (timegap &lt; <span class="number">1000</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>[prefix + <span class="string">&#x27;click&#x27;</span>] &amp;&amp; <span class="built_in">this</span>[prefix + <span class="string">&#x27;click&#x27;</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">          event.ctype = <span class="string">&#x27;click&#x27;</span></span><br><span class="line">          fn(event)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>[prefix + <span class="string">&#x27;longpress&#x27;</span>] &amp;&amp; <span class="built_in">this</span>[prefix + <span class="string">&#x27;longpress&#x27;</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">          event.ctype = <span class="string">&#x27;longpress&#x27;</span></span><br><span class="line">          fn(event)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 防抖（延迟结束后调用）</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      timer &amp;&amp; <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">        fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">      &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 节流（延迟结束后调用）</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!timer) &#123;</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">          fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">          timer = <span class="literal">null</span></span><br><span class="line">        &#125;, delay)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> throttleTouchMove = throttle(touchMove, <span class="number">300</span>)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bindEvent</span> (<span class="params">dom, type, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!dom || !<span class="regexp">/HTML(.+)Element/</span>.test(<span class="built_in">Object</span>.prototype.toString.call(dom))) <span class="keyword">return</span> <span class="built_in">console</span>.error(<span class="string">&#x27;dom is not support!&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!~eventArr.indexOf(type)) <span class="keyword">return</span> <span class="built_in">console</span>.error(<span class="string">&#x27;type is not support!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    type = prefix + type</span><br><span class="line">    dom[type] = dom[type] || []</span><br><span class="line">    dom[type].push(callback)</span><br><span class="line"></span><br><span class="line">    dom.addEventListener(<span class="string">&#x27;touchstart&#x27;</span>, touchStart)</span><br><span class="line">    dom.addEventListener(<span class="string">&#x27;touchmove&#x27;</span>, throttleTouchMove)</span><br><span class="line">    dom.addEventListener(<span class="string">&#x27;touchend&#x27;</span>, touchEnd)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">removeEvent</span> (<span class="params">dom, type, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!dom[<span class="string">&#x27;event&#x27;</span> + type]) <span class="keyword">return</span> <span class="built_in">console</span>.error(<span class="string">&#x27;type is not exist!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    type = prefix + type</span><br><span class="line">    <span class="keyword">const</span> index = dom[type].indexOf(callback)</span><br><span class="line">    index &gt; -<span class="number">1</span> &amp;&amp; dom[type].splice(index, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (dom[type].length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">delete</span> dom[type]</span><br><span class="line">      dom.removeEventListener(<span class="string">&#x27;touchstart&#x27;</span>, touchStart)</span><br><span class="line">      dom.removeEventListener(<span class="string">&#x27;touchmove&#x27;</span>, throttleTouchMove)</span><br><span class="line">      dom.removeEventListener(<span class="string">&#x27;touchend&#x27;</span>, touchEnd)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    bindEvent,</span><br><span class="line">    removeEvent</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> EventUtil <span class="keyword">from</span> <span class="string">&#x27;./touch-utils&#x27;</span></span><br><span class="line">EventUtil.bindEvent(<span class="built_in">document</span>.body, <span class="string">&#x27;swipeleft&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">&#x27;swipeleft&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="33-回调API改成支持Promise"><a href="#33-回调API改成支持Promise" class="headerlink" title="33_回调API改成支持Promise"></a>33_回调API改成支持Promise</h2><p>如微信小程序现在大多数的API还是使用回调的方式，不支持promise。可以使用该方式进行封装。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promisic = <span class="function"><span class="keyword">function</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">params = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> args = <span class="built_in">Object</span>.assign(params, &#123;</span><br><span class="line">        success: <span class="function"><span class="params">res</span> =&gt;</span> resolve(res),</span><br><span class="line">        fail: <span class="function"><span class="params">err</span> =&gt;</span> reject(err)</span><br><span class="line">      &#125;)</span><br><span class="line">      func(args)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 微信小程序API使用</span></span><br><span class="line">promisic(wx.request)(&#123;</span><br><span class="line">    url: <span class="string">&#x27;http://127.0.0.1/api/v1/users&#x27;</span>,</span><br><span class="line">    data: &#123;&#125;,</span><br><span class="line">    method: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    header: &#123;<span class="attr">AUTH</span>: <span class="string">&#x27;xxxxxxxx&#x27;</span>&#125;,</span><br><span class="line">    <span class="comment">// success: res =&gt; &#123;&#125;,</span></span><br><span class="line">    <span class="comment">// fail: err =&gt; &#123;&#125;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="34-node传参"><a href="#34-node传参" class="headerlink" title="34_node传参"></a>34_node传参</h2><p>在package.json里面脚本经常使用 <code>node build.js</code> 的命令打包，可以使用下面的方式传参。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [nodePath, filePath, ...arguments] = process.argv</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span><br><span class="line"><span class="keyword">const</span> result = <span class="built_in">arguments</span>.reduce(<span class="function">(<span class="params">cur, value</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> objKey = value.split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">	<span class="keyword">const</span> objValue = value.split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">	cur[objKey] = objValue</span><br><span class="line">	<span class="keyword">return</span> cur</span><br><span class="line">&#125;, &#123;&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 举例</span></span><br><span class="line">node build.js arg1=<span class="number">1</span> arg2=<span class="number">2</span> arg3=<span class="number">3</span></span><br><span class="line">node build.js arg1 arg2 arg3</span><br></pre></td></tr></table></figure>

<blockquote>
<p>也可以使用第三方插件，如 <code>const argv = require(&#39;yargs&#39;).argv</code>, 注意用法稍有不同（<code>node build.js --arg1 1 --arg2 2 --arg3 3</code>, 即webpack-dev-server使用的读取参数模块, webpack-dev-server –config ./webpack.conf.js）</p>
<p>PS: 多扩展一点，在webpack-dev-server启动服务器时，仅支持指定的参数，如–config,–inline等，要传入自定义的一些参数可以通过下面方式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">webpack-dev-server --inline --progress --config build/webpack.dev.conf.js --env.platform app</span><br><span class="line"><span class="comment"># argv.env.platform 即可拿到自定义参数</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="35-英文单词自动换行"><a href="#35-英文单词自动换行" class="headerlink" title="35_英文单词自动换行"></a>35_英文单词自动换行</h2><p>本来这个是css问题，可以通过css解决，但是发现在富文本编辑器中存在用户复制粘贴导致的单词内空格通过HTML字符实体(<code>&amp;nbsp;</code>)连接，css失去效用，参考outlook和qq邮箱，采用加上js过滤的方式处理</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设这里contentHTML是富文本编辑的html数据</span></span><br><span class="line">contentHTML = contentHTML.replace(<span class="regexp">/ /g</span>, <span class="string">&#x27;&amp;nbsp;&#x27;</span>)</span><br><span class="line">contentHTML = contentHTML.replace(<span class="regexp">/(&amp;nbsp;)+/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">matched, item</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> blankLength = matched.length / item.length</span><br><span class="line">    <span class="comment">// 2个以上&amp;nbsp;出现情况</span></span><br><span class="line">    <span class="keyword">if</span> (blankLength &gt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27; &#x27;</span> + matched.slice(item.length, -item.length) + <span class="string">&#x27; &#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2个&amp;nbsp;出现情况</span></span><br><span class="line">    <span class="keyword">if</span> (blankLength === <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> item + <span class="string">&#x27; &#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 单个&amp;nbsp;出现情况</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27; &#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>拓展：这里css用下面的代码实现</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">word-wrap</span>: <span class="selector-tag">break-word</span>;</span><br><span class="line"><span class="selector-tag">overflow-wrap</span>: <span class="selector-tag">anywhere</span>;  <span class="comment">/* overflow-wrap 是 CSS3 里的属性，用来取代 word-wrap，为了兼容2个都写上 */</span></span><br><span class="line"><span class="comment">/* ===== */</span> </span><br><span class="line"><span class="selector-tag">word-break</span>: <span class="selector-tag">break-word</span>;  <span class="comment">/* deprecated，目前依旧可用，且兼容性更好，作用相当于上面的2个 */</span></span><br></pre></td></tr></table></figure>

<p><code>word-wrap: break-word;</code> 和 <code>overflow-wrap: break-word;</code> 只适合在宽度固定的场景下，如果对于自适应宽度会失效，如flex布局右侧自适应。可以用 word-wrap: break-word; + overflow-wrap: anywhere; 处理，或者 word-break: break-word;<strong>目前来说，推荐使用word-break: break-word;，兼容性更好</strong>（有点讽刺）。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/overflow-wrap">https://developer.mozilla.org/en-US/docs/Web/CSS/overflow-wrap</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/hyphens">https://developer.mozilla.org/en-US/docs/Web/CSS/hyphens</a></p>
<p><a target="_blank" rel="noopener" href="https://caniuse.com/?search=overflow-wrap">https://caniuse.com/?search=overflow-wrap</a></p>
</blockquote>
<h2 id="36-cookie操作封装"><a href="#36-cookie操作封装" class="headerlink" title="36_cookie操作封装"></a>36_cookie操作封装</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $cookies = &#123;</span><br><span class="line">    set: <span class="function"><span class="keyword">function</span> (<span class="params">name, value, options = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> domain = options.domain || location.host</span><br><span class="line">        <span class="keyword">var</span> path = options.path || <span class="string">&#x27;/&#x27;</span></span><br><span class="line">        <span class="keyword">var</span> expires = options.expires || <span class="number">30</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span></span><br><span class="line">        <span class="keyword">var</span> expireTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">        expireTime.setTime(expireTime.getTime() + expires);</span><br><span class="line">        expires = expireTime.toGMTString()</span><br><span class="line">        <span class="built_in">document</span>.cookie = name + <span class="string">&quot;=&quot;</span> + <span class="built_in">encodeURIComponent</span>(value) + <span class="string">&quot;;expires=&quot;</span> + expires + <span class="string">&quot;;domain=&quot;</span> + domain + <span class="string">&quot;;path=&quot;</span> + path;</span><br><span class="line">    &#125;,</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&quot;(^| )&quot;</span> + name + <span class="string">&quot;=([^;]*)(;|$)&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> arr = <span class="built_in">document</span>.cookie.match(reg)</span><br><span class="line">        <span class="keyword">return</span> arr &amp;&amp; <span class="built_in">decodeURIComponent</span>(arr[<span class="number">2</span>]);</span><br><span class="line">    &#125;,</span><br><span class="line">    remove: <span class="function"><span class="keyword">function</span> (<span class="params">name, options = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> domain = options.domain || location.host</span><br><span class="line">        <span class="keyword">var</span> path = options.path || <span class="string">&#x27;/&#x27;</span></span><br><span class="line">        <span class="keyword">var</span> exp = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">        exp.setTime(exp.getTime() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">var</span> cval = <span class="built_in">this</span>.get(name);</span><br><span class="line">        <span class="keyword">if</span> (cval != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">document</span>.cookie = name + <span class="string">&quot;=&quot;</span> + cval + <span class="string">&quot;;expires=&quot;</span> + exp.toGMTString() + <span class="string">&quot;;domain=&quot;</span> + domain + <span class="string">&quot;;path=&quot;</span> + path;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    list: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> result = &#123;&#125;</span><br><span class="line">        <span class="keyword">var</span> arrCookie = <span class="built_in">document</span>.cookie.split(<span class="string">&quot;; &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arrCookie.length; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> arr = arrCookie[i].split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">            result[arr[<span class="number">0</span>]] = arr[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    &#125;,</span><br><span class="line">    clear: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 这里可能会有点兼容问题，正则断言是ES6才支持的</span></span><br><span class="line">        <span class="keyword">var</span> keys = <span class="built_in">document</span>.cookie.match(<span class="regexp">/[^ =;]+(?==)/g</span>);</span><br><span class="line">        keys = keys || []</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = keys.length; i--;) &#123;</span><br><span class="line">            <span class="built_in">document</span>.cookie = keys[i] + <span class="string">&#x27;=0;expires=&#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">0</span>).toUTCString()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="37-微信内置浏览器环境判断"><a href="#37-微信内置浏览器环境判断" class="headerlink" title="37_微信内置浏览器环境判断"></a>37_微信内置浏览器环境判断</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getRunEnv = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> isMobile = <span class="built_in">window</span>.navigator.userAgent.match(<span class="regexp">/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i</span>); <span class="comment">// 是否手机端</span></span><br><span class="line">    <span class="keyword">var</span> isWx = <span class="regexp">/micromessenger/i</span>.test(navigator.userAgent); <span class="comment">// 是否微信(企业微信也带这个ua头)</span></span><br><span class="line">    <span class="keyword">var</span> isComWx = <span class="regexp">/wxwork/i</span>.test(navigator.userAgent); <span class="comment">// 是否企业微信</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isComWx &amp;&amp; isMobile) &#123; <span class="comment">//手机端企业微信 （下载文件通过wx.preview的JSSDK实现）</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;com-wx-mobile&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (isComWx &amp;&amp; !isMobile) &#123; <span class="comment">//PC端企业微信 （可以直接下载）</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;com-wx-pc&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (isWx &amp;&amp; isMobile) &#123; <span class="comment">// 手机端普通微信 （不可以直接下载，需要引导用户使用浏览器打开）</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;wx-mobile&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (isWx &amp;&amp; !isMobile) &#123; <span class="comment">// PC端普通微信 （不可以直接下载，需要引导用户使用浏览器打开）</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;wx-pc&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;other&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>参考：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/93ab17a7d8b7">https://www.jianshu.com/p/93ab17a7d8b7</a></p>
<blockquote>
<p>普通微信中，普通文件可以直接下载，apk会被屏蔽，部分其他文件格式也会被屏蔽（解决：<del><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45132005/article/details/90580806%EF%BC%8C%E5%A5%BD%E5%83%8F%E6%9C%80%E8%BF%91%E7%B1%BB%E4%BC%BC%E7%9A%84%E5%B9%B3%E5%8F%B0%E9%83%BD%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E4%BA%86">https://blog.csdn.net/weixin_45132005/article/details/90580806，好像最近类似的平台都无法访问了</a></del>）</p>
<p>apk要在微信中下载：<a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000002553117">https://segmentfault.com/q/1010000002553117</a></p>
<p>企业微信PC有接口可以调起浏览器打开：<code>wx.invoke(&#39;openDefaultBrowser&#39;， &#123;&#125;）</code>, 如果文件下载只为预览，企业微信移动端可以用 <code>wx.previewFile</code> 接口</p>
</blockquote>
<h2 id="38-location-replace不生效处理方法"><a href="#38-location-replace不生效处理方法" class="headerlink" title="38_location.replace不生效处理方法"></a>38_location.replace不生效处理方法</h2><p>在钉钉和微信的内置浏览器存在location.relace会产生历史问题，可以用<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/14333620/android-webview-location-replace-doesnt-work">下面方法</a>解决。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">locationReplace</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (history.replaceState) &#123;</span><br><span class="line">    history.replaceState(<span class="literal">null</span>, <span class="built_in">document</span>.title, url)</span><br><span class="line">    history.go(<span class="number">0</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    location.replace(url)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/community/develop/doc/00086a7a1c48a896240a86ead56400">微信内网页使用 location.replace 和 history.replaceState 问题</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.aliyun.com/ask/254119?spm=a2c6h.13159736">钉钉Android端内置浏览器location.replace不兼容</a></li>
</ul>
<h2 id="39-常用的正则表达式"><a href="#39-常用的正则表达式" class="headerlink" title="39_常用的正则表达式"></a>39_常用的正则表达式</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匹配URL的Origin</span></span><br><span class="line"><span class="string">&#x27;https://www.baidu.com&#x27;</span>.match(<span class="regexp">/^https?:\/\/[\w-.]+(:\d+)?/i</span>)</span><br><span class="line"><span class="comment">// 验证邮件地址(http://stackoverflow.com/questions/46155/validate-email-address-in-javascript)</span></span><br><span class="line"><span class="string">&#x27;mail@test.com&#x27;</span>.match( <span class="regexp">/^(([^&lt;&gt;()\[\]\.,;:\s@\&quot;]+(\.[^&lt;&gt;()\[\]\.,;:\s@\&quot;]+)*)|(\&quot;.+\&quot;))@(([^&lt;&gt;()[\]\.,;:\s@\&quot;]+\.)+[^&lt;&gt;()[\]\.,;:\s@\&quot;]&#123;2,&#125;)$/</span>)</span><br><span class="line"><span class="comment">// 手机号校验</span></span><br><span class="line"><span class="string">&#x27;18886233487&#x27;</span>.match(<span class="regexp">/^[1][3,4,5,6,7,8,9][0-9]&#123;9&#125;$/</span>)</span><br><span class="line"><span class="comment">// 身份证校验</span></span><br><span class="line"><span class="string">&#x27;415106199801012130&#x27;</span>.match(<span class="regexp">/^[1-9]\d&#123;5&#125;(18|19|([23]\d))\d&#123;2&#125;((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d&#123;3&#125;[0-9Xx]$/</span>)</span><br><span class="line"><span class="comment">// IPV4校验</span></span><br><span class="line"><span class="string">&#x27;122.12.56.65&#x27;</span>.match(<span class="regexp">/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.)&#123;3&#125;(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/</span>)</span><br><span class="line"><span class="comment">// 是否包含中文</span></span><br><span class="line"><span class="string">&#x27;中文 en_US&#x27;</span>.match(<span class="regexp">/[\u4E00-\u9FA5]/</span>)</span><br><span class="line">                    </span><br></pre></td></tr></table></figure>





<h2 id="40-生成随机数"><a href="#40-生成随机数" class="headerlink" title="40_生成随机数"></a>40_生成随机数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomString</span>(<span class="params">len</span>) </span>&#123;</span><br><span class="line">    len = len || <span class="number">32</span>;</span><br><span class="line">    <span class="comment">/****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/</span></span><br><span class="line">    <span class="keyword">var</span> $chars = <span class="string">&#x27;ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> maxPos = $chars.length;</span><br><span class="line">    <span class="keyword">var</span> pwd = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        pwd += $chars.charAt(<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * maxPos));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="41-文件大小格式化"><a href="#41-文件大小格式化" class="headerlink" title="41_文件大小格式化"></a>41_文件大小格式化</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// c 参数：表示要被转化的容量大小，以字节为单</span></span><br><span class="line"><span class="comment">// b 参数：表示如果转换时出小数，四舍五入保留多少位 默认为2位小数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatBytes</span>(<span class="params">a, b</span>) </span>&#123; </span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> == a) <span class="keyword">return</span> <span class="string">&quot;0 B&quot;</span>; </span><br><span class="line">    <span class="keyword">var</span> c = <span class="number">1024</span>, d = b || <span class="number">2</span>, e = [<span class="string">&quot;B&quot;</span>, <span class="string">&quot;KB&quot;</span>, <span class="string">&quot;MB&quot;</span>, <span class="string">&quot;GB&quot;</span>, <span class="string">&quot;TB&quot;</span>, <span class="string">&quot;PB&quot;</span>, <span class="string">&quot;EB&quot;</span>, <span class="string">&quot;ZB&quot;</span>, <span class="string">&quot;YB&quot;</span>], f = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.log(a) / <span class="built_in">Math</span>.log(c)); </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseFloat</span>((a / <span class="built_in">Math</span>.pow(c, f)).toFixed(d)) + <span class="string">&quot; &quot;</span> + e[f];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sizeTostr</span>(<span class="params">size</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> data = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (size &lt; <span class="number">0.1</span> * <span class="number">1024</span>) &#123; <span class="comment">//如果小于0.1KB转化成B  </span></span><br><span class="line">        data = size.toFixed(<span class="number">2</span>) + <span class="string">&quot;B&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (size &lt; <span class="number">0.1</span> * <span class="number">1024</span> * <span class="number">1024</span>) &#123;<span class="comment">//如果小于0.1MB转化成KB  </span></span><br><span class="line">        data = (size / <span class="number">1024</span>).toFixed(<span class="number">2</span>) + <span class="string">&quot;KB&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (size &lt; <span class="number">0.1</span> * <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">1024</span>) &#123; <span class="comment">//如果小于0.1GB转化成MB  </span></span><br><span class="line">        data = (size / (<span class="number">1024</span> * <span class="number">1024</span>)).toFixed(<span class="number">2</span>) + <span class="string">&quot;MB&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">//其他转化成GB  </span></span><br><span class="line">        data = (size / (<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">1024</span>)).toFixed(<span class="number">2</span>) + <span class="string">&quot;GB&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> sizestr = data + <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> len = sizestr.indexOf(<span class="string">&quot;\.&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> dec = sizestr.substr(len + <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">if</span> (dec == <span class="string">&quot;00&quot;</span>) &#123;<span class="comment">//当小数点后为00时 去掉小数部分  </span></span><br><span class="line">        <span class="keyword">return</span> sizestr.substring(<span class="number">0</span>, len) + sizestr.substr(len + <span class="number">3</span>, <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sizestr;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<blockquote>
<p><a target="_blank" rel="noopener" href="http://4dn.net/jsxx/114.html">http://4dn.net/jsxx/114.html</a></p>
</blockquote>
<h2 id="42-Promise-allSettled实现"><a href="#42-Promise-allSettled实现" class="headerlink" title="42_Promise.allSettled实现"></a>42_Promise.allSettled实现</h2><blockquote>
<p>原生支持情况：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled</a></p>
<p>因为浏览器支持不好，自己实现一下</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> allSettled = <span class="function"><span class="keyword">function</span>(<span class="params">promiseList</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> results = []</span><br><span class="line">        <span class="keyword">let</span> counter = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promiseList.length; i++) &#123;</span><br><span class="line">            <span class="keyword">const</span> pInstance = promiseList[i]</span><br><span class="line">            pInstance.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                results[i] = &#123;</span><br><span class="line">                    status: <span class="string">&#x27;fulfilled&#x27;</span>,</span><br><span class="line">                    value: res</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                results[i] = &#123;</span><br><span class="line">                    status: <span class="string">&#x27;rejected&#x27;</span>,</span><br><span class="line">                    reason: err</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).finally(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">                counter += <span class="number">1</span></span><br><span class="line">                counter === promiseList.length &amp;&amp; resolve(results)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="string">&#x27;fulfilled value&#x27;</span>)</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">        reject(<span class="string">&#x27;rejected reason&#x27;</span>)</span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">allSettled([p1, p2]).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> successResults = results.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.status === <span class="string">&#x27;fulfilled&#x27;</span>).map(<span class="function"><span class="params">item</span> =&gt;</span> item.value)</span><br><span class="line">    <span class="keyword">let</span> failResults = results.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.status === <span class="string">&#x27;rejected&#x27;</span>).map(<span class="function"><span class="params">item</span> =&gt;</span> item.reason)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;successResults&#x27;</span>, successResults)</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;failResults&#x27;</span>, failResults)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="43-判断是否为整数类型"><a href="#43-判断是否为整数类型" class="headerlink" title="43_判断是否为整数类型"></a>43_判断是否为整数类型</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isInteger</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">typeof</span> obj === <span class="string">&#x27;number&#x27;</span> &amp;&amp; obj%<span class="number">1</span> === <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isInteger</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.floor(obj) === obj <span class="comment">// 这里 Math.round、Math.ceil、Math.floor 都一样</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isInteger</span>(<span class="params">obj</span>) </span>&#123; <span class="comment">// ES6</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Number</span>.isInteger(obj)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 下面2种方式有轻微缺陷（可以作为参考）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isInteger</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseInt</span>(obj, <span class="number">10</span>) === obj</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// isInteger(1000000000000000000000) // false</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isInteger</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (obj | <span class="number">0</span>) === obj</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// isInteger(Math.pow(2, 32)) // 32位以上的数字返回false了</span></span><br></pre></td></tr></table></figure>



<h2 id="44-防抖节流"><a href="#44-防抖节流" class="headerlink" title="44_防抖节流"></a>44_防抖节流</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 防抖（常见场景：键盘输入关键词联想）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay, options = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 指定在延迟开始前调用</span></span><br><span class="line">        <span class="keyword">if</span> (options.leading) &#123;</span><br><span class="line">            timer ? <span class="built_in">clearTimeout</span>(timer) : fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">                timer = <span class="literal">null</span></span><br><span class="line">            &#125;, delay)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            timer &amp;&amp; <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">                fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">                timer = <span class="literal">null</span></span><br><span class="line">            &#125;, delay)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 节流（常见场景：滚动条监听）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay, options = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (options.leading) &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">        timer = <span class="literal">null</span></span><br><span class="line">      &#125;, delay)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">        fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">        timer = <span class="literal">null</span></span><br><span class="line">      &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="45-删除DOM上的所有属性"><a href="#45-删除DOM上的所有属性" class="headerlink" title="45_删除DOM上的所有属性"></a>45_删除DOM上的所有属性</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cleanDOM</span> (<span class="params">innerHTMLStr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    div.innerHTML = innerHTMLStr</span><br><span class="line">    <span class="keyword">const</span> nodes = div.querySelectorAll(<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nodes.length; i++) &#123;</span><br><span class="line">        <span class="keyword">const</span> attributes = nodes[i].attributes</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; attributes.length; j++) &#123;</span><br><span class="line">            nodes[i].removeAttribute(attributes[j].name)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> div.innerHTML</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里只为记录一个疑惑，要完全清除需要执行多遍，不清楚为什么？猜测和浏览器重排优化有关</p>
</blockquote>
<h2 id="46-懒加载"><a href="#46-懒加载" class="headerlink" title="46_懒加载"></a>46_懒加载</h2><p>对于邮件或者博文，可能存在html过长导致的页面显示不了或者等待过长时间，可以使用DOM的懒加载处理（特别是IOS移动端，低内存下如果来个10多M的html字符串则容易卡死或者自动刷新）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#displayRoom</span> &#123;</span></span><br><span class="line">            width: 500px;</span><br><span class="line">            height: 800px;</span><br><span class="line">            margin: 50px auto;</span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ccc</span>;</span></span><br><span class="line">            overflow: auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#displayRoom</span> <span class="selector-tag">img</span> &#123;<span class="attribute">max-width</span>: <span class="number">100%</span>;&#125;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;displayRoom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay, options = &#123;&#125;</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> timer = <span class="literal">null</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (timer) <span class="keyword">return</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (options.leading) &#123;</span></span><br><span class="line"><span class="javascript">                fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>)</span></span><br><span class="line"><span class="javascript">                timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    timer = <span class="literal">null</span></span></span><br><span class="line">                &#125;, delay)</span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>)</span></span><br><span class="line"><span class="javascript">                    timer = <span class="literal">null</span></span></span><br><span class="line">                &#125;, delay)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">checkVisible</span>(<span class="params">elem</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// https://stackoverflow.com/questions/19669786/check-if-element-is-visible-in-dom</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (!(elem <span class="keyword">instanceof</span> Element)) <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">&#x27;DomUtil: elem is not an element.&#x27;</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (elem.checkVisibility) <span class="keyword">return</span> elem.checkVisibility(&#123;</span></span><br><span class="line"><span class="javascript">                checkOpacity: <span class="literal">true</span>,      <span class="comment">// Check CSS opacity property too</span></span></span><br><span class="line"><span class="javascript">                checkVisibilityCSS: <span class="literal">true</span> <span class="comment">// Check CSS visibility property too</span></span></span><br><span class="line">            &#125;);</span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );</span></span><br><span class="line"><span class="javascript">            <span class="comment">// var rect = elm.getBoundingClientRect();</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// var viewHeight = Math.max(document.documentElement.clientHeight, window.innerHeight);</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// return !(rect.bottom &lt; 0 || rect.top - viewHeight &gt;= 0);</span></span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">hideDOM</span> (<span class="params">mailHTML</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span></span><br><span class="line"><span class="javascript">            mailHTML = mailHTML.replace(<span class="regexp">/src\s*?=/ig</span>, <span class="string">&quot;tmp-src=&quot;</span>) <span class="comment">// 防止资源提前加载</span></span></span><br><span class="line">            div.innerHTML = mailHTML</span><br><span class="line"><span class="javascript">            <span class="comment">// 博文不好划分，因此对于一些容易占用资源的元素进行隐藏(尽量根据实际情况进行隐藏，这里简单化处理)</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> nodes = div.querySelectorAll(<span class="string">&#x27;blockquote, img, video, table&#x27;</span>)</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 注意为了防止嵌套情况，需要从后往前替换</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">for</span> (<span class="keyword">let</span> i = nodes.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> lazyNode = <span class="built_in">document</span>.createElement(<span class="string">&#x27;lazynode&#x27;</span>)</span></span><br><span class="line"><span class="javascript">                <span class="keyword">const</span> value = nodes[i].outerHTML.replace(<span class="regexp">/tmp-src=/g</span>, <span class="string">&quot;lazy-src=&quot;</span>)</span></span><br><span class="line"><span class="javascript">                lazyNode.setAttribute(<span class="string">&#x27;value&#x27;</span>, value)</span></span><br><span class="line">                nodes[i].parentNode.replaceChild(lazyNode, nodes[i])</span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> div.innerHTML.replace(<span class="regexp">/tmp-src=/g</span>, <span class="string">&quot;src=&quot;</span>)</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">showDOM</span>(<span class="params">lazyNode</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (!lazyNode.parentNode) <span class="keyword">return</span> </span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (lazyNode.getAttribute(<span class="string">&#x27;isloading&#x27;</span>)) <span class="keyword">return</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> value = lazyNode.getAttribute(<span class="string">&#x27;value&#x27;</span>)</span></span><br><span class="line"><span class="javascript">            div.innerHTML = value.replace(<span class="regexp">/lazy-src=/ig</span>, <span class="string">&quot;src=&quot;</span>)</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> node = div.childNodes[<span class="number">0</span>] || div</span></span><br><span class="line"><span class="javascript">            lazyNode.setAttribute(<span class="string">&#x27;isloading&#x27;</span>, <span class="literal">true</span>)</span></span><br><span class="line"><span class="javascript">            lazyNode.innerText = <span class="string">&quot;加载中...&quot;</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line">                node.onload = resolve</span><br><span class="line"><span class="javascript">                <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="string">&#x27;loading timeout(5s), &#x27;</span>, node)</span></span><br><span class="line">                    resolve()</span><br><span class="line"><span class="javascript">                &#125;, <span class="number">5000</span>) <span class="comment">// 防止部分元素不触发onload</span></span></span><br><span class="line"><span class="javascript">            &#125;).then(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span></span><br><span class="line">                lazyNode.parentNode.replaceChild(node, lazyNode)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> displayRoom = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;displayRoom&#x27;</span>)</span></span><br><span class="line">        displayRoom.innerHTML = hideDOM(`</span><br><span class="line"><span class="javascript">                &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;container&quot;</span> style=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://blog.cdn.ionluo.cn/wallpaper/1583472341555.jpg&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://blog.cdn.ionluo.cn/wallpaper/1583472373980.jpg&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://blog.cdn.ionluo.cn/wallpaper/1583472406696.jpg&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://blog.cdn.ionluo.cn/wallpaper/1583472471863.jpg&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">        `)</span><br><span class="line">        </span><br><span class="line"><span class="javascript">        <span class="comment">// 滚动时候动态监听是否需要更新元素</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> lazyNodes = [].slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;lazynode&quot;</span>));</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="string">&quot;IntersectionObserver&quot;</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> lazyNodeObserver = <span class="keyword">new</span> IntersectionObserver(<span class="function"><span class="keyword">function</span> (<span class="params">entries, observer</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                entries.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">entry</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span> (entry.isIntersecting) &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">const</span> lazyNode = entry.target;</span></span><br><span class="line">                        showDOM(lazyNode);</span><br><span class="line">                        lazyNodeObserver.unobserve(lazyNode);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line"><span class="javascript">            lazyNodes.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">lazyNode</span>) </span>&#123;</span></span><br><span class="line">                lazyNodeObserver.observe(lazyNode);</span><br><span class="line">            &#125;);</span><br><span class="line"><span class="javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> maxScrollTop = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">lazyLoadNode</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> scrollTop = displayRoom.scrollTop;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> clientHeight = displayRoom.clientHeight;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> scrollContainerTop = displayRoom.querySelector(<span class="string">&#x27;.container&#x27;</span>).getBoundingClientRect().top</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (scrollTop &lt; maxScrollTop) <span class="keyword">return</span> <span class="comment">// 只向下滚动的时候替换一次</span></span></span><br><span class="line">                maxScrollTop = scrollTop;</span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lazyNodes.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span> (!checkVisible(lazyNodes[i])) <span class="keyword">continue</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                    <span class="keyword">const</span> lazyNodeTop = lazyNodes[i].getBoundingClientRect().top</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 如果滚动里面元素没有offsetParent直接用offsetTop也可以</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">const</span> offsetTop = lazyNodeTop - scrollContainerTop</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 预留1/2提前加载</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span> (offsetTop &lt; scrollTop + clientHeight * <span class="number">1.5</span> ) &#123;</span></span><br><span class="line">                        showDOM(lazyNodes[i]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="javascript">            <span class="comment">// 节流函数throttle可以参考本文节流防抖一节</span></span></span><br><span class="line">            displayRoom.onscroll = throttle(lazyLoadNode, 1000);</span><br><span class="line"><span class="javascript">            <span class="comment">// 先渲染第一屏的内容</span></span></span><br><span class="line">            lazyLoadNode()</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>上面还存在一个问题就是对于异步加载的元素，直接替换后在内容加载出来前该位置还是保持空白。因此如果场景更小一些，比如单纯只有图片的场景，可以通过类似的方式实现（如下）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hideDOM</span> (<span class="params">mailHTML</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    div.innerHTML = mailHTML</span><br><span class="line">    <span class="keyword">const</span> nodes = div.querySelectorAll(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = nodes.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        nodes[i].setAttribute(<span class="string">&#x27;data-src&#x27;</span>, nodes[i].getAttribute(<span class="string">&#x27;src&#x27;</span>))</span><br><span class="line">        nodes[i].setAttribute(<span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;https://blog.cdn.ionluo.cn/blog/loading.gif&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> div.innerHTML</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showDOM</span>(<span class="params">lazyNode</span>) </span>&#123;</span><br><span class="line">    lazyNode[i].setAttribute(<span class="string">&#x27;src&#x27;</span>, nodes[i].getAttribute(<span class="string">&#x27;data-src&#x27;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>另外图片的懒加载还有一个专门的属性，可惜兼容性不好。<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLImageElement/loading">https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLImageElement/loading</a></p>
</blockquote>
<h2 id="47-组合手势的一点思考"><a href="#47-组合手势的一点思考" class="headerlink" title="47_组合手势的一点思考"></a>47_组合手势的一点思考</h2><p>移动端开发中，有的时候希望像PC端一样可以通过组合键来切换不同功能，但是移动端键盘无法输入组合键，则可以考虑用组合手势来代替（题外话：另外一个考虑就是画一个简单的符号，但是符号涉及轨迹识别，准确性不好验证）</p>
<p>组合手势难点在于要控制手势的时间衔接，想到支付宝的鲤鱼跃龙门的小游戏，通过快速点击让小鲤鱼越冲越高，如果不点击则慢慢下降，设计实现了下面的代码（只实现了简单的点击+长按，如果要改成滑动就判断距离，和长按同理）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 进入页面 $&#123;limitTime&#125; 秒内，长按 $&#123;longpressTime&#125; 秒后快速点击 $&#123;clickTime&#125; 次，等待 $&#123;waitTime&#125; 秒开启调试模式</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">limitTime, longpressTime, clickTime, waitTime</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> progress = []</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> touchStartTime = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> touchEndTime = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.ionic.on(<span class="string">&#x27;touch&#x27;</span>, handleTouch, <span class="built_in">document</span>)</span><br><span class="line">  <span class="built_in">window</span>.ionic.on(<span class="string">&#x27;release&#x27;</span>, handleRelease, <span class="built_in">document</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.ionic.off(<span class="string">&#x27;touch&#x27;</span>, handleTouch, <span class="built_in">document</span>)</span><br><span class="line">    <span class="built_in">window</span>.ionic.off(<span class="string">&#x27;release&#x27;</span>, handleRelease, <span class="built_in">document</span>)</span><br><span class="line">  &#125;, limitTime * <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleTouch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    touchStartTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">    <span class="keyword">if</span> (!progress.length) &#123; <span class="comment">// 长按</span></span><br><span class="line">      <span class="comment">// pass</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (progress.length) &#123; <span class="comment">// 点击</span></span><br><span class="line">      consoleLogMain(<span class="string">`长按后点击<span class="subst">$&#123;progress.length&#125;</span>次`</span>)</span><br><span class="line">      timer &amp;&amp; <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">      <span class="keyword">if</span> (progress.length === clickTime) &#123; <span class="comment">// 完成点击，等待2s开启调试</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">          progress = []; timer = <span class="literal">null</span></span><br><span class="line">          startDebugger().then(<span class="function"><span class="params">_</span> =&gt;</span> consoleLogMain(<span class="string">&#x27;已打开调试模式&#x27;</span>))</span><br><span class="line">        &#125;, waitTime * <span class="number">1000</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123; progress = []; timer = <span class="literal">null</span> &#125;, <span class="number">500</span>) <span class="comment">// 点击之后500毫秒不操作就中断</span></span><br><span class="line">      &#125;</span><br><span class="line">      progress[progress.length] = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleRelease</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    touchEndTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">    <span class="keyword">if</span> (!progress.length) &#123; <span class="comment">// 长按</span></span><br><span class="line">      <span class="keyword">const</span> diffSecond = (touchEndTime - touchStartTime) / <span class="number">1000</span></span><br><span class="line">      <span class="keyword">if</span> (diffSecond &gt;= longpressTime &amp;&amp; diffSecond &lt;= clickTime - <span class="number">1</span>) &#123;</span><br><span class="line">        progress[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">        timer &amp;&amp; <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123; progress = []; timer = <span class="literal">null</span> &#125;, <span class="number">1000</span>) <span class="comment">// 长按之后1秒不操作就中断</span></span><br><span class="line">        consoleLogMain(<span class="string">&#x27;完成长按&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (progress.length) &#123; <span class="comment">// 点击</span></span><br><span class="line">      <span class="comment">// pass</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="number">60</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">list = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;ng-include &gt; ion-list &gt; div&#x27;</span>)</span><br><span class="line">item = list.querySelector(<span class="string">&#x27;ion-item&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment()</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)&#123;</span><br><span class="line">    fragment.appendChild(item.cloneNode(<span class="literal">true</span>))</span><br><span class="line">&#125;</span><br><span class="line">list.appendChild(fragment)</span><br></pre></td></tr></table></figure>



<h2 id="48-支持解析带注释的JSON"><a href="#48-支持解析带注释的JSON" class="headerlink" title="48_支持解析带注释的JSON"></a>48_支持解析带注释的JSON</h2><p>有的时候应用需要设置一些配置，通常可以使用JSON文件来描述，但是直接JSON.parse无法解析带注释的JSON，这时候可以通过自定义解析器来支持注释</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CJSON = &#123;&#125;</span><br><span class="line">CJSON.parse(txt) &#123;</span><br><span class="line">    txt = txt.replace(<span class="comment">//g, &#x27;&#x27;)</span></span><br><span class="line">        .replace(<span class="regexp">/\\u2028/g</span>, <span class="string">&#x27;\\\\u2028&#x27;</span>).replace(<span class="regexp">/\\u2029/g</span>, <span class="string">&#x27;\\\\u2029&#x27;</span>) <span class="comment">// 处理换行符</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(txt)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当然最直接的方式就是使用开源的库，如<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/comment-json">comment-json</a></p>
</blockquote>
<h2 id="49-函数拷贝"><a href="#49-函数拷贝" class="headerlink" title="49_函数拷贝"></a>49_<a target="_blank" rel="noopener" href="https://blog.csdn.net/Altaba/article/details/103916762">函数拷贝</a></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a * b * c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 方式1， 很多函数库都是用这个方法</span></span><br><span class="line"><span class="keyword">var</span> closeFunc = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">&#x27;return &#x27;</span> + func.toString())();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2 // 利用bind 返回函数</span></span><br><span class="line"><span class="keyword">var</span> closeFunc = func.prototype.bind(&#123;&#125;);</span><br></pre></td></tr></table></figure>


<h2 id="50-递归优化"><a href="#50-递归优化" class="headerlink" title="50_递归优化"></a>50_递归优化</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通递归</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fibonacci</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> fibonacci(n - <span class="number">1</span>) + fibonacci(n - <span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line">fibonacci(<span class="number">10</span>)</span><br><span class="line"><span class="comment">// 尾递归(严格模式下有效)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tailFibonacci</span> (<span class="params">n, ac1 = <span class="number">1</span>, ac2 = <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> ac2</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> tailFibonacci1(n - <span class="number">1</span>, ac2, ac1 + ac2)</span><br><span class="line">&#125;</span><br><span class="line">tailFibonacci(<span class="number">1000</span>)</span><br><span class="line"><span class="comment">// 尾递归优化实现（普通模式可用）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tco</span> (<span class="params">f</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> value</span><br><span class="line">  <span class="keyword">let</span> active = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">const</span> accumulated = []</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">accumulator</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    accumulated.push(<span class="built_in">arguments</span>)</span><br><span class="line">    <span class="keyword">if</span> (!active) &#123;</span><br><span class="line">      active = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">while</span> (accumulated.length) &#123;</span><br><span class="line">        value = f.apply(<span class="built_in">this</span>, accumulated.shift())</span><br><span class="line">      &#125;</span><br><span class="line">      active = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">return</span> value</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">tco(tailFibonacci)(<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>// 蹦床函数实现尾递归优化（了解即可）<br>function trampoline (f) {<br>  while (f &amp;&amp; f instanceof Function) {<br>    f = f()<br>  }<br>  return f<br>}<br>function tailFibonacci2 (n, ac1 = 1, ac2 = 1) {<br>  if (n &lt;= 1) return ac2</p>
<p>  return tailFibonacci2.bind(null, n - 1, ac2, ac1 + ac2)<br>}<br>trampoline(tailFibonacci2(1000))</p>
</blockquote>
<h2 id="51-求时间段交集"><a href="#51-求时间段交集" class="headerlink" title="51_求时间段交集"></a>51_求时间段交集</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 求时间段交集(time1, time2)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTimeIntersection</span>(<span class="params">[start1 = -<span class="literal">Infinity</span>, end1 = <span class="literal">Infinity</span>], [start2 = -<span class="literal">Infinity</span>, end2 = <span class="literal">Infinity</span>]</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (start1 &gt; end1) [start1, end1] = [end1, start1]</span><br><span class="line">    <span class="keyword">if</span> (start2 &gt; end2) [start2, end2] = [end2, start2]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 无交集(time2在time1的左右)</span></span><br><span class="line">    <span class="keyword">if</span> (end1 &lt; start2 || start1 &gt; end2) <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 完全相交(time2在time1内部或time1在time2内部)</span></span><br><span class="line">    <span class="keyword">if</span> (start1 &lt;= start2 &amp;&amp; end1 &gt;= end2) <span class="keyword">return</span> [start2, end2]</span><br><span class="line">    <span class="keyword">if</span> (start2 &lt;= start1 &amp;&amp; end2 &gt;= end1) <span class="keyword">return</span> [start1, end1]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 部分相交(time2仅开始或者结束点在time1内)</span></span><br><span class="line">    <span class="keyword">if</span> (start2 &lt;= end1 &amp;&amp; start2 &gt;= start1) <span class="keyword">return</span> [start2, end1]</span><br><span class="line">    <span class="keyword">if</span> (end2 &lt;= end1 &amp;&amp; end2 &gt;= start1) <span class="keyword">return</span> [start1, end2]</span><br><span class="line">&#125;</span><br><span class="line">getTimeIntersection([<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2023/05/04&#x27;</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2023/05/10&#x27;</span>)], [<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2023/05/08&#x27;</span>)])</span><br></pre></td></tr></table></figure>



<h2 id="53-等待回调执行"><a href="#53-等待回调执行" class="headerlink" title="53_等待回调执行"></a>53_等待回调执行</h2><p>对于一些sdk内嵌的时候，需要等待sdk接口注入完成执行方法封装</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NativeJs</span>(<span class="params">timeout</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> that = <span class="built_in">this</span></span><br><span class="line">  <span class="keyword">var</span> timer = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  that.isReady = <span class="literal">false</span></span><br><span class="line">  that.callbackstack = []</span><br><span class="line">  that.ready = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (that.isReady) <span class="keyword">return</span> callback()</span><br><span class="line"></span><br><span class="line">    that.callbackstack.push(callback)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">nativeJsReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    timer &amp;&amp; <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">    that.isReady = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; that.callbackstack.length; i++) &#123;</span><br><span class="line">        that.callbackstack[i]()</span><br><span class="line">    &#125;</span><br><span class="line">    that.callbackstack = []</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// sdk接口注入完成回调 onJsReady</span></span><br><span class="line">  <span class="built_in">window</span>.onJsReady = nativeJsReady</span><br><span class="line">  timeout &amp;&amp; (timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.warn(<span class="string">&#x27;onJsReady timeout!&#x27;</span>)</span><br><span class="line">  &#125;, timeout))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nativeJs = <span class="keyword">new</span> NativeJs()</span><br><span class="line">nativeJs.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="54-不定长度的promise依次执行"><a href="#54-不定长度的promise依次执行" class="headerlink" title="54_不定长度的promise依次执行"></a>54_不定长度的promise依次执行</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> loadScript (url) &#123;</span><br><span class="line">  <span class="built_in">return</span> new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    var script = document.createElement(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">    script.type = <span class="string">&#x27;text/javascript&#x27;</span></span><br><span class="line">    script.onload = <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">      resolve(`脚本[<span class="variable">$&#123;url&#125;</span>]引入成功！`)</span><br><span class="line">    &#125;</span><br><span class="line">    script.onerror = <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">      reject(`脚本[<span class="variable">$&#123;url&#125;</span>]引入失败！`)</span><br><span class="line">    &#125;</span><br><span class="line">    script.src = url</span><br><span class="line">    document.head.appendChild(script)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var extraScripts = []</span><br><span class="line">var defer = Promise.resolve()</span><br><span class="line">extraScripts.forEach(url =&gt; &#123;</span><br><span class="line">  defer = defer.then(loadScript.bind(null, url))</span><br><span class="line">&#125;)</span><br><span class="line">defer.then().catch().finally()</span><br></pre></td></tr></table></figure>



<h2 id="55-虚拟滚动"><a href="#55-虚拟滚动" class="headerlink" title="55_虚拟滚动"></a>55_虚拟滚动</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;demo-container&quot;&gt;</span><br><span class="line">      &lt;!-- 按最细的条目粒度滚动，每次滚动一个条目立刻渲染对应位置（用冗余节点来保证滚动的连续性） --&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;list list-1&quot; @scroll&#x3D;&quot;handleListScroll1&quot; ref&#x3D;&quot;itemList&quot;&gt;</span><br><span class="line">        &lt;div :style&#x3D;&quot;&#96;height:$&#123;containerHeight&#125;px;&#96;&quot;&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;item&quot; v-for&#x3D;&quot;(item,index) in renderList&quot; :key&#x3D;&quot;index&quot;</span><br><span class="line">                :style&#x3D;&quot;&#96;height:$&#123;itemHeight&#125;px;line-height:$&#123;itemHeight&#125;px;transform:translateY($&#123;top&#125;px)&#96;&quot;&gt;</span><br><span class="line">              &#123;&#123;item&#125;&#125;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;!-- 按分页思想滚动，一次渲染当前页面的前面2个页面（为了兼容性能较差的机器更新不及时问题，原理和上面类似，只是要区分开始和结束） --&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;list list-2&quot; @scroll&#x3D;&quot;handleListScroll2&quot; ref&#x3D;&quot;pageList&quot;&gt;</span><br><span class="line">          &lt;div :style&#x3D;&quot;&#96;height:$&#123;containerHeight&#125;px;&#96;&quot;&gt;</span><br><span class="line">              &lt;div class&#x3D;&quot;item&quot; v-for&#x3D;&quot;(item,index) in renderList2&quot; :key&#x3D;&quot;index&quot;</span><br><span class="line">                  :style&#x3D;&quot;&#96;height:$&#123;itemHeight2&#125;px;line-height:$&#123;itemHeight2&#125;px;transform:translateY($&#123;top2&#125;px)&#96;&quot;&gt;</span><br><span class="line">                &#123;&#123;item&#125;&#125;</span><br><span class="line">              &lt;&#x2F;div&gt;</span><br><span class="line">          &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;!-- 不定高的虚拟滚动（不设置容器高，滚动的过程中动态撑开即可） --&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;list list-3&quot; @scroll&#x3D;&quot;handleListScroll3&quot; ref&#x3D;&quot;unHeightList&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;item&quot; v-for&#x3D;&quot;(item,index) in renderList3&quot; :key&#x3D;&quot;index&quot;</span><br><span class="line">            :data-index&#x3D;&quot;item.index&quot; :style&#x3D;&quot;&#96;transform:translateY($&#123;top3&#125;px)&#96;&quot;&gt;</span><br><span class="line">          &lt;div v-html&#x3D;&quot;item.value&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import throttle from &#39;lodash&#x2F;throttle&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 条目滚动</span><br><span class="line">const itemListMixin &#x3D; &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      fullList: [], &#x2F;&#x2F; 完整列表</span><br><span class="line">      renderList: [], &#x2F;&#x2F; 需要渲染的列表</span><br><span class="line">      containerHeight: 0, &#x2F;&#x2F; 容器高度</span><br><span class="line">      itemHeight: 60, &#x2F;&#x2F; 每一项的高度</span><br><span class="line">      start: 0, &#x2F;&#x2F; 开始渲染的位置</span><br><span class="line">      limit: 0, &#x2F;&#x2F; 显示条目数量</span><br><span class="line">      top: 0 &#x2F;&#x2F; 向上偏移量</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    &#x2F;&#x2F; 初始化列表</span><br><span class="line">    this.fullList &#x3D; [...new Array(500)].map((_, index) &#x3D;&gt; index)</span><br><span class="line">    &#x2F;&#x2F; 容器高度</span><br><span class="line">    this.containerHeight &#x3D; this.fullList.length * this.itemHeight</span><br><span class="line">    &#x2F;&#x2F; 计算页面能容纳下几个节点并且设置四个节点作为冗余</span><br><span class="line">    this.limit &#x3D; Math.ceil(window.innerHeight &#x2F; this.itemHeight) + 4</span><br><span class="line">    &#x2F;&#x2F; 设置要渲染的列表 设置成能够容纳下的最大元素个数</span><br><span class="line">    this.renderList &#x3D; this.fullList.slice(0, this.limit)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleListScroll1: throttle(function () &#123;</span><br><span class="line">      &#x2F;&#x2F; scrollTop常量记录当前滚动的高度</span><br><span class="line">      const scrollTop &#x3D; this.$refs.itemList.scrollTop</span><br><span class="line">      &#x2F;&#x2F; 卷去了多少个</span><br><span class="line">      const start &#x3D; Math.floor(scrollTop &#x2F; this.itemHeight)</span><br><span class="line">      &#x2F;&#x2F; 对比上一次的开始节点 比较是否发生变化，发生变化后便重新渲染列表</span><br><span class="line">      if (this.start !&#x3D;&#x3D; start) &#123;</span><br><span class="line">        &#x2F;&#x2F; 使用slice拿到需要渲染的那一部分</span><br><span class="line">        this.renderList &#x3D; this.fullList.slice(start, start + this.limit)</span><br><span class="line">        &#x2F;&#x2F; 事实上这里最好是 this.renderList &#x3D; this.fullList.slice(Math.max(start -2, 0), start - 2 + this.limit)</span><br><span class="line">        &#x2F;&#x2F; 即保证上下都有冗余节点</span><br><span class="line">        &#x2F;&#x2F; 这里的top用于设置translateY</span><br><span class="line">        this.top &#x3D; start * this.itemHeight</span><br><span class="line">        this.start &#x3D; start</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, 50)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 分页滚动（分页思维较好理解，不用纠结选取多少冗余节点好）</span><br><span class="line">const pageListMixin &#x3D; &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      fullList2: [], &#x2F;&#x2F; 完整列表</span><br><span class="line">      renderList2: [], &#x2F;&#x2F; 需要渲染的列表</span><br><span class="line">      containerHeight2: 0, &#x2F;&#x2F; 容器高度</span><br><span class="line">      itemHeight2: 60, &#x2F;&#x2F; 每一项的高度</span><br><span class="line">      start2: 0, &#x2F;&#x2F; 开始渲染的**页数**</span><br><span class="line">      limit2: 0, &#x2F;&#x2F; **每页**显示条目数量</span><br><span class="line">      top2: 0 &#x2F;&#x2F; 向上偏移量</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    &#x2F;&#x2F; 初始化列表</span><br><span class="line">    this.fullList2 &#x3D; [...new Array(500)].map((_, index) &#x3D;&gt; index)</span><br><span class="line">    &#x2F;&#x2F; 容器高度</span><br><span class="line">    this.containerHeight2 &#x3D; this.fullList2.length * this.itemHeight2</span><br><span class="line">    &#x2F;&#x2F; 计算一个页面能容纳下几个节点</span><br><span class="line">    this.limit2 &#x3D; Math.ceil(window.innerHeight &#x2F; this.itemHeight2)</span><br><span class="line">    &#x2F;&#x2F; 设置要渲染的列表（开头和结尾分别没有上一页和下一页）</span><br><span class="line">    this.renderList2 &#x3D; this.fullList.slice(0, 2 * this.limit2)</span><br><span class="line">    &#x2F;&#x2F; console.log(&#39;this.limit2&#39;, this.limit2)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleListScroll2: throttle(function () &#123;</span><br><span class="line">      &#x2F;&#x2F; scrollTop常量记录当前滚动的高度</span><br><span class="line">      const scrollTop &#x3D; this.$refs.pageList.scrollTop</span><br><span class="line">      &#x2F;&#x2F; 当前在第几页</span><br><span class="line">      const start &#x3D; Math.floor(scrollTop &#x2F; (this.itemHeight2 * this.limit2))</span><br><span class="line">      &#x2F;&#x2F; 对比上一次的开始页面 比较是否发生变化，发生变化后便重新渲染列表</span><br><span class="line">      if (this.start2 !&#x3D;&#x3D; start) &#123;</span><br><span class="line">        &#x2F;&#x2F; 使用slice拿到需要渲染的那一部分(slice函数的特殊性只需限制begin不小于0即可)</span><br><span class="line">        const begin &#x3D; Math.max(start * this.limit2, 0)</span><br><span class="line">        this.renderList2 &#x3D; this.fullList.slice(begin, (start + 2) * this.limit2)</span><br><span class="line">        &#x2F;&#x2F; 这里的top用于设置translateY</span><br><span class="line">        this.top2 &#x3D; begin * this.itemHeight2</span><br><span class="line">        this.start2 &#x3D; start</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, 50)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 不定高滚动 (根据内容撑开情况：以预估高度先行渲染，然后获取真实高度并缓存index)</span><br><span class="line">&#x2F;&#x2F; 不能设置高度，因为没有加载过的节点无法知道高度，如果跳转范围大就不能获取到对应位置的节点了（移动端可以忽略这个问题，因为移动端无法一下子跳到底）</span><br><span class="line">const unHeightListMixin &#x3D; &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      fullList3: [], &#x2F;&#x2F; 完整列表</span><br><span class="line">      renderList3: [], &#x2F;&#x2F; 需要渲染的列表</span><br><span class="line">      estimatedItemSize3: 60, &#x2F;&#x2F; 每一项的*预估*高度</span><br><span class="line">      start3: 0, &#x2F;&#x2F; 开始渲染的位置</span><br><span class="line">      limit3: 0, &#x2F;&#x2F; 显示条目数量</span><br><span class="line">      top3: 0, &#x2F;&#x2F; 向上偏移量</span><br><span class="line">      curMaxIndex3: 0 &#x2F;&#x2F; 当前渲染到的下标（作为二分查找的end）</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  updated () &#123;</span><br><span class="line">    const nodes &#x3D; this.$refs.unHeightList.querySelectorAll(&#39;.item&#39;)</span><br><span class="line">    nodes.forEach(node &#x3D;&gt; &#123;</span><br><span class="line">      const domIndex &#x3D; parseInt(node.getAttribute(&#39;data-index&#39;) || -1) &#x2F;&#x2F; 兼容IOS, 获取节点在fullList中的下标</span><br><span class="line">      if (!this.fullList3[domIndex] || this.fullList3[domIndex].height) return &#x2F;&#x2F; 已经设置过的就不设置了</span><br><span class="line"></span><br><span class="line">      this.fullList3[domIndex].height &#x3D; node.offsetHeight</span><br><span class="line">      this.fullList3[domIndex].top &#x3D; domIndex &#x3D;&#x3D;&#x3D; 0 ? 0 : this.fullList3[domIndex - 1].top + this.fullList3[domIndex - 1].height</span><br><span class="line">      this.curMaxIndex3 &#x3D; Math.max(this.curMaxIndex3, domIndex)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    &#x2F;&#x2F; 初始化列表</span><br><span class="line">    this.fullList3 &#x3D; [...new Array(500)].map((_, index) &#x3D;&gt; &#123;</span><br><span class="line">      const brNum &#x3D; this.getRandomNumber(0, 10)</span><br><span class="line">      return &#123; index: index, value: index + &#39;&lt;br&#x2F;&gt;&#39;.repeat(brNum) &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    &#x2F;&#x2F; 计算页面能容纳下几个节点并且设置四个节点作为冗余</span><br><span class="line">    this.limit3 &#x3D; Math.ceil(window.innerHeight &#x2F; this.estimatedItemSize3) + 4</span><br><span class="line">    &#x2F;&#x2F; 设置要渲染的列表 设置成能够容纳下的最大元素个数</span><br><span class="line">    this.renderList3 &#x3D; this.fullList3.slice(0, this.limit3)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    &#x2F;&#x2F; 获取一个在[min, max]的整数</span><br><span class="line">    getRandomNumber (min, max) &#123;</span><br><span class="line">      &#x2F;&#x2F; [0, 1) -&gt; [0, max-min+1) -&gt; [min, max+1) -&gt; [min, max]</span><br><span class="line">      return Math.floor(Math.random() * (max - min + 1) + min)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 二分法查找最接近scrollTop的位置（需要小于或者等于scrollTop）</span><br><span class="line">    binarySearchStart (value) &#123;</span><br><span class="line">      let [start, end] &#x3D; [0, this.curMaxIndex3]</span><br><span class="line">      let tmpIndex &#x3D; -1</span><br><span class="line">      while (start &lt;&#x3D; end) &#123;</span><br><span class="line">        const mid &#x3D; Math.floor((start + end) &#x2F; 2)</span><br><span class="line">        const top &#x3D; this.fullList3[mid].top</span><br><span class="line">        if (top &#x3D;&#x3D;&#x3D; value) &#123;</span><br><span class="line">          return mid</span><br><span class="line">        &#125; else if (top &lt; value) &#123;</span><br><span class="line">          start &#x3D; mid + 1</span><br><span class="line">          tmpIndex &#x3D; mid</span><br><span class="line">        &#125; else if (top &gt; value) &#123;</span><br><span class="line">          end &#x3D; mid - 1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return tmpIndex</span><br><span class="line">    &#125;,</span><br><span class="line">    handleListScroll3: throttle(function () &#123;</span><br><span class="line">      &#x2F;&#x2F; scrollTop常量记录当前滚动的高度</span><br><span class="line">      const scrollTop &#x3D; this.$refs.unHeightList.scrollTop</span><br><span class="line">      &#x2F;&#x2F; 卷去了多少个</span><br><span class="line">      const start &#x3D; this.binarySearchStart(scrollTop)</span><br><span class="line">      &#x2F;&#x2F; 对比上一次的开始节点 比较是否发生变化，发生变化后便重新渲染列表</span><br><span class="line">      if (start &gt; -1 &amp;&amp; this.start3 !&#x3D;&#x3D; start) &#123;</span><br><span class="line">        &#x2F;&#x2F; 使用slice拿到需要渲染的那一部分</span><br><span class="line">        this.renderList3 &#x3D; this.fullList3.slice(start, start + this.limit3)</span><br><span class="line">        &#x2F;&#x2F; 这里的top用于设置translateY</span><br><span class="line">        this.top3 &#x3D; this.fullList3[start].top</span><br><span class="line">        this.start3 &#x3D; start</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, 50)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 图片等需要异步加载情况在不定高虚拟列表较难实现，如果存在这种情况建议固定图片的高度然后用object-fit去自适应</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;virtualscroll&#39;,</span><br><span class="line">  mixins: [itemListMixin, pageListMixin, unHeightListMixin]</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang&#x3D;&quot;scss&quot;&gt;</span><br><span class="line">.demo-container &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-around;</span><br><span class="line">  align-items: flex-start;</span><br><span class="line">  margin-top: 10vh;</span><br><span class="line">&#125;</span><br><span class="line">.list&#123;</span><br><span class="line">  width: 200px;</span><br><span class="line">  height: 600px;</span><br><span class="line">  overflow: scroll;</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">&#125;</span><br><span class="line">.item&#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">  width: 100%;</span><br><span class="line">  border-bottom: 1px solid lightgray;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="56-PT2PX"><a href="#56-PT2PX" class="headerlink" title="56_PT2PX"></a>56_<a target="_blank" rel="noopener" href="https://pixelsconverter.com/pt-to-px">PT2PX</a></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">px = 72pt / <span class="number">96</span> = <span class="number">0.75</span> * pt</span><br><span class="line">pt = px * <span class="number">4</span> / <span class="number">3</span></span><br></pre></td></tr></table></figure>



<h2 id="57-公交卡规则更改后花费"><a href="#57-公交卡规则更改后花费" class="headerlink" title="57_公交卡规则更改后花费"></a>57_公交卡规则更改后花费</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MONTH_DAY = <span class="number">22</span> <span class="comment">// 一个月的天数</span></span><br><span class="line"><span class="keyword">const</span> DAY_SPEND = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">2</span>] <span class="comment">// 一天乘车次数以及每次的花费</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">oldRule</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 刷够15次6折</span></span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; DAY_SPEND.length * MONTH_DAY; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">15</span>) &#123;</span><br><span class="line">      sum += DAY_SPEND[i % DAY_SPEND.length]</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      sum += DAY_SPEND[i % DAY_SPEND.length] * <span class="number">0.6</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newRule</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 大于80 6折， 大于200 5折</span></span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; DAY_SPEND.length * MONTH_DAY; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (sum &gt; <span class="number">200</span>) &#123;</span><br><span class="line">      sum += DAY_SPEND[i % DAY_SPEND.length] * <span class="number">0.5</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sum &gt; <span class="number">80</span>) &#123;</span><br><span class="line">      sum += DAY_SPEND[i % DAY_SPEND.length] * <span class="number">0.8</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      sum += DAY_SPEND[i % DAY_SPEND.length]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(newRule() - oldRule())</span><br></pre></td></tr></table></figure>



<h2 id="58-原型链继承"><a href="#58-原型链继承" class="headerlink" title="58_原型链继承"></a>58_原型链继承</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_extend</span>(<span class="params">child, parent, proto</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!proto) &#123;</span><br><span class="line">		proto = parent;</span><br><span class="line">		parent = <span class="literal">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> childProto;</span><br><span class="line">	<span class="keyword">if</span> (parent) &#123;</span><br><span class="line">		<span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">		fn.prototype = parent.prototype;</span><br><span class="line">		childProto = <span class="keyword">new</span> fn();</span><br><span class="line">		_each(proto, <span class="function"><span class="keyword">function</span>(<span class="params">key, val</span>) </span>&#123;</span><br><span class="line">			childProto[key] = val;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		childProto = proto;</span><br><span class="line">	&#125;</span><br><span class="line">	childProto.constructor = child;</span><br><span class="line">	child.prototype = childProto;</span><br><span class="line">	child.parent = parent ? parent.prototype : <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">KWidget</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">this</span>.init(options);</span><br><span class="line">&#125;</span><br><span class="line">_extend(KWidget, &#123;</span><br><span class="line">	init : <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">		self.name = options.name || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">KToolbar</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">this</span>.init(options);</span><br><span class="line">&#125;</span><br><span class="line">_extend(KToolbar, KWidget, &#123;</span><br><span class="line">	init : <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">		KToolbar.parent.init.call(self, options);</span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="59-克隆DOM时也复制事件"><a href="#59-克隆DOM时也复制事件" class="headerlink" title="59_克隆DOM时也复制事件"></a>59_克隆DOM时也复制事件</h2><p>参考：<a target="_blank" rel="noopener" href="https://github.com/shulandmimi/blog/issues/5">https://github.com/shulandmimi/blog/issues/5</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> EventList = <span class="string">`oncopy oncut onpaste onabort onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange ondblclick ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended onerror onfocus onformdata oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart onmousedown onmouseenter onmouseleave onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange onreset onresize onscroll onseeked onseeking onselect onstalled onsubmit onsuspend ontimeupdate ontoggle onvolumechange onwaiting onwheel onauxclick ongotpointercapture onlostpointercapture onpointerdown onpointermove onpointerup onpointercancel onpointerover onpointerout onpointerenter onpointerleave onselectstart onselectionchange onanimationend onanimationiteration onanimationstart ontransitionend onpointerrawupdate onbeforecopy onbeforecut onbeforepaste onsearch onfullscreenchange onfullscreenerror onwebkitfullscreenchange onwebkitfullscreenerror`</span>.split(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line">    <span class="keyword">const</span> addEventListener = EventTarget.prototype.addEventListener;</span><br><span class="line"></span><br><span class="line">    EventTarget.prototype.addEventListener = <span class="function"><span class="keyword">function</span>(<span class="params">type, handler, options</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> target = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">const</span> event = cache.get(target) || cache.set(target, &#123;&#125;).get(target);</span><br><span class="line">        <span class="keyword">const</span> data = &#123;</span><br><span class="line">            type,</span><br><span class="line">            handler,</span><br><span class="line">            options</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> event === <span class="string">&#x27;object&#x27;</span> &amp;&amp; event !== <span class="literal">null</span> &amp;&amp; !<span class="built_in">Array</span>.isArray(event)) &#123;</span><br><span class="line">            <span class="keyword">const</span> targetEvent = event[type] || (event[type] = []);</span><br><span class="line">            targetEvent.push(data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> addEventListener.call(target, type, handler, options);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> removeEventListener = EventTarget.prototype.removeEventListener;</span><br><span class="line">    EventTarget.prototype.removeEventListener = <span class="function"><span class="keyword">function</span>(<span class="params">type, handler, options</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> target = <span class="built_in">this</span>;</span><br><span class="line">        cache.delete(target);</span><br><span class="line">        <span class="keyword">return</span> removeEventListener.call(target, type, handler, options);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> cloneNode = Node.prototype.cloneNode;</span><br><span class="line">    Node.prototype.cloneNode = <span class="function"><span class="keyword">function</span>(<span class="params">copyDeepAndEvent</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> node = cloneNode.call(<span class="built_in">this</span>, copyDeepAndEvent);</span><br><span class="line">        <span class="keyword">if</span>(copyDeepAndEvent) &#123;</span><br><span class="line">            <span class="keyword">const</span> event = cache.get(<span class="built_in">this</span>) || &#123;&#125;;</span><br><span class="line">            <span class="comment">// addEventListener 绑定的</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> prop <span class="keyword">in</span> event) &#123;</span><br><span class="line">            <span class="keyword">const</span> targetEvent = event[prop];</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray(targetEvent)) &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; targetEvent.length; i ++) &#123;</span><br><span class="line">                        node.addEventListener(targetEvent[i].type, targetEvent[i].handler, targetEvent[i].options);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 句柄</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; EventList.length; i ++ )&#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="built_in">this</span>[EventList[i]] === <span class="string">&#x27;function&#x27;</span>) node[EventList[i]] = <span class="built_in">this</span>[EventList[i]];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> div1 = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> handler = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">&#x27;event&#x27;</span>, <span class="built_in">this</span>); &#125;</span><br><span class="line">div1.onclick = <span class="function">() =&gt;</span> &#123; <span class="built_in">console</span>.log(<span class="string">&#x27;123&#x27;</span>); &#125;;</span><br><span class="line">div1.style.cssText = <span class="string">`</span></span><br><span class="line"><span class="string">    width: 100px;</span></span><br><span class="line"><span class="string">    height: 100px;</span></span><br><span class="line"><span class="string">    background: red;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(div1);</span><br><span class="line"><span class="keyword">const</span> div2 = div1.cloneNode(<span class="literal">true</span>);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(div2);</span><br></pre></td></tr></table></figure>

<p>自实现绑定方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cache</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="function"><span class="title">add</span>(<span class="params">k, v</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> arr = map.get(k);</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">Array</span>.isArray(arr) ? arr.push(v) : arr = [v];</span><br><span class="line">            <span class="keyword">return</span> map.set(k, arr);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">del</span>(<span class="params">k</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> map.delete(k);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">get</span>(<span class="params">k</span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> map.get(k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> EventCache = cache();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">DeepAndEventClone</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> newEl = <span class="built_in">this</span>.el;</span><br><span class="line">    <span class="keyword">if</span>(DeepAndEventClone) &#123;</span><br><span class="line">        <span class="keyword">const</span> allEvent = EventCache.get(<span class="built_in">this</span>.el);</span><br><span class="line">        <span class="keyword">if</span>(allEvent &amp;&amp; <span class="built_in">Array</span>.isArray(allEvent)) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; allEvent.length; i ++&gt;) &#123;</span><br><span class="line">                <span class="keyword">const</span> event = allEvent[i];</span><br><span class="line">                on(newEl, event.type, event.handler, event.options);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定事件，绑定事件时，根据DOM缓存元素</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">on</span>(<span class="params">target, type, handler, options</span>) </span>&#123;</span><br><span class="line">    target.addEventListener(type, handler, options);</span><br><span class="line">    EventCache.add(target, &#123;</span><br><span class="line">        type,</span><br><span class="line">        handler,</span><br><span class="line">        options</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="60-html2text-and-text2html"><a href="#60-html2text-and-text2html" class="headerlink" title="60_ html2text and text2html"></a>60_ html2text and text2html</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encode</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (str + <span class="string">&#x27;&#x27;</span>).replace(<span class="regexp">/&amp;/g</span>, <span class="string">&#x27;&amp;amp;&#x27;</span>).replace(<span class="regexp">/&gt;/g</span>, <span class="string">&#x27;&amp;gt;&#x27;</span>)</span><br><span class="line">        .replace(<span class="regexp">/&lt;/g</span>, <span class="string">&#x27;&amp;lt;&#x27;</span>).replace(<span class="regexp">/&quot;/g</span>, <span class="string">&#x27;&amp;quot;&#x27;</span>).replace(<span class="regexp">/&#x27;/g</span>, <span class="string">&#x27;&amp;#39;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">text2html</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!str) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    str = encode(str);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将\n替换为&lt;br&gt;</span></span><br><span class="line">    str = str.replace(<span class="regexp">/\n/gi</span>, <span class="string">&#x27;&lt;br&gt;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将空格替换为&amp;nbsp;</span></span><br><span class="line">    str = str.replace(<span class="regexp">/ /gi</span>, <span class="string">&#x27;&amp;nbsp;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 去掉两边的空白</span></span><br><span class="line">    <span class="keyword">return</span> str.trim();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">html2text</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// https://www.npmjs.com/package/html-to-text</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="nodejs复制文件夹"><a href="#nodejs复制文件夹" class="headerlink" title="nodejs复制文件夹"></a>nodejs复制文件夹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">copyDir</span>(<span class="params">src, dest</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(src, dest)</span><br><span class="line">  <span class="keyword">await</span> fs.promises.mkdir(dest, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">  <span class="keyword">const</span> entries = <span class="keyword">await</span> fs.promises.readdir(src, &#123; <span class="attr">withFileTypes</span>: <span class="literal">true</span> &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> entry <span class="keyword">of</span> entries) &#123;</span><br><span class="line">    <span class="keyword">const</span> srcPath = path.join(src, entry.name)</span><br><span class="line">    <span class="keyword">const</span> destPath = path.join(dest, entry.name)</span><br><span class="line"></span><br><span class="line">    entry.isDirectory()</span><br><span class="line">      ? <span class="keyword">await</span> copyDir(srcPath, destPath)</span><br><span class="line">      : <span class="keyword">await</span> fs.promises.copyFile(srcPath, destPath)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="nodejs下载文件"><a href="#nodejs下载文件" class="headerlink" title="nodejs下载文件"></a>nodejs下载文件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> download = <span class="built_in">require</span>(<span class="string">&#x27;download&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolve</span>(<span class="params">dir</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> path.join(__dirname, <span class="string">&#x27;..&#x27;</span>, dir)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> url = <span class="string">`http://rd.mailtech.cn/qa/filer/cim/01Lunkr/06Hxphone/custom/<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(<span class="string">&#x27;光大银行&#x27;</span>)&#125;</span>/app/app.zip`</span></span><br><span class="line"><span class="keyword">const</span> destination = resolve(<span class="string">&#x27;dist/app&#x27;</span>)</span><br><span class="line">download(url, destination, &#123;</span><br><span class="line">  extract: <span class="literal">true</span>,</span><br><span class="line">  filter: <span class="function"><span class="params">file</span> =&gt;</span> path.extname(file.path) !== <span class="string">&#x27;.map&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>





<h2 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h2><ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/lgeKcq2Q5Biot6VhXn20rQ">一文帮你搞定90%的JS手写题，真香！</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/f_eR5cqf1QiKzFlz424E5Q">这些Web API真的有用吗？别问，问就是有用</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/riddle1981/article/details/82871545">基于Vue-cli的多目录项目配置</a></li>
</ul>

      
      <!-- 首页不展示文章所有内容结束 -->

      <!-- 增加版权声明 -->
      
      
        <div class="declare">
          <strong>本文作者：</strong>
          
            ionluo
          
          <br>
          <strong>本文链接：</strong>
          <a rel="license" href="http://www.ionluo.cn/blog/posts/229e087d.html">http://www.ionluo.cn/blog/posts/229e087d.html</a>
          <br>
          <strong>版权声明：</strong>
          本作品采用
          <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
          进行许可。转载请注明出处！
          
            <br>
            <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="display: none;"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"/></a>
          
        </div>
      
      <!-- 增加版权声明结束 -->

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">前端</a>
        		</li>
      		
		</ul>
	</div>

      

      

      
        
<div class="share-btn share-icons tooltip-left">
  <div class="tooltip tooltip-east">
    <span class="tooltip-item">
      <a href="javascript:;" class="share-sns share-outer">
        <i class="icon icon-share"></i>
      </a>
    </span>
    <span class="tooltip-content">
      <div class="share-wrap">
        <div class="share-icons">
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="icon icon-weibo"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="icon icon-weixin"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="icon icon-qq"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="icon icon-douban"></i>
          </a>
          <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a>
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="icon icon-facebook"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="icon icon-twitter"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="icon icon-google"></i>
          </a>
        </div>
      </div>
    </span>
  </div>
</div>

<div class="page-modal wx-share js-wx-box">
    <a class="close js-modal-close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//pan.baidu.com/share/qrcode?url=http://www.ionluo.cn/blog/posts/229e087d.html" alt="微信分享二维码">
    </div>
</div>

<div class="mask js-mask"></div>
      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/blog/posts/229e087e.html" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          【前端】CSS小技巧
        
      </div>
    </a>
  
  
    <a href="/blog/posts/78bd14cd.html" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">【前端】canvas使用</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>


<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>



  
  
  

  

  

  

  <!-- BEGIN GITTALK -->
  
    <div id="gitalk-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>

<script>
  var gitalk = new Gitalk({
    clientID: '7433477a1a82130981e9',
    clientSecret: '67888aa85d7153c2e8996911fa3fdd9890c61c46',
    repo: 'blog-talk',
    owner: 'Cheerfulion',
    admin: ['Cheerfulion'],
    id: md5(window.location.pathname),
    distractionFreeMode: 'true'
  })

  gitalk.render('gitalk-container')

</script>

  
  <!-- END GITTALK -->


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2023 ionluo
    	</div>
      	<div class="footer-right">
			<!-- <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
			<span id="busuanzi_container_site_pv">
				本站总访问量：<span id="busuanzi_value_site_pv"></span>次
			</span>
			<span class="post-meta-divider">|</span>
			<span id="busuanzi_container_site_uv">
				本站访客数：<span id="busuanzi_value_site_uv"></span>人
			</span> -->
      		<!-- <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten -->
      	</div>
    </div>
  </div>
</footer>


<!-- START 页面点击小红心-->
<script type="text/javascript">
!function(e,t,a){function r(){for(var e=0;e<s.length;e++)s[e].alpha<=0?(t.body.removeChild(s[e].el),s.splice(e,1)):(s[e].y--,s[e].scale+=.004,s[e].alpha-=.013,s[e].el.style.cssText="left:"+s[e].x+"px;top:"+s[e].y+"px;opacity:"+s[e].alpha+";transform:scale("+s[e].scale+","+s[e].scale+") rotate(45deg);background:"+s[e].color+";z-index:99999");requestAnimationFrame(r)}function n(){var t="function"==typeof e.onclick&&e.onclick;e.onclick=function(e){t&&t(),o(e)}}function o(e){var a=t.createElement("div");a.className="heart",s.push({el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:c()}),t.body.appendChild(a)}function i(e){var a=t.createElement("style");a.type="text/css";try{a.appendChild(t.createTextNode(e))}catch(t){a.styleSheet.cssText=e}t.getElementsByTagName("head")[0].appendChild(a)}function c(){return"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"}var s=[];e.requestAnimationFrame=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},i(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"),n(),r()}(window,document);</script>
<!-- START 页面点击小红心-->
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		toc_hide_index: true,
		root: "/blog/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(r){function e(t){if(i[t])return i[t].exports;var n=i[t]={exports:{},id:t,loaded:!1};return r[t].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};e.m=r,e.c=i,e.p="./",e(0)}([function(t,n,r){r(209),t.exports=r(205)},function(t,n,r){var d=r(3),y=r(46),g=r(27),b=r(28),x=r(47),m="prototype",S=function(t,n,r){var e,i,o,u,c=t&S.F,f=t&S.G,a=t&S.S,s=t&S.P,l=t&S.B,h=f?d:a?d[n]||(d[n]={}):(d[n]||{})[m],v=f?y:y[n]||(y[n]={}),p=v[m]||(v[m]={});for(e in f&&(r=n),r)o=((i=!c&&h&&void 0!==h[e])?h:r)[e],u=l&&i?x(o,d):s&&"function"==typeof o?x(Function.call,o):o,h&&b(h,e,o,t&S.U),v[e]!=o&&g(v,e,u),s&&p[e]!=o&&(p[e]=o)};d.core=y,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,n,r){var e=r(5);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n,r){var e=r(118)("wks"),i=r(79),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(40)("wks"),i=r(25),o=r(6).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(49),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(20),i=r(60),o=r(42),u=Object.defineProperty;n.f=r(14)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(2),i=r(174),o=r(55),u=Object.defineProperty;n.f=r(11)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(21)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(12),i=r(22);t.exports=r(14)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(98),i=r(35);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(53);t.exports=function(t){return Object(e(t))}},function(t,n){var r=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(19);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=!0},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){t.exports={}},function(t,n,r){var e=r(13),i=r(75);t.exports=r(11)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var o=r(3),u=r(27),c=r(31),f=r(79)("src"),e=r(230),i="toString",a=(""+e).split(i);r(46).inspectSource=function(t){return e.call(t)},(t.exports=function(t,n,r,e){var i="function"==typeof r;i&&(c(r,"name")||u(r,"name",n)),t[n]!==r&&(i&&(c(r,f)||u(r,f,t[n]?""+t[n]:a.join(String(n)))),t===o?t[n]=r:e?t[n]?t[n]=r:u(t,n,r):(delete t[n],u(t,n,r)))})(Function.prototype,i,function(){return"function"==typeof this&&this[f]||e.call(this)})},function(t,n,r){var e=r(1),i=r(4),u=r(53),c=/"/g,o=function(t,n,r,e){var i=String(u(t)),o="<"+n;return""!==r&&(o+=" "+r+'="'+String(e).replace(c,"&quot;")+'"'),o+">"+i+"</"+n+">"};t.exports=function(n,t){var r={};r[n]=t(o),e(e.P+e.F*i(function(){var t=""[n]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",r)}},function(t,n,r){var e=r(65),i=r(36);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(117),i=r(75),o=r(34),u=r(55),c=r(31),f=r(174),a=Object.getOwnPropertyDescriptor;n.f=r(11)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(31),i=r(17),o=r(154)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(116),i=r(53);t.exports=function(t){return e(i(t))}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(12).f,i=r(10),o=r(8)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(25);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(18),i=r(6),o="__core-js_shared__",u=i[o]||(i[o]={});(t.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(24)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var i=r(19);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(6),i=r(18),o=r(24),u=r(44),c=r(12).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(8)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){var r=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=r)},function(t,n,r){var o=r(23);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){"use strict";var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var d=r(6),y=r(18),g=r(81),b=r(15),x=r(10),m="prototype",S=function(t,n,r){var e,i,o,u=t&S.F,c=t&S.G,f=t&S.S,a=t&S.P,s=t&S.B,l=t&S.W,h=c?y:y[n]||(y[n]={}),v=h[m],p=c?d:f?d[n]:(d[n]||{})[m];for(e in c&&(r=n),r)(i=!u&&p&&void 0!==p[e])&&x(h,e)||(o=i?p[e]:r[e],h[e]=c&&"function"!=typeof p[e]?r[e]:s&&i?g(o,d):l&&p[e]==o?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[m]=e[m],t}(o):a&&"function"==typeof o?g(Function.call,o):o,a&&((h.virtual||(h.virtual={}))[e]=o,t&S.R&&v&&!v[e]&&b(v,e,o)))};S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,n,r){var e=r(35);t.exports=function(t){return Object(e(t))}},function(t,n,r){var x=r(47),m=r(116),S=r(17),w=r(9),e=r(138);t.exports=function(l,t){var h=1==l,v=2==l,p=3==l,d=4==l,y=6==l,g=5==l||y,b=t||e;return function(t,n,r){for(var e,i,o=S(t),u=m(o),c=x(n,r,3),f=w(u.length),a=0,s=h?b(t,f):v?b(t,0):void 0;a<f;a++)if((g||a in u)&&(i=c(e=u[a],a,o),l))if(h)s[a]=i;else if(i)switch(l){case 3:return!0;case 5:return e;case 6:return a;case 2:s.push(e)}else if(d)return!1;return y?-1:p||d?d:s}}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var i=r(1),o=r(46),u=r(4);t.exports=function(t,n){var r=(o.Object||{})[t]||Object[t],e={};e[t]=n(r),i(i.S+i.F*u(function(){r(1)}),"Object",e)}},function(t,n,r){var i=r(5);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var o=r(196),e=r(1),i=r(118)("metadata"),u=i.store||(i.store=new(r(200))),c=function(t,n,r){var e=u.get(t);if(!e){if(!r)return;u.set(t,e=new o)}var i=e.get(n);if(!i){if(!r)return;e.set(n,i=new o)}return i};t.exports={store:u,map:c,has:function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},get:function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},set:function(t,n,r,e){c(r,e,!0).set(t,n)},keys:function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){e(e.S,"Reflect",t)}}},function(t,n,r){"use strict";if(r(11)){var g=r(68),b=r(3),x=r(4),m=r(1),S=r(132),e=r(159),h=r(47),w=r(70),i=r(75),_=r(27),o=r(76),u=r(49),O=r(9),E=r(194),c=r(78),f=r(55),a=r(31),M=r(84),P=r(5),v=r(17),p=r(145),j=r(72),F=r(33),A=r(73).f,d=r(161),s=r(79),l=r(7),y=r(52),I=r(120),L=r(119),N=r(162),T=r(85),k=r(125),R=r(77),C=r(137),D=r(166),G=r(13),W=r(32),U=G.f,V=W.f,B=b.RangeError,q=b.TypeError,z=b.Uint8Array,H="ArrayBuffer",K="Shared"+H,J="BYTES_PER_ELEMENT",$="prototype",Y=Array[$],X=e.ArrayBuffer,Q=e.DataView,Z=y(0),tt=y(2),nt=y(3),rt=y(4),et=y(5),it=y(6),ot=I(!0),ut=I(!1),ct=N.values,ft=N.keys,at=N.entries,st=Y.lastIndexOf,lt=Y.reduce,ht=Y.reduceRight,vt=Y.join,pt=Y.sort,dt=Y.slice,yt=Y.toString,gt=Y.toLocaleString,bt=l("iterator"),xt=l("toStringTag"),mt=s("typed_constructor"),St=s("def_constructor"),wt=S.CONSTR,_t=S.TYPED,Ot=S.VIEW,Et="Wrong length!",Mt=y(1,function(t,n){return It(L(t,t[St]),n)}),Pt=x(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),jt=!!z&&!!z[$].set&&x(function(){new z(1).set({})}),Ft=function(t,n){var r=u(t);if(r<0||r%n)throw B("Wrong offset!");return r},At=function(t){if(P(t)&&_t in t)return t;throw q(t+" is not a typed array!")},It=function(t,n){if(!(P(t)&&mt in t))throw q("It is not a typed array constructor!");return new t(n)},Lt=function(t,n){return Nt(L(t,t[St]),n)},Nt=function(t,n){for(var r=0,e=n.length,i=It(t,e);r<e;)i[r]=n[r++];return i},Tt=function(t,n,r){U(t,n,{get:function(){return this._d[r]}})},kt=function(t){var n,r,e,i,o,u,c=v(t),f=arguments.length,a=1<f?arguments[1]:void 0,s=void 0!==a,l=d(c);if(null!=l&&!p(l)){for(u=l.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(s&&2<f&&(a=h(a,arguments[2],2)),n=0,r=O(c.length),i=It(this,r);n<r;n++)i[n]=s?a(c[n],n):c[n];return i},Rt=function(){for(var t=0,n=arguments.length,r=It(this,n);t<n;)r[t]=arguments[t++];return r},Ct=!!z&&x(function(){gt.call(new z(1))}),Dt=function(){return gt.apply(Ct?dt.call(At(this)):At(this),arguments)},Gt={copyWithin:function(t,n){return D.call(At(this),t,n,2<arguments.length?arguments[2]:void 0)},every:function(t){return rt(At(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return C.apply(At(this),arguments)},filter:function(t){return Lt(this,tt(At(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return et(At(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return it(At(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){Z(At(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return ut(At(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return ot(At(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return vt.apply(At(this),arguments)},lastIndexOf:function(t){return st.apply(At(this),arguments)},map:function(t){return Mt(At(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return lt.apply(At(this),arguments)},reduceRight:function(t){return ht.apply(At(this),arguments)},reverse:function(){for(var t,n=this,r=At(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(At(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return pt.call(At(this),t)},subarray:function(t,n){var r=At(this),e=r.length,i=c(t,e);return new(L(r,r[St]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,O((void 0===n?e:c(n,e))-i))}},Wt=function(t,n){return Lt(this,dt.call(At(this),t,n))},Ut=function(t){At(this);var n=Ft(arguments[1],1),r=this.length,e=v(t),i=O(e.length),o=0;if(r<i+n)throw B(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(At(this))},keys:function(){return ft.call(At(this))},values:function(){return ct.call(At(this))}},Bt=function(t,n){return P(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return Bt(t,n=f(n,!0))?i(2,t[n]):V(t,n)},zt=function(t,n,r){return!(Bt(t,n=f(n,!0))&&P(r)&&a(r,"value"))||a(r,"get")||a(r,"set")||r.configurable||a(r,"writable")&&!r.writable||a(r,"enumerable")&&!r.enumerable?U(t,n,r):(t[n]=r.value,t)};wt||(W.f=qt,G.f=zt),m(m.S+m.F*!wt,"Object",{getOwnPropertyDescriptor:qt,defineProperty:zt}),x(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Ht=o({},Gt);o(Ht,Vt),_(Ht,bt,Vt.values),o(Ht,{slice:Wt,set:Ut,constructor:function(){},toString:yt,toLocaleString:Dt}),Tt(Ht,"buffer","b"),Tt(Ht,"byteOffset","o"),Tt(Ht,"byteLength","l"),Tt(Ht,"length","e"),U(Ht,xt,{get:function(){return this[_t]}}),t.exports=function(t,l,n,o){var h=t+((o=!!o)?"Clamped":"")+"Array",r="get"+t,u="set"+t,v=b[h],c=v||{},e=v&&F(v),i=!v||!S.ABV,f={},a=v&&v[$],p=function(t,i){U(t,i,{get:function(){return t=i,(n=this._d).v[r](t*l+n.o,Pt);var t,n},set:function(t){return n=i,r=t,e=this._d,o&&(r=(r=Math.round(r))<0?0:255<r?255:255&r),void e.v[u](n*l+e.o,r,Pt);var n,r,e},enumerable:!0})};i?(v=n(function(t,n,r,e){w(t,v,h,"_d");var i,o,u,c,f=0,a=0;if(P(n)){if(!(n instanceof X||(c=M(n))==H||c==K))return _t in n?Nt(v,n):kt.call(v,n);i=n,a=Ft(r,l);var s=n.byteLength;if(void 0===e){if(s%l)throw B(Et);if((o=s-a)<0)throw B(Et)}else if(s<(o=O(e)*l)+a)throw B(Et);u=o/l}else u=E(n),i=new X(o=u*l);for(_(t,"_d",{b:i,o:a,l:o,e:u,v:new Q(i)});f<u;)p(t,f++)}),a=v[$]=j(Ht),_(a,"constructor",v)):x(function(){v(1)})&&x(function(){new v(-1)})&&k(function(t){new v,new v(null),new v(1.5),new v(t)},!0)||(v=n(function(t,n,r,e){var i;return w(t,v,h),P(n)?n instanceof X||(i=M(n))==H||i==K?void 0!==e?new c(n,Ft(r,l),e):void 0!==r?new c(n,Ft(r,l)):new c(n):_t in n?Nt(v,n):kt.call(v,n):new c(E(n))}),Z(e!==Function.prototype?A(c).concat(A(e)):A(c),function(t){t in v||_(v,t,c[t])}),v[$]=a,g||(a.constructor=v));var s=a[bt],d=!!s&&("values"==s.name||null==s.name),y=Vt.values;_(v,mt,!0),_(a,_t,h),_(a,Ot,!0),_(a,St,v),(o?new v(1)[xt]==h:xt in a)||U(a,xt,{get:function(){return h}}),f[h]=v,m(m.G+m.W+m.F*(v!=c),f),m(m.S,h,{BYTES_PER_ELEMENT:l}),m(m.S+m.F*x(function(){c.of.call(v,1)}),h,{from:kt,of:Rt}),J in a||_(a,J,l),m(m.P,h,Gt),R(h),m(m.P+m.F*jt,h,{set:Ut}),m(m.P+m.F*!d,h,Vt),g||a.toString==yt||(a.toString=yt),m(m.P+m.F*x(function(){new v(1).slice()}),h,{slice:Wt}),m(m.P+m.F*(x(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!x(function(){a.toLocaleString.call([1,2])})),h,{toLocaleString:Dt}),T[h]=d?s:y,g||d||_(a,bt,y)}}else t.exports=function(){}},function(t,n,r){var e=r(19),i=r(6).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(14)&&!r(21)(function(){return 7!=Object.defineProperty(r(59)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var x=r(24),m=r(50),S=r(66),w=r(15),_=r(26),O=r(100),E=r(38),M=r(106),P=r(8)("iterator"),j=!([].keys&&"next"in[].keys()),F="values",A=function(){return this};t.exports=function(t,n,r,e,i,o,u){O(r,n,e);var c,f,a,s=function(t){if(!j&&t in p)return p[t];switch(t){case"keys":case F:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==F,v=!1,p=t.prototype,d=p[P]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,b="Array"==n&&p.entries||d;if(b&&((a=M(b.call(new t)))!==Object.prototype&&a.next&&(E(a,l,!0),x||"function"==typeof a[P]||w(a,P,A))),h&&d&&d.name!==F&&(v=!0,y=function(){return d.call(this)}),x&&!u||!j&&!v&&p[P]||w(p,P,y),_[n]=y,_[l]=A,i)if(c={values:h?y:s(F),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else m(m.P+m.F*(j||v),n,c);return c}},function(t,n,e){var i=e(20),o=e(103),u=e(36),c=e(39)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(59)("iframe"),r=u.length;for(n.style.display="none",e(97).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(65),i=r(36).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var u=r(10),c=r(16),f=r(95)(!1),a=r(39)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){t.exports=r(15)},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;null==i[e]&&r(27)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n){t.exports=!1},function(t,n,r){var e=r(79)("meta"),i=r(5),o=r(31),u=r(13).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n,r){var h=r(47),v=r(177),p=r(145),d=r(2),y=r(9),g=r(161),b={},x={};(n=t.exports=function(t,n,r,e,i){var o,u,c,f,a=i?function(){return t}:g(t),s=h(r,e,n?2:1),l=0;if("function"!=typeof a)throw TypeError(t+" is not iterable!");if(p(a)){for(o=y(t.length);l<o;l++)if((f=n?s(d(u=t[l])[0],u[1]):s(t[l]))===b||f===x)return f}else for(c=a.call(t);!(u=c.next()).done;)if((f=v(c,s,u.value,n))===b||f===x)return f}).BREAK=b,n.RETURN=x},function(t,n,e){var i=e(2),o=e(183),u=e(141),c=e(154)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(140)("iframe"),r=u.length;for(n.style.display="none",e(143).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(185),i=r(141).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(185),i=r(141);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var i=r(28);t.exports=function(t,n,r){for(var e in n)i(t,e,n[e],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(13),o=r(11),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(49),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(5);t.exports=function(t,n){if(!e(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},function(t,n,r){var o=r(93);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(107)(!0);r(61)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){var i=r(45),o=r(7)("toStringTag"),u="Arguments"==i(function(){return arguments}());t.exports=function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),o))?r:u?i(n):"Object"==(e=i(n))&&"function"==typeof n.callee?"Arguments":e}},function(t,n){t.exports={}},function(t,n,r){var e=r(13).f,i=r(31),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var u=r(1),e=r(53),c=r(4),f=r(157),i="["+f+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t,n,r){var e={},i=c(function(){return!!f[t]()||"​"!="​"[t]()}),o=e[t]=i?n(l):f[t];r&&(e[r]=o),u(u.P+u.F*i,"String",e)},l=s.trim=function(t,n){return t=String(e(t)),1&n&&(t=t.replace(o,"")),2&n&&(t=t.replace(a,"")),t};t.exports=s},function(t,n,r){t.exports={default:r(91),__esModule:!0}},function(t,n,r){t.exports={default:r(92),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=e(r(89)),o=e(r(88)),u="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};n.default="function"==typeof o.default&&"symbol"===u(i.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,n,r){r(111),r(110),r(112),r(113),t.exports=r(18).Symbol},function(t,n,r){r(83),r(114),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var f=r(16),a=r(82),s=r(108);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){var c=r(30),f=r(64),a=r(37);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n,r){var e=r(6).document;t.exports=e&&e.documentElement},function(t,n,r){var e=r(56);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(56);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(62),i=r(22),o=r(38),u={};r(15)(u,r(8)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(25)("meta"),i=r(19),o=r(10),u=r(12).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(21)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n,r){var u=r(12),c=r(20),f=r(30);t.exports=r(14)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(22),o=r(16),u=r(42),c=r(10),f=r(60),a=Object.getOwnPropertyDescriptor;n.f=r(14)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(16),i=r(63).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var e=r(10),i=r(51),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var f=r(41),a=r(35);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n,r){"use strict";var e=r(94),i=r(101),o=r(26),u=r(16);t.exports=r(61)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(6),u=r(10),i=r(14),o=r(50),c=r(66),f=r(102).KEY,a=r(21),s=r(40),l=r(38),h=r(25),v=r(8),p=r(44),d=r(43),y=r(96),g=r(99),b=r(20),x=r(19),m=r(51),S=r(16),w=r(42),_=r(22),O=r(62),E=r(105),M=r(104),P=r(64),j=r(12),F=r(30),A=M.f,I=j.f,L=E.f,N=e.Symbol,T=e.JSON,k=T&&T.stringify,R="prototype",C=v("_hidden"),D=v("toPrimitive"),G={}.propertyIsEnumerable,W=s("symbol-registry"),U=s("symbols"),V=s("op-symbols"),B=Object[R],q="function"==typeof N&&!!P.f,z=e.QObject,H=!z||!z[R]||!z[R].findChild,K=i&&a(function(){return 7!=O(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=A(B,n);e&&delete B[n],I(t,n,r),e&&t!==B&&I(B,n,e)}:I,J=function(t){var n=U[t]=O(N[R]);return n._k=t,n},$=q&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===B&&Y(V,n,r),b(t),n=w(n,!0),b(r),u(U,n)?(r.enumerable?(u(t,C)&&t[C][n]&&(t[C][n]=!1),r=O(r,{enumerable:_(0,!1)})):(u(t,C)||I(t,C,_(1,{})),t[C][n]=!0),K(t,n,r)):I(t,n,r)},X=function(t,n){b(t);for(var r,e=y(n=S(n)),i=0,o=e.length;i<o;)Y(t,r=e[i++],n[r]);return t},Q=function(t){var n=G.call(this,t=w(t,!0));return!(this===B&&u(U,t)&&!u(V,t))&&(!(n||!u(this,t)||!u(U,t)||u(this,C)&&this[C][t])||n)},Z=function(t,n){if(t=S(t),n=w(n,!0),t!==B||!u(U,n)||u(V,n)){var r=A(t,n);return!r||!u(U,n)||u(t,C)&&t[C][n]||(r.enumerable=!0),r}},tt=function(t){for(var n,r=L(S(t)),e=[],i=0;r.length>i;)u(U,n=r[i++])||n==C||n==f||e.push(n);return e},nt=function(t){for(var n,r=t===B,e=L(r?V:S(t)),i=[],o=0;e.length>o;)!u(U,n=e[o++])||r&&!u(B,n)||i.push(U[n]);return i};q||(c((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===B&&r.call(V,t),u(this,C)&&u(this[C],n)&&(this[C][n]=!1),K(this,n,_(1,t))};return i&&H&&K(B,n,{configurable:!0,set:r}),J(n)})[R],"toString",function(){return this._k}),M.f=Z,j.f=Y,r(63).f=E.f=tt,r(37).f=Q,P.f=nt,i&&!r(24)&&c(B,"propertyIsEnumerable",Q,!0),p.f=function(t){return J(v(t))}),o(o.G+o.W+o.F*!q,{Symbol:N});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;rt.length>et;)v(rt[et++]);for(var it=F(v.store),ot=0;it.length>ot;)d(it[ot++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return u(W,t+="")?W[t]:W[t]=N(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in W)if(W[n]===t)return n},useSetter:function(){H=!0},useSimple:function(){H=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,n){return void 0===n?O(t):X(O(t),n)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:nt});var ut=a(function(){P.f(1)});o(o.S+o.F*ut,"Object",{getOwnPropertySymbols:function(t){return P.f(m(t))}}),T&&o(o.S+o.F*(!q||a(function(){var t=N();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(x(n)||void 0!==t)&&!$(t))return g(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,k.apply(T,e)}}),N[R][D]||r(15)(N[R],D,N[R].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(109);for(var e=r(6),i=r(15),o=r(26),u=r(8)("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),f=0;f<c.length;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(46),i=r(3),o="__core-js_shared__",u=i[o]||(i[o]={});(t.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(68)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,n,r){var i=r(2),o=r(23),u=r(7)("species");t.exports=function(t,n){var r,e=i(t).constructor;return void 0===e||null==(r=i(e)[u])?n:o(r)}},function(t,n,r){var f=r(34),a=r(9),s=r(78);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){"use strict";var g=r(3),b=r(1),x=r(28),m=r(76),S=r(69),w=r(71),_=r(70),O=r(5),E=r(4),M=r(125),P=r(86),j=r(144);t.exports=function(e,t,n,r,i,o){var u=g[e],c=u,f=i?"set":"add",a=c&&c.prototype,s={},l=function(t){var r=a[t];x(a,t,"delete"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!O(t)?void 0:r.call(this,0===t?0:t)}:"add"==t?function(t){return r.call(this,0===t?0:t),this}:function(t,n){return r.call(this,0===t?0:t,n),this})};if("function"==typeof c&&(o||a.forEach&&!E(function(){(new c).entries().next()}))){var h=new c,v=h[f](o?{}:-0,1)!=h,p=E(function(){h.has(1)}),d=M(function(t){new c(t)}),y=!o&&E(function(){for(var t=new c,n=5;n--;)t[f](n,n);return!t.has(-0)});d||(((c=t(function(t,n){_(t,c,e);var r=j(new u,t,c);return null!=n&&w(n,i,r[f],r),r})).prototype=a).constructor=c),(p||y)&&(l("delete"),l("has"),i&&l("get")),(y||v)&&l(f),o&&a.clear&&delete a.clear}else c=r.getConstructor(t,e,i,f),m(c.prototype,n),S.NEED=!0;return P(c,e),s[e]=c,b(b.G+b.W+b.F*(c!=u),s),o||r.setStrong(c,e,i),c}},function(t,n,r){"use strict";r(197);var s=r(28),l=r(27),h=r(4),v=r(53),p=r(7),d=r(152),y=p("species"),g=!h(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),b=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(r,t,n){var e=p(r),o=!h(function(){var t={};return t[e]=function(){return 7},7!=""[r](t)}),i=o?!h(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===r&&(n.constructor={},n.constructor[y]=function(){return n}),n[e](""),!t}):void 0;if(!o||!i||"replace"===r&&!g||"split"===r&&!b){var u=/./[e],c=n(v,e,""[r],function(t,n,r,e,i){return n.exec===d?o&&!i?{done:!0,value:u.call(n,r,e)}:{done:!0,value:t.call(r,n,e)}:{done:!1}}),f=c[0],a=c[1];s(String.prototype,r,f),l(RegExp.prototype,e,2==t?function(t,n){return a.call(t,this,n)}:function(t){return a.call(t,this)})}}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(5),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var o=r(7)("iterator"),u=!1;try{var e=[7][o]();e.return=function(){u=!0},Array.from(e,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!u)return!1;var r=!1;try{var e=[7],i=e[o]();i.next=function(){return{done:r=!0}},e[o]=function(){return i},t(e)}catch(t){}return r}},function(t,n,r){"use strict";t.exports=r(68)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){"use strict";var i=r(84),o=RegExp.prototype.exec;t.exports=function(t,n){var r=t.exec;if("function"==typeof r){var e=r.call(t,n);if("object"!=typeof e)throw new TypeError("RegExp exec method returned something other than an Object or null");return e}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,n)}},function(t,n,r){"use strict";var e=r(1),u=r(23),c=r(47),f=r(71);t.exports=function(t){e(e.S,t,{from:function(t){var n,r,e,i,o=arguments[1];return u(this),(n=void 0!==o)&&u(o),null==t?new this:(r=[],n?(e=0,i=c(o,arguments[2],2),f(t,!1,function(t){r.push(i(t,e++))})):f(t,!1,r.push,r),new this(r))}})}},function(t,n,r){"use strict";var e=r(1);t.exports=function(t){e(e.S,t,{of:function(){for(var t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return new this(n)}})}},function(t,n,r){var f=r(49),a=r(53);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){for(var e,i=r(3),o=r(27),u=r(79),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n,r){var e=r(3).navigator;t.exports=e&&e.userAgent||""},function(t,n){"use strict";var r,e={versions:(r=window.navigator.userAgent,{trident:-1<r.indexOf("Trident"),presto:-1<r.indexOf("Presto"),webKit:-1<r.indexOf("AppleWebKit"),gecko:-1<r.indexOf("Gecko")&&-1==r.indexOf("KHTML"),mobile:!!r.match(/AppleWebKit.*Mobile.*/),ios:!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<r.indexOf("Android")||-1<r.indexOf("Linux"),iPhone:-1<r.indexOf("iPhone")||-1<r.indexOf("Mac"),iPad:-1<r.indexOf("iPad"),webApp:-1==r.indexOf("Safari"),weixin:-1==r.indexOf("MicroMessenger")})};t.exports=e},function(t,n,r){"use strict";var e,i=r(90),l=(e=i)&&e.__esModule?e:{default:e},h=function(){function n(t,n,r){return n||r?String.fromCharCode(n||r):o[t]||t}function r(t){return s[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,i=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},u=/\u00a0/g,c=/<br\s*\/?>/gi,f=/\r?\n/g,a=/\s/g,s={};for(var t in o)s[o[t]]=t;return o["&apos;"]="'",s["'"]="&#39;",{encode:function(t){return t?(""+t).replace(i,r).replace(f,"<br/>").replace(a,"&nbsp;"):""},decode:function(t){return t?(""+t).replace(c,"\n").replace(e,n).replace(u," "):""},encodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;for(var n=[],r=0,e=(t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")})).length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)t[n]=h.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,l.default)(t)))for(var e in t)t[e]=h.encodeObject(t[e]);else if("string"==typeof t)return h.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=h},function(t,n,r){"use strict";var e=r(131)(!0);t.exports=function(t,n,r){return n+(r?e(t,n).length:1)}},function(t,n,r){"use strict";var c=r(17),f=r(78),a=r(9);t.exports=function(t){for(var n=c(this),r=a(n.length),e=arguments.length,i=f(1<e?arguments[1]:void 0,r),o=2<e?arguments[2]:void 0,u=void 0===o?r:f(o,r);i<u;)n[i++]=t;return n}},function(t,n,r){var e=r(226);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(13),i=r(75);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(5),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(n){var r=/./;try{"/./"[n](r)}catch(t){try{return r[e]=!1,!"/./"[n](r)}catch(n){}}return!0}},function(t,n,r){var e=r(3).document;t.exports=e&&e.documentElement},function(t,n,r){var o=r(5),u=r(153).set;t.exports=function(t,n,r){var e,i=n.constructor;return i!==r&&"function"==typeof i&&(e=i.prototype)!==r.prototype&&o(e)&&u&&u(t,e),t}},function(t,n,r){var e=r(85),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){"use strict";var e=r(72),i=r(75),o=r(86),u={};r(27)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var x=r(68),m=r(1),S=r(28),w=r(27),_=r(85),O=r(146),E=r(86),M=r(33),P=r(7)("iterator"),j=!([].keys&&"next"in[].keys()),F="values",A=function(){return this};t.exports=function(t,n,r,e,i,o,u){O(r,n,e);var c,f,a,s=function(t){if(!j&&t in p)return p[t];switch(t){case"keys":case F:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==F,v=!1,p=t.prototype,d=p[P]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,b="Array"==n&&p.entries||d;if(b&&((a=M(b.call(new t)))!==Object.prototype&&a.next&&(E(a,l,!0),x||"function"==typeof a[P]||w(a,P,A))),h&&d&&d.name!==F&&(v=!0,y=function(){return d.call(this)}),x&&!u||!j&&!v&&p[P]||w(p,P,y),_[n]=y,_[l]=A,i)if(c={values:h?y:s(F),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else m(m.P+m.F*(j||v),n,c);return c}},function(t,n){var r=Math.expm1;t.exports=!r||22025.465794806718<r(10)||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var c=r(3),f=r(158).set,a=c.MutationObserver||c.WebKitMutationObserver,s=c.process,l=c.Promise,h="process"==r(45)(s);t.exports=function(){var r,e,i,t=function(){var t,n;for(h&&(t=s.domain)&&t.exit();r;){n=r.fn,r=r.next;try{n()}catch(t){throw r?i():e=void 0,t}}e=void 0,t&&t.enter()};if(h)i=function(){s.nextTick(t)};else if(!a||c.navigator&&c.navigator.standalone)if(l&&l.resolve){var n=l.resolve(void 0);i=function(){n.then(t)}}else i=function(){f.call(c,t)};else{var o=!0,u=document.createTextNode("");new a(t).observe(u,{characterData:!0}),i=function(){u.data=o=!o}}return function(t){var n={fn:t,next:void 0};e&&(e.next=n),r||(r=n,i()),e=n}}},function(t,n,r){"use strict";function e(t){var r,e;this.promise=new t(function(t,n){if(void 0!==r||void 0!==e)throw TypeError("Bad Promise constructor");r=t,e=n}),this.resolve=i(r),this.reject=i(e)}var i=r(23);t.exports.f=function(t){return new e(t)}},function(t,n,r){"use strict";var e,i,u=r(115),c=RegExp.prototype.exec,f=String.prototype.replace,o=c,a="lastIndex",s=(e=/a/,i=/b*/g,c.call(e,"a"),c.call(i,"a"),0!==e[a]||0!==i[a]),l=void 0!==/()??/.exec("")[1];(s||l)&&(o=function(t){var n,r,e,i,o=this;return l&&(r=new RegExp("^"+o.source+"$(?!\\s)",u.call(o))),s&&(n=o[a]),e=c.call(o,t),s&&e&&(o[a]=o.global?e.index+e[0].length:n),l&&e&&1<e.length&&f.call(e[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(e[i]=void 0)}),e}),t.exports=o},function(t,n,i){var r=i(5),e=i(2),o=function(t,n){if(e(t),!r(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,e){try{(e=i(47)(Function.call,i(32).f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(t){r=!0}return function(t,n){return o(t,n),r?t.__proto__=n:e(t,n),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(118)("keys"),i=r(79);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(124),i=r(53);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var i=r(49),o=r(53);t.exports=function(t){var n=String(o(this)),r="",e=i(t);if(e<0||e==1/0)throw RangeError("Count can't be negative");for(;0<e;(e>>>=1)&&(n+=n))1&e&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(47),c=r(175),f=r(143),a=r(140),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=s.Dispatch,y=0,g={},b="onreadystatechange",x=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},m=function(t){x.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return g[++y]=function(){c("function"==typeof t?t:Function(t),n)},e(y),y},v=function(t){delete g[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(x,t,1))}:d&&d.now?e=function(t){d.now(u(x,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=b in a("script")?function(t){f.appendChild(a("script"))[b]=function(){f.removeChild(this),x.call(t)}}:function(t){setTimeout(u(x,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";function e(t,n,r){var e,i,o,u=new Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?W(2,-24)-W(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=G(t))!=t||t===C?(i=t!=t?1:0,e=f):(e=U(V(t)/B),t*(o=W(2,-e))<1&&(e--,o*=2),2<=(t+=1<=e+a?s/o:s*W(2,1-a))*o&&(e++,o/=2),f<=e+a?(i=0,e=f):1<=e+a?(i=(t*o-1)*W(2,n),e+=a):(i=t*W(2,a-1)*W(2,n),e=0));8<=n;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;0<c;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u}function i(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;0<c;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;0<c;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-C:C;e+=W(2,n),s-=u}return(a?-1:1)*e*W(2,s-n)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function u(t){return[255&t]}function c(t){return[255&t,t>>8&255]}function f(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function a(t){return e(t,52,8)}function s(t){return e(t,23,4)}function l(t,n,r){M(t[I],n,{get:function(){return this[r]}})}function h(t,n,r,e){var i=O(+r);if(i+n>t[K])throw R(L);var o=t[H]._b,u=i+t[J],c=o.slice(u,u+n);return e?c:c.reverse()}function v(t,n,r,e,i,o){var u=O(+r);if(u+n>t[K])throw R(L);for(var c=t[H]._b,f=u+t[J],a=e(+i),s=0;s<n;s++)c[f+s]=a[o?s:n-s-1]}var p=r(3),d=r(11),y=r(68),g=r(132),b=r(27),x=r(76),m=r(4),S=r(70),w=r(49),_=r(9),O=r(194),E=r(73).f,M=r(13).f,P=r(137),j=r(86),F="ArrayBuffer",A="DataView",I="prototype",L="Wrong index!",N=p[F],T=p[A],k=p.Math,R=p.RangeError,C=p.Infinity,D=N,G=k.abs,W=k.pow,U=k.floor,V=k.log,B=k.LN2,q="byteLength",z="byteOffset",H=d?"_b":"buffer",K=d?"_l":q,J=d?"_o":z;if(g.ABV){if(!m(function(){N(1)})||!m(function(){new N(-1)})||m(function(){return new N,new N(1.5),new N(NaN),N.name!=F})){for(var $,Y=(N=function(t){return S(this,N),new D(O(t))})[I]=D[I],X=E(D),Q=0;X.length>Q;)($=X[Q++])in N||b(N,$,D[$]);y||(Y.constructor=N)}var Z=new T(new N(2)),tt=T[I].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||x(T[I],{setInt8:function(t,n){tt.call(this,t,n<<24>>24)},setUint8:function(t,n){tt.call(this,t,n<<24>>24)}},!0)}else N=function(t){S(this,N,F);var n=O(t);this._b=P.call(new Array(n),0),this[K]=n},T=function(t,n,r){S(this,T,A),S(t,N,A);var e=t[K],i=w(n);if(i<0||e<i)throw R("Wrong offset!");if(e<i+(r=void 0===r?e-i:_(r)))throw R("Wrong length!");this[H]=t,this[J]=i,this[K]=r},d&&(l(N,q,"_l"),l(T,"buffer","_b"),l(T,q,"_l"),l(T,z,"_o")),x(T[I],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){var n=h(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=h(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return o(h(this,4,t,arguments[1]))},getUint32:function(t){return o(h(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(h(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(h(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){v(this,1,t,u,n)},setUint8:function(t,n){v(this,1,t,u,n)},setInt16:function(t,n){v(this,2,t,c,n,arguments[2])},setUint16:function(t,n){v(this,2,t,c,n,arguments[2])},setInt32:function(t,n){v(this,4,t,f,n,arguments[2])},setUint32:function(t,n){v(this,4,t,f,n,arguments[2])},setFloat32:function(t,n){v(this,4,t,s,n,arguments[2])},setFloat64:function(t,n){v(this,8,t,a,n,arguments[2])}});j(N,F),j(T,A),b(T[I],g.VIEW,!0),n[F]=N,n[A]=T},function(t,n,r){var e=r(3),i=r(46),o=r(68),u=r(195),c=r(13).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(84),i=r(7)("iterator"),o=r(85);t.exports=r(46).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(67),i=r(178),o=r(85),u=r(34);t.exports=r(147)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){t.exports=function(t,n){t.classList?t.classList.add(n):t.className+=" "+n}},function(t,n){t.exports=function(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var a=r(17),s=r(78),l=r(9);t.exports=[].copyWithin||function(t,n){var r=a(this),e=l(r.length),i=s(t,e),o=s(n,e),u=2<arguments.length?arguments[2]:void 0,c=Math.min((void 0===u?e:s(u,e))-o,e-i),f=1;for(o<i&&i<o+c&&(f=-1,o+=c-1,i+=c-1);0<c--;)o in r?r[i]=r[o]:delete r[i],i+=f,o+=f;return r}},function(t,n,r){var e=r(71);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var s=r(23),l=r(17),h=r(116),v=r(9);t.exports=function(t,n,r,e,i){s(n);var o=l(t),u=h(o),c=v(o.length),f=i?c-1:0,a=i?-1:1;if(r<2)for(;;){if(f in u){e=u[f],f+=a;break}if(f+=a,i?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=f:f<c;f+=a)f in u&&(e=n(e,u[f],f,o));return e}},function(t,n,r){"use strict";var o=r(23),u=r(5),c=r(175),f=[].slice,a={};t.exports=Function.bind||function(n){var r=o(this),e=f.call(arguments,1),i=function(){var t=e.concat(f.call(arguments));return this instanceof i?function(t,n,r){if(!(n in a)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";a[n]=Function("F,a","return new F("+e.join(",")+")")}return a[n](t,r)}(r,t.length,t):c(r,t,n)};return u(r.prototype)&&(i.prototype=r.prototype),i}},function(t,n,r){"use strict";var u=r(13).f,c=r(72),f=r(76),a=r(47),s=r(70),l=r(71),e=r(147),i=r(178),o=r(77),h=r(11),v=r(69).fastKey,p=r(80),d=h?"_s":"size",y=function(t,n){var r,e=v(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,o,r,e){var i=t(function(t,n){s(t,i,o,"_i"),t._t=o,t._i=c(null),t._f=void 0,t._l=void 0,t[d]=0,null!=n&&l(n,r,t[e],t)});return f(i.prototype,{clear:function(){for(var t=p(this,o),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=p(this,o),r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){p(this,o);for(var n,r=a(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(p(this,o),t)}}),h&&u(i.prototype,"size",{get:function(){return p(this,o)[d]}}),i},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=v(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,r,n){e(t,r,function(t,n){this._t=p(t,r),this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?i(0,"keys"==n?r.k:"values"==n?r.v:[r.k,r.v]):(t._t=void 0,i(1))},n?"entries":"values",!n,!0),o(r)}}},function(t,n,r){var e=r(84),i=r(167);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var u=r(76),c=r(69).getWeak,i=r(2),f=r(5),a=r(70),s=r(71),e=r(52),l=r(31),h=r(80),o=e(5),v=e(6),p=0,d=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,n){return o(t.a,function(t){return t[0]===n})};y.prototype={get:function(t){var n=g(this,t);if(n)return n[1]},has:function(t){return!!g(this,t)},set:function(t,n){var r=g(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(n){var t=v(this.a,function(t){return t[0]===n});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(t,r,e,i){var o=t(function(t,n){a(t,o,r,"_i"),t._t=r,t._i=p++,t._l=void 0,null!=n&&s(n,e,t[i],t)});return u(o.prototype,{delete:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).has(t):n&&l(n,this._i)}}),o},def:function(t,n,r){var e=c(i(n),!0);return!0===e?d(t).set(n,r):e[t._i]=r,t},ufstore:d}},function(t,n,r){"use strict";var p=r(123),d=r(5),y=r(9),g=r(47),b=r(7)("isConcatSpreadable");t.exports=function t(n,r,e,i,o,u,c,f){for(var a,s,l=o,h=0,v=!!c&&g(c,f,3);h<i;){if(h in e){if(a=v?v(e[h],h,r):e[h],s=!1,d(a)&&(s=void 0!==(s=a[b])?!!s:p(a)),s&&0<u)l=t(n,r,a,y(a.length),l,u-1)-1;else{if(9007199254740991<=l)throw TypeError();n[l]=a}l++}h++}return l}},function(t,n,r){t.exports=!r(11)&&!r(4)(function(){return 7!=Object.defineProperty(r(140)("div"),"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(5),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var o=r(2);t.exports=function(t,n,r,e){try{return e?n(o(r)[0],r[1]):n(r)}catch(n){var i=t.return;throw void 0!==i&&o(i.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var o=r(149),e=Math.pow,u=e(2,-52),c=e(2,-23),f=e(2,127)*(2-c),a=e(2,-126);t.exports=Math.fround||function(t){var n,r,e=Math.abs(t),i=o(t);return e<a?i*(e/a/c+1/u-1/u)*a*c:f<(r=(n=(1+c/u)*e)-(n-e))||r!=r?i*(1/0):i*r}},function(t,n){t.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n){t.exports=Math.scale||function(t,n,r,e,i){return 0===arguments.length||t!=t||n!=n||r!=r||e!=e||i!=i?NaN:t===1/0||t===-1/0?t:(t-n)*(i-e)/(r-n)+e}},function(t,n,r){"use strict";var h=r(11),v=r(74),p=r(127),d=r(117),y=r(17),g=r(116),i=Object.assign;t.exports=!i||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=i({},t)[r]||Object.keys(i({},n)).join("")!=e})?function(t,n){for(var r=y(t),e=arguments.length,i=1,o=p.f,u=d.f;i<e;)for(var c,f=g(arguments[i++]),a=o?v(f).concat(o(f)):v(f),s=a.length,l=0;l<s;)c=a[l++],h&&!u.call(f,c)||(r[c]=f[c]);return r}:i},function(t,n,r){var u=r(13),c=r(2),f=r(74);t.exports=r(11)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(34),i=r(73).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var u=r(31),c=r(34),f=r(120)(!1),a=r(154)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){var f=r(11),a=r(74),s=r(34),l=r(117).f;t.exports=function(c){return function(t){for(var n,r=s(t),e=a(r),i=e.length,o=0,u=[];o<i;)n=e[o++],f&&!l.call(r,n)||u.push(c?[n,r[n]]:r[n]);return u}}},function(t,n,r){var e=r(73),i=r(127),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(87).trim;t.exports=1/e(r(157)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(87).trim,o=r(157),u=/^[-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,r){var e=r(2),i=r(5),o=r(151);t.exports=function(t,n){if(e(t),i(n)&&n.constructor===t)return n;var r=o.f(t);return(0,r.resolve)(n),r.promise}},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var s=r(9),l=r(156),h=r(53);t.exports=function(t,n,r,e){var i=String(h(t)),o=i.length,u=void 0===r?" ":String(r),c=s(n);if(c<=o||""==u)return i;var f=c-o,a=l.call(u,Math.ceil(f/u.length));return a.length>f&&(a=a.slice(0,f)),e?a+i:i+a}},function(t,n,r){var e=r(49),i=r(9);t.exports=function(t){if(void 0===t)return 0;var n=e(t),r=i(n);if(n!==r)throw RangeError("Wrong length!");return r}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(170),i=r(80);t.exports=r(121)("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(i(this,"Map"),t);return n&&n.v},set:function(t,n){return e.def(i(this,"Map"),0===t?0:t,n)}},e,!0)},function(t,n,r){"use strict";var e=r(152);r(1)({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e})},function(t,n,r){r(11)&&"g"!=/./g.flags&&r(13).f(RegExp.prototype,"flags",{configurable:!0,get:r(115)})},function(t,n,r){"use strict";var e=r(170),i=r(80);t.exports=r(121)("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"Set"),t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var o,e=r(3),i=r(52)(0),u=r(28),c=r(69),f=r(182),a=r(172),s=r(5),l=r(80),h=r(80),v=!e.ActiveXObject&&"ActiveXObject"in e,p="WeakMap",d=c.getWeak,y=Object.isExtensible,g=a.ufstore,b=function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},x={get:function(t){if(s(t)){var n=d(t);return!0===n?g(l(this,p)).get(t):n?n[this._i]:void 0}},set:function(t,n){return a.def(l(this,p),t,n)}},m=t.exports=r(121)(p,b,x,a,!0,!0);h&&v&&(f((o=a.getConstructor(b,p)).prototype,x),c.NEED=!0,i(["delete","has","get","set"],function(e){var t=m.prototype,i=t[e];u(t,e,function(t,n){if(!s(t)||y(t))return i.call(this,t,n);this._f||(this._f=new o);var r=this._f[e](t,n);return"set"==e?this:r})}))},,,,function(t,n){"use strict";t.exports={init:function(){var t=document.querySelector("#page-nav");t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new&&document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")}),yiliaConfig&&yiliaConfig.toc_hide_index&&document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"});var n=document.querySelector("#js-aboutme");n&&0!==n.length&&(n.innerHTML=n.innerText)}}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n,r,e,i){var o=function(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}(t),u=function(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}(t)-n;if(u-r<=i){var c=t.$newDom;c||(c=t.cloneNode(!0),(0,a.default)(t,c),(t.$newDom=c).style.position="fixed",c.style.top=(r||u)+"px",c.style.left=o+"px",c.style.zIndex=e||2,c.style.width="100%",c.style.color="#fff"),c.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var f=t.$newDom;f&&(f.style.visibility="hidden")}}function o(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");i(t,document.body.scrollTop,-63,2,0),i(n,document.body.scrollTop,1,3,0)}var f=e(r(163)),a=e((e(r(164)),r(425))),u=e(r(134)),c=e(r(204)),s=r(135);u.default.versions.mobile&&window.screen.width<800&&(function(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var i=t[r];o=n,u=i.getAttribute("href"),c=/\/|index.html/g,o.replace(c,"")===u.replace(c,"")&&(0,f.default)(i,"active")}var o,u,c}(),document.querySelector("#container").addEventListener("scroll",function(t){o()}),window.addEventListener("scroll",function(t){o()}),o()),(0,s.addLoadEvent)(function(){c.default.init()}),t.exports={}},,,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object.defineProperty(t,n,{writable:!0,configurable:!0,value:r})}if(r(424),r(210),r(214),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},function(L,t){(function(t){!function(t){"use strict";function o(t,n,r,e){var o,u,c,f,i=n&&n.prototype instanceof h?n:h,a=Object.create(i.prototype),s=new p(e||[]);return a._invoke=(o=t,u=r,c=s,f=_,function(t,n){if(f===E)throw new Error("Generator is already running");if(f===M){if("throw"===t)throw n;return d()}for(c.method=t,c.arg=n;;){var r=c.delegate;if(r){var e=v(r,c);if(e){if(e===P)continue;return e}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(f===_)throw f=M,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);f=E;var i=l(o,u,c);if("normal"===i.type){if(f=c.done?M:O,i.arg===P)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(f=M,c.method="throw",c.arg=i.arg)}}),a}function l(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function h(){}function r(){}function n(){}function e(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function u(c){function f(t,n,r,e){var i=l(c[t],c,n);if("throw"!==i.type){var o=i.arg,u=o.value;return u&&"object"==typeof u&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(t){f("next",t,r,e)},function(t){f("throw",t,r,e)}):Promise.resolve(u).then(function(t){o.value=t,r(o)},e)}e(i.arg)}var n;"object"==typeof t.process&&t.process.domain&&(f=t.process.domain.bind(f)),this._invoke=function(r,e){function t(){return new Promise(function(t,n){f(r,e,t,n)})}return n=n?n.then(t,t):t()}}function v(t,n){var r=t.iterator[n.method];if(r===a){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=a,v(t,n),"throw"===n.method))return P;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var e=l(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,P;var i=e.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=a),n.delegate=null,P):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,P)}function i(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function c(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(i,this),this.reset(!0)}function f(n){if(n){var t=n[b];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,e=function t(){for(;++r<n.length;)if(y.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=a,t.done=!0,t};return e.next=e}}return{next:d}}function d(){return{value:a,done:!0}}var a,s=Object.prototype,y=s.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},b=g.iterator||"@@iterator",x=g.asyncIterator||"@@asyncIterator",m=g.toStringTag||"@@toStringTag",S="object"==typeof L,w=t.regeneratorRuntime;if(w)S&&(L.exports=w);else{(w=t.regeneratorRuntime=S?L.exports:{}).wrap=o;var _="suspendedStart",O="suspendedYield",E="executing",M="completed",P={},j={};j[b]=function(){return this};var F=Object.getPrototypeOf,A=F&&F(F(f([])));A&&A!==s&&y.call(A,b)&&(j=A);var I=n.prototype=h.prototype=Object.create(j);r.prototype=I.constructor=n,n.constructor=r,n[m]=r.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===r||"GeneratorFunction"===(n.displayName||n.name))},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,n):(t.__proto__=n,m in t||(t[m]="GeneratorFunction")),t.prototype=Object.create(I),t},w.awrap=function(t){return{__await:t}},e(u.prototype),u.prototype[x]=function(){return this},w.AsyncIterator=u,w.async=function(t,n,r,e){var i=new u(o(t,n,r,e));return w.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},e(I),I[m]="Generator",I[b]=function(){return this},I.toString=function(){return"[object Generator]"},w.keys=function(r){var e=[];for(var t in r)e.push(t);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},w.values=f,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(c),!t)for(var n in this)"t"===n.charAt(0)&&y.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){function t(t,n){return o.type="throw",o.arg=r,e.next=t,n&&(e.method="next",e.arg=a),!!n}if(this.done)throw r;for(var e=this,n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var u=y.call(i,"catchLoc"),c=y.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;0<=r;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&y.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),P},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),c(r),P}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;c(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:f(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=a),P}}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}())},,,,function(t,n,r){r(232),t.exports=r(46).RegExp.escape},,,,,,,,,,,,function(t,n,r){var e=r(5),i=r(123),o=r(7)("species");t.exports=function(t){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&(null===(n=n[o])&&(n=void 0))),void 0===n?Array:n}},function(t,n,r){"use strict";var e=r(4),i=Date.prototype.getTime,o=Date.prototype.toISOString,u=function(t){return 9<t?t:"0"+t};t.exports=e(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!e(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":9999<n?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(99<r?r:"0"+u(r))+"Z"}:o},function(t,n,r){"use strict";var e=r(2),i=r(55);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),"number"!=t)}},function(t,n,r){var c=r(74),f=r(127),a=r(117);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n,r){t.exports=r(118)("native-function-to-string",Function.toString)},function(t,n){t.exports=function(n,r){var e=r===Object(r)?function(t){return r[t]}:r;return function(t){return String(t).replace(n,e)}}},function(t,n,r){var e=r(1),i=r(231)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(166)}),r(67)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(52)(4);e(e.P+e.F*!r(48)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(137)}),r(67)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(52)(2);e(e.P+e.F*!r(48)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(52)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)(o)},function(t,n,r){"use strict";var e=r(1),i=r(52)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)(o)},function(t,n,r){"use strict";var e=r(1),i=r(52)(0),o=r(48)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var h=r(47),e=r(1),v=r(17),p=r(177),d=r(145),y=r(9),g=r(139),b=r(161);e(e.S+e.F*!r(125)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,e,i,o=v(t),u="function"==typeof this?this:Array,c=arguments.length,f=1<c?arguments[1]:void 0,a=void 0!==f,s=0,l=b(o);if(a&&(f=h(f,2<c?arguments[2]:void 0,2)),null==l||u==Array&&d(l))for(r=new u(n=y(o.length));s<n;s++)g(r,s,a?f(o[s],s):o[s]);else for(i=l.call(o),r=new u;!(e=i.next()).done;s++)g(r,s,a?p(i,f,[e.value,s],!0):e.value);return r.length=s,r}})},function(t,n,r){"use strict";var e=r(1),i=r(120)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(48)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(123)})},function(t,n,r){"use strict";var e=r(1),i=r(34),o=[].join;e(e.P+e.F*(r(116)!=Object||!r(48)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(34),o=r(49),u=r(9),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(48)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(1<arguments.length&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);0<=e;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(52)(1);e(e.P+e.F*!r(48)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(139);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);t<n;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(168);e(e.P+e.F*!r(48)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(168);e(e.P+e.F*!r(48)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(143),a=r(45),s=r(78),l=r(9),h=[].slice;e(e.P+e.F*r(4)(function(){i&&h.call(i)}),"Array",{slice:function(t,n){var r=l(this.length),e=a(this);if(n=void 0===n?r:n,"Array"==e)return h.call(this,t,n);for(var i=s(t,r),o=s(n,r),u=l(o-i),c=new Array(u),f=0;f<u;f++)c[f]="String"==e?this.charAt(i+f):this[i+f];return c}})},function(t,n,r){"use strict";var e=r(1),i=r(52)(3);e(e.P+e.F*!r(48)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(23),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(48)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(77)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){var e=r(1),i=r(227);e(e.P+e.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(55);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(27)(i,e,r(228))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(28)(e,o,function(){var t=c.call(this);return t==t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(169)})},function(t,n,r){"use strict";var e=r(5),i=r(33),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(13).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(13).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(11)&&e(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(180),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){var e=r(1),i=Math.asinh;e(e.S+e.F*!(i&&0<1/i(0)),"Math",{asinh:function t(n){return isFinite(n=+n)&&0!=n?n<0?-t(-n):Math.log(n+Math.sqrt(n*n+1)):n}})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(149);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(148);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1);e(e.S,"Math",{fround:r(179)})},function(t,n,r){var e=r(1),f=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,i=0,o=0,u=arguments.length,c=0;o<u;)c<(r=f(arguments[o++]))?(i=i*(e=c/r)*e+1,c=r):0<r?i+=(e=r/c)*e:i+=r;return c===1/0?1/0:c*Math.sqrt(i)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(180)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(149)})},function(t,n,r){var e=r(1),i=r(148),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(148),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(31),o=r(45),u=r(144),s=r(55),c=r(4),f=r(73).f,a=r(32).f,l=r(13).f,h=r(87).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(72)(y))==v,b="trim"in String.prototype,x=function(t){var n=s(t,!1);if("string"==typeof n&&2<n.length){var r,e,i,o=(n=b?n.trim():h(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,c=n.slice(2),f=0,a=c.length;f<a;f++)if((u=c.charCodeAt(f))<48||i<u)return NaN;return parseInt(c,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?c(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(x(n)),r,p):x(n)};for(var m,S=r(11)?f(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;S.length>w;w++)i(d,m=S[w])&&!i(p,m)&&l(p,m,a(d,m));(p.prototype=y).constructor=p,r(28)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(176)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(176),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(188);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(189);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),a=r(49),s=r(165),l=r(156),i=1..toFixed,o=Math.floor,u=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",v=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*u[r],u[r]=e%1e7,e=o(e/1e7)},p=function(t){for(var n=6,r=0;0<=--n;)r+=u[n],u[n]=o(r/t),r=r%t*1e7},d=function(){for(var t=6,n="";0<=--t;)if(""!==n||0===t||0!==u[t]){var r=String(u[t]);n=""===n?r:n+l.call("0",7-r.length)+r}return n},y=function(t,n,r){return 0===n?r:n%2==1?y(t,n-1,r*t):y(t*t,n/2,r)};e(e.P+e.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){i.call({})})),"Number",{toFixed:function(t){var n,r,e,i,o=s(this,h),u=a(t),c="",f="0";if(u<0||20<u)throw RangeError(h);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(c="-",o=-o),1e-21<o)if(r=(n=function(t){for(var n=0,r=t;4096<=r;)n+=12,r/=4096;for(;2<=r;)n+=1,r/=2;return n}(o*y(2,69,1))-69)<0?o*y(2,-n,1):o/y(2,n,1),r*=4503599627370496,0<(n=52-n)){for(v(0,r),e=u;7<=e;)v(1e7,0),e-=7;for(v(y(10,e,1),0),e=n-1;23<=e;)p(1<<23),e-=23;p(1<<e),v(1,1),p(2),f=d()}else v(0,r),v(1<<-n,0),f=d()+l.call("0",u);return f=0<u?c+((i=f.length)<=u?"0."+l.call("0",u-i)+f:f.slice(0,i-u)+"."+f.slice(i-u)):c+f}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(165),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(182)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(72)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(11),"Object",{defineProperties:r(183)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(11),"Object",{defineProperty:r(13).f})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(54)("freeze",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(34),i=r(32).f;r(54)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(54)("getOwnPropertyNames",function(){return r(184).f})},function(t,n,r){var e=r(17),i=r(33);r(54)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5);r(54)("isExtensible",function(n){return function(t){return!!e(t)&&(!n||n(t))}})},function(t,n,r){var e=r(5);r(54)("isFrozen",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(5);r(54)("isSealed",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(192)})},function(t,n,r){var e=r(17),i=r(74);r(54)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(54)("preventExtensions",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(54)("seal",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(153).set})},function(t,n,r){"use strict";var e=r(84),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(28)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(188);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(189);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u,c=r(68),f=r(3),a=r(47),s=r(84),l=r(1),h=r(5),v=r(23),p=r(70),d=r(71),y=r(119),g=r(158).set,b=r(150)(),x=r(151),m=r(190),S=r(133),w=r(191),_="Promise",O=f.TypeError,E=f.process,M=E&&E.versions,P=M&&M.v8||"",j=f[_],F="process"==s(E),A=function(){},I=i=x.f,L=!!function(){try{var t=j.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(A,A)};return(F||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof n&&0!==P.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(t){}}(),N=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},T=function(s,r){if(!s._n){s._n=!0;var e=s._c;b(function(){for(var f=s._v,a=1==s._s,t=0,n=function(t){var n,r,e,i=a?t.ok:t.fail,o=t.resolve,u=t.reject,c=t.domain;try{i?(a||(2==s._h&&C(s),s._h=1),!0===i?n=f:(c&&c.enter(),n=i(f),c&&(c.exit(),e=!0)),n===t.promise?u(O("Promise-chain cycle")):(r=N(n))?r.call(n,o,u):o(n)):u(f)}catch(t){c&&!e&&c.exit(),u(t)}};e.length>t;)n(e[t++]);s._c=[],s._n=!1,r&&!s._h&&k(s)})}},k=function(o){g.call(f,function(){var t,n,r,e=o._v,i=R(o);if(i&&(t=m(function(){F?E.emit("unhandledRejection",e,o):(n=f.onunhandledrejection)?n({promise:o,reason:e}):(r=f.console)&&r.error&&r.error("Unhandled promise rejection",e)}),o._h=F||R(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},C=function(n){g.call(f,function(){var t;F?E.emit("rejectionHandled",n):(t=f.onrejectionhandled)&&t({promise:n,reason:n._v})})},D=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),T(n,!0))},G=function(t){var r,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw O("Promise can't be resolved itself");(r=N(t))?b(function(){var n={_w:e,_d:!1};try{r.call(t,a(G,n,1),a(D,n,1))}catch(t){D.call(n,t)}}):(e._v=t,e._s=1,T(e,!1))}catch(t){D.call({_w:e,_d:!1},t)}}};L||(j=function(t){p(this,j,_,"_h"),v(t),e.call(this);try{t(a(G,this,1),a(D,this,1))}catch(t){D.call(this,t)}},(e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(76)(j.prototype,{then:function(t,n){var r=I(y(this,j));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=F?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&T(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new e;this.promise=t,this.resolve=a(G,t,1),this.reject=a(D,t,1)},x.f=I=function(t){return t===j||t===u?new o(t):i(t)}),l(l.G+l.W+l.F*!L,{Promise:j}),r(86)(j,_),r(77)(_),u=r(46)[_],l(l.S+l.F*!L,_,{reject:function(t){var n=I(this);return(0,n.reject)(t),n.promise}}),l(l.S+l.F*(c||!L),_,{resolve:function(t){return w(c&&this===u?j:this,t)}}),l(l.S+l.F*!(L&&r(125)(function(t){j.all(t).catch(A)})),_,{all:function(t){var u=this,n=I(u),c=n.resolve,f=n.reject,r=m(function(){var e=[],i=0,o=1;d(t,!1,function(t){var n=i++,r=!1;e.push(void 0),o++,u.resolve(t).then(function(t){r||(r=!0,e[n]=t,--o||c(e))},f)}),--o||c(e)});return r.e&&f(r.v),n.promise},race:function(t){var n=this,r=I(n),e=r.reject,i=m(function(){d(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i.e&&e(i.v),r.promise}})},function(t,n,r){var e=r(1),o=r(23),u=r(2),c=(r(3).Reflect||{}).apply,f=Function.apply;e(e.S+e.F*!r(4)(function(){c(function(){})}),"Reflect",{apply:function(t,n,r){var e=o(t),i=u(r);return c?c(e,n,i):f.call(e,n,i)}})},function(t,n,r){var e=r(1),c=r(72),f=r(23),a=r(2),s=r(5),i=r(4),l=r(169),h=(r(3).Reflect||{}).construct,v=i(function(){function t(){}return!(h(function(){},[],t)instanceof t)}),p=!i(function(){h(function(){})});e(e.S+e.F*(v||p),"Reflect",{construct:function(t,n){f(t),a(n);var r=arguments.length<3?t:f(arguments[2]);if(p&&!v)return h(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(l.apply(t,e))}var i=r.prototype,o=c(s(i)?i:Object.prototype),u=Function.apply.call(t,o,n);return s(u)?u:o}})},function(t,n,r){var e=r(13),i=r(1),o=r(2),u=r(55);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(32).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(146)(o,"Object",function(){var t,n=this._k;do{if(this._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[this._i++])in this._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(32),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(33),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){var u=r(32),c=r(33),f=r(31),e=r(1),a=r(5),s=r(2);e(e.S,"Reflect",{get:function t(n,r){var e,i,o=arguments.length<3?n:arguments[2];return s(n)===o?n[r]:(e=u.f(n,r))?f(e,"value")?e.value:void 0!==e.get?e.get.call(o):void 0:a(i=c(n))?t(i,r,o):void 0}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(187)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(153);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){var f=r(13),a=r(32),s=r(33),l=r(31),e=r(1),h=r(75),v=r(2),p=r(5);e(e.S,"Reflect",{set:function t(n,r,e){var i,o,u=arguments.length<4?n:arguments[3],c=a.f(v(n),r);if(!c){if(p(o=s(n)))return t(o,r,e,u);c=h(0)}if(l(c,"value")){if(!1===c.writable||!p(u))return!1;if(i=a.f(u,r)){if(i.get||i.set||!1===i.writable)return!1;i.value=e,f.f(u,r,i)}else f.f(u,r,h(0,e));return!0}return void 0!==c.set&&(c.set.call(u,e),!0)}})},function(t,n,r){var e=r(3),o=r(144),i=r(13).f,u=r(73).f,c=r(124),f=r(115),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(11)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),i=void 0===n;return!r&&e&&t.constructor===a&&i?t:o(p?new s(e&&!i?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&i?f.call(t):n),r?this:l,a)};for(var d=function(n){n in a||i(a,n,{configurable:!0,get:function(){return s[n]},set:function(t){s[n]=t}})},y=u(s),g=0;y.length>g;)d(y[g++]);(l.constructor=a).prototype=l,r(28)(e,"RegExp",a)}r(77)("RegExp")},function(t,n,r){"use strict";var l=r(2),h=r(9),v=r(136),p=r(128);r(122)("match",1,function(e,i,a,s){return[function(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=s(a,t,this);if(n.done)return n.value;var r=l(t),e=String(this);if(!r.global)return p(r,e);for(var i,o=r.unicode,u=[],c=r.lastIndex=0;null!==(i=p(r,e));){var f=String(i[0]);""===(u[c]=f)&&(r.lastIndex=v(e,h(r.lastIndex),o)),c++}return 0===c?null:u}]})},function(t,n,r){"use strict";var O=r(2),e=r(17),E=r(9),M=r(49),P=r(136),j=r(128),F=Math.max,A=Math.min,h=Math.floor,v=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;r(122)("replace",2,function(i,o,S,w){function _(o,u,c,f,a,t){var s=c+o.length,l=f.length,n=p;return void 0!==a&&(a=e(a),n=v),S.call(t,n,function(t,n){var r;switch(n.charAt(0)){case"$":return"$";case"&":return o;case"`":return u.slice(0,c);case"'":return u.slice(s);case"<":r=a[n.slice(1,-1)];break;default:var e=+n;if(0===e)return t;if(l<e){var i=h(e/10);return 0===i?t:i<=l?void 0===f[i-1]?n.charAt(1):f[i-1]+n.charAt(1):t}r=f[e-1]}return void 0===r?"":r})}return[function(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):S.call(String(r),t,n)},function(t,n){var r=w(S,t,this,n);if(r.done)return r.value;var e=O(t),i=String(this),o="function"==typeof n;o||(n=String(n));var u,c=e.global;if(c){var f=e.unicode;e.lastIndex=0}for(var a=[];;){var s=j(e,i);if(null===s)break;if(a.push(s),!c)break;""===String(s[0])&&(e.lastIndex=P(i,E(e.lastIndex),f))}for(var l="",h=0,v=0;v<a.length;v++){s=a[v];for(var p=String(s[0]),d=F(A(M(s.index),i.length),0),y=[],g=1;g<s.length;g++)y.push(void 0===(u=s[g])?u:String(u));var b=s.groups;if(o){var x=[p].concat(y,d,i);void 0!==b&&x.push(b);var m=String(n.apply(void 0,x))}else m=_(p,i,d,y,b,n);h<=d&&(l+=i.slice(h,d)+m,h=d+p.length)}return l+i.slice(h)}]})},function(t,n,r){"use strict";var f=r(2),a=r(192),s=r(128);r(122)("search",1,function(e,i,u,c){return[function(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=c(u,t,this);if(n.done)return n.value;var r=f(t),e=String(this),i=r.lastIndex;a(i,0)||(r.lastIndex=0);var o=s(r,e);return a(r.lastIndex,i)||(r.lastIndex=i),null===o?-1:o.index}]})},function(t,n,r){"use strict";var l=r(124),x=r(2),m=r(119),S=r(136),w=r(9),_=r(128),h=r(152),e=r(4),O=Math.min,v=[].push,u="split",p="length",d="lastIndex",E=4294967295,M=!e(function(){RegExp(E,"y")});r(122)("split",2,function(i,o,y,g){var b;return b="c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[p]||2!="ab"[u](/(?:ab)*/)[p]||4!="."[u](/(.?)(.?)/)[p]||1<"."[u](/()()/)[p]||""[u](/.?/)[p]?function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!l(t))return y.call(r,t,n);for(var e,i,o,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,a=void 0===n?E:n>>>0,s=new RegExp(t.source,c+"g");(e=h.call(s,r))&&!(f<(i=s[d])&&(u.push(r.slice(f,e.index)),1<e[p]&&e.index<r[p]&&v.apply(u,e.slice(1)),o=e[0][p],f=i,u[p]>=a));)s[d]===e.index&&s[d]++;return f===r[p]?!o&&s.test("")||u.push(""):u.push(r.slice(f)),u[p]>a?u.slice(0,a):u}:"0"[u](void 0,0)[p]?function(t,n){return void 0===t&&0===n?[]:y.call(this,t,n)}:y,[function(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):b.call(String(r),t,n)},function(t,n){var r=g(b,t,this,n,b!==y);if(r.done)return r.value;var e=x(t),i=String(this),o=m(e,RegExp),u=e.unicode,c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(M?"y":"g"),f=new o(M?e:"^(?:"+e.source+")",c),a=void 0===n?E:n>>>0;if(0===a)return[];if(0===i.length)return null===_(f,i)?[i]:[];for(var s=0,l=0,h=[];l<i.length;){f.lastIndex=M?l:0;var v,p=_(f,M?i:i.slice(l));if(null===p||(v=O(w(f.lastIndex+(M?0:l)),i.length))===s)l=S(i,l,u);else{if(h.push(i.slice(s,l)),h.length===a)return h;for(var d=1;d<=p.length-1;d++)if(h.push(p[d]),h.length===a)return h;l=s=v}}return h.push(i.slice(s)),h}]})},function(t,n,r){"use strict";r(198);var e=r(2),i=r(115),o=r(11),u="toString",c=/./[u],f=function(t){r(28)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(29)("anchor",function(n){return function(t){return n(this,"a","name",t)}})},function(t,n,r){"use strict";r(29)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(29)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(29)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(131)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),u=r(9),c=r(155),f="endsWith",a=""[f];e(e.P+e.F*r(142)(f),"String",{endsWith:function(t){var n=c(this,t,f),r=1<arguments.length?arguments[1]:void 0,e=u(n.length),i=void 0===r?e:Math.min(u(r),e),o=String(t);return a?a.call(n,o,i):n.slice(i-o.length,i)===o}})},function(t,n,r){"use strict";r(29)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(29)("fontcolor",function(n){return function(t){return n(this,"font","color",t)}})},function(t,n,r){"use strict";r(29)("fontsize",function(n){return function(t){return n(this,"font","size",t)}})},function(t,n,r){var e=r(1),o=r(78),u=String.fromCharCode,i=String.fromCodePoint;e(e.S+e.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,i=0;i<e;){if(n=+arguments[i++],o(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?u(n):u(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(155);e(e.P+e.F*r(142)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,1<arguments.length?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(29)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(131)(!0);r(147)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(29)("link",function(n){return function(t){return n(this,"a","href",t)}})},function(t,n,r){var e=r(1),u=r(34),c=r(9);e(e.S,"String",{raw:function(t){for(var n=u(t.raw),r=c(n.length),e=arguments.length,i=[],o=0;o<r;)i.push(String(n[o++])),o<e&&i.push(String(arguments[o]));return i.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(156)})},function(t,n,r){"use strict";r(29)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(9),o=r(155),u="startsWith",c=""[u];e(e.P+e.F*r(142)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(1<arguments.length?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(29)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(29)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(29)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(87)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),u=r(31),i=r(11),o=r(1),c=r(28),f=r(69).KEY,a=r(4),s=r(118),l=r(86),h=r(79),v=r(7),p=r(195),d=r(160),y=r(229),g=r(123),b=r(2),x=r(5),m=r(17),S=r(34),w=r(55),_=r(75),O=r(72),E=r(184),M=r(32),P=r(127),j=r(13),F=r(74),A=M.f,I=j.f,L=E.f,N=e.Symbol,T=e.JSON,k=T&&T.stringify,R="prototype",C=v("_hidden"),D=v("toPrimitive"),G={}.propertyIsEnumerable,W=s("symbol-registry"),U=s("symbols"),V=s("op-symbols"),B=Object[R],q="function"==typeof N&&!!P.f,z=e.QObject,H=!z||!z[R]||!z[R].findChild,K=i&&a(function(){return 7!=O(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=A(B,n);e&&delete B[n],I(t,n,r),e&&t!==B&&I(B,n,e)}:I,J=function(t){var n=U[t]=O(N[R]);return n._k=t,n},$=q&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===B&&Y(V,n,r),b(t),n=w(n,!0),b(r),u(U,n)?(r.enumerable?(u(t,C)&&t[C][n]&&(t[C][n]=!1),r=O(r,{enumerable:_(0,!1)})):(u(t,C)||I(t,C,_(1,{})),t[C][n]=!0),K(t,n,r)):I(t,n,r)},X=function(t,n){b(t);for(var r,e=y(n=S(n)),i=0,o=e.length;i<o;)Y(t,r=e[i++],n[r]);return t},Q=function(t){var n=G.call(this,t=w(t,!0));return!(this===B&&u(U,t)&&!u(V,t))&&(!(n||!u(this,t)||!u(U,t)||u(this,C)&&this[C][t])||n)},Z=function(t,n){if(t=S(t),n=w(n,!0),t!==B||!u(U,n)||u(V,n)){var r=A(t,n);return!r||!u(U,n)||u(t,C)&&t[C][n]||(r.enumerable=!0),r}},tt=function(t){for(var n,r=L(S(t)),e=[],i=0;r.length>i;)u(U,n=r[i++])||n==C||n==f||e.push(n);return e},nt=function(t){for(var n,r=t===B,e=L(r?V:S(t)),i=[],o=0;e.length>o;)!u(U,n=e[o++])||r&&!u(B,n)||i.push(U[n]);return i};q||(c((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===B&&r.call(V,t),u(this,C)&&u(this[C],n)&&(this[C][n]=!1),K(this,n,_(1,t))};return i&&H&&K(B,n,{configurable:!0,set:r}),J(n)})[R],"toString",function(){return this._k}),M.f=Z,j.f=Y,r(73).f=E.f=tt,r(117).f=Q,P.f=nt,i&&!r(68)&&c(B,"propertyIsEnumerable",Q,!0),p.f=function(t){return J(v(t))}),o(o.G+o.W+o.F*!q,{Symbol:N});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;rt.length>et;)v(rt[et++]);for(var it=F(v.store),ot=0;it.length>ot;)d(it[ot++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return u(W,t+="")?W[t]:W[t]=N(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in W)if(W[n]===t)return n},useSetter:function(){H=!0},useSimple:function(){H=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,n){return void 0===n?O(t):X(O(t),n)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:nt});var ut=a(function(){P.f(1)});o(o.S+o.F*ut,"Object",{getOwnPropertySymbols:function(t){return P.f(m(t))}}),T&&o(o.S+o.F*(!q||a(function(){var t=N();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(x(n)||void 0!==t)&&!$(t))return g(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,k.apply(T,e)}}),N[R][D]||r(27)(N[R],D,N[R].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(132),o=r(159),a=r(2),s=r(78),l=r(9),u=r(5),c=r(3).ArrayBuffer,h=r(119),v=o.ArrayBuffer,p=o.DataView,f=i.ABV&&c.isView,d=v.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(c!==v),{ArrayBuffer:v}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return f&&f(t)||u(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new v(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(a(this),t);for(var r=a(this).byteLength,e=s(t,r),i=s(void 0===n?r:n,r),o=new(h(this,v))(l(i-e)),u=new p(this),c=new p(o),f=0;e<i;)c.setUint8(f++,u.getUint8(e++));return o}}),r(77)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(132).ABV,{DataView:r(159).DataView})},function(t,n,r){r(58)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(58)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(58)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(58)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(58)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(58)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(58)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(58)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(58)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(t,n,r){"use strict";var e=r(172),i=r(80);r(121)("WeakSet",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"WeakSet"),t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(173),o=r(17),u=r(9),c=r(23),f=r(138);e(e.P,"Array",{flatMap:function(t){var n,r,e=o(this);return c(t),n=u(e.length),r=f(e,0),i(r,e,e,n,0,1,t,arguments[1]),r}}),r(67)("flatMap")},function(t,n,r){"use strict";var e=r(1),i=r(173),o=r(17),u=r(9),c=r(49),f=r(138);e(e.P,"Array",{flatten:function(){var t=arguments[0],n=o(this),r=u(n.length),e=f(n,0);return i(e,n,n,r,0,void 0===t?1:c(t)),e}}),r(67)("flatten")},function(t,n,r){"use strict";var e=r(1),i=r(120)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)("includes")},function(t,n,r){var e=r(1),i=r(150)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.G,{global:r(3)})},function(t,n,r){r(129)("Map")},function(t,n,r){r(130)("Map")},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(171)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{clamp:function(t,n,r){return Math.min(r,Math.max(n,t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,n,r){var e=r(1),i=180/Math.PI;e(e.S,"Math",{degrees:function(t){return t*i}})},function(t,n,r){var e=r(1),o=r(181),u=r(179);e(e.S,"Math",{fscale:function(t,n,r,e,i){return u(o(t,n,r,e,i))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)+(e>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>16,c=e>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>16)+((i*c>>>0)+(65535&f)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)-(e>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,n,r){var e=r(1),i=Math.PI/180;e(e.S,"Math",{radians:function(t){return t*i}})},function(t,n,r){var e=r(1);e(e.S,"Math",{scale:r(181)})},function(t,n,r){var e=r(1);e(e.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:0<t}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>>16,c=e>>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>>16)+((i*c>>>0)+(65535&f)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(23),u=r(13);r(11)&&e(e.P+r(126),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(23),u=r(13);r(11)&&e(e.P+r(126),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(186)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),f=r(187),a=r(34),s=r(32),l=r(139);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r,e=a(t),i=s.f,o=f(e),u={},c=0;o.length>c;)void 0!==(r=i(e,n=o[c++]))&&l(u,n,r);return u}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(55),u=r(33),c=r(32).f;r(11)&&e(e.P+r(126),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(55),u=r(33),c=r(32).f;r(11)&&e(e.P+r(126),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(186)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),o=r(3),u=r(46),i=r(150)(),c=r(7)("observable"),f=r(23),a=r(2),s=r(70),l=r(76),h=r(27),v=r(71),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},x=function(t,n){a(t),this._c=void 0,this._o=t,t=new m(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};x.prototype=l({},{unsubscribe:function(){b(this)}});var m=function(t){this._s=t};m.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var S=function(t){s(this,S,"Observable","_f")._f=f(t)};l(S.prototype,{subscribe:function(t){return new x(t,this._f)},forEach:function(e){var i=this;return new(u.Promise||o.Promise)(function(t,n){f(e);var r=i.subscribe({next:function(t){try{return e(t)}catch(t){n(t),r.unsubscribe()}},error:n,complete:t})})}}),l(S,{from:function(t){var n="function"==typeof this?this:S,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return i(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,e=new Array(n);t<n;)e[t]=arguments[t++];return new("function"==typeof this?this:S)(function(n){var r=!1;return i(function(){if(!r){for(var t=0;t<e.length;++t)if(n.next(e[t]),r)return;n.complete()}}),function(){r=!0}})}}),h(S.prototype,c,function(){return this}),e(e.G,{Observable:S}),r(77)("Observable")},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(3),u=r(119),c=r(191);e(e.P+e.R,"Promise",{finally:function(n){var r=u(this,i.Promise||o.Promise),t="function"==typeof n;return this.then(t?function(t){return c(r,n()).then(function(){return t})}:n,t?function(t){return c(r,n()).then(function(){throw t})}:n)}})},function(t,n,r){"use strict";var e=r(1),i=r(151),o=r(190);e(e.S,"Promise",{try:function(t){var n=i.f(this),r=o(t);return(r.e?n.reject:n.resolve)(r.v),n.promise}})},function(t,n,r){var e=r(57),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(57),o=r(2),u=e.key,c=e.map,f=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:u(arguments[2]),e=c(o(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var i=f.get(n);return i.delete(r),!!i.size||f.delete(n)}})},function(t,n,r){var o=r(199),u=r(167),e=r(57),i=r(2),c=r(33),f=e.keys,a=e.key,s=function(t,n){var r=f(t,n),e=c(t);if(null===e)return r;var i=s(e,n);return i.length?r.length?u(new o(r.concat(i))):i:r};e.exp({getMetadataKeys:function(t){return s(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(57),i=r(2),o=r(33),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(57),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(57),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(57),i=r(2),o=r(33),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(57),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(57),i=r(2),o=r(23),u=e.key,c=e.set;e.exp({metadata:function(r,e){return function(t,n){c(r,e,(void 0!==n?i:o)(t),u(n))}}})},function(t,n,r){r(129)("Set")},function(t,n,r){r(130)("Set")},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(171)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(131)(!0),o=r(4)(function(){return"𠮷"!=="𠮷".at(0)});e(e.P+e.F*o,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(53),o=r(9),u=r(124),c=r(115),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(146)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(193),o=r(133),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padEnd:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(193),o=r(133),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padStart:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(87)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(87)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(160)("asyncIterator")},function(t,n,r){r(160)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){r(129)("WeakMap")},function(t,n,r){r(130)("WeakMap")},function(t,n,r){r(129)("WeakSet")},function(t,n,r){r(130)("WeakSet")},function(t,n,r){for(var e=r(162),i=r(74),o=r(28),u=r(3),c=r(27),f=r(85),a=r(7),s=a("iterator"),l=a("toStringTag"),h=f.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(v),d=0;d<p.length;d++){var y,g=p[d],b=v[g],x=u[g],m=x&&x.prototype;if(m&&(m[s]||c(m,s,h),m[l]||c(m,l,g),f[g]=h,b))for(y in e)m[y]||o(m,y,e[y],!0)}},function(t,n,r){var e=r(1),i=r(158);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(133),u=[].slice,c=/MSIE .\./.test(o),f=function(i){return function(t,n){var r=2<arguments.length,e=!!r&&u.call(arguments,2);return i(r?function(){("function"==typeof t?t:Function(t)).apply(this,e)}:t,n)}};i(i.G+i.B+i.F*c,{setTimeout:f(e.setTimeout),setInterval:f(e.setInterval)})},function(t,n,r){r(352),r(291),r(293),r(292),r(295),r(297),r(302),r(296),r(294),r(304),r(303),r(299),r(300),r(298),r(290),r(301),r(305),r(306),r(258),r(260),r(259),r(308),r(307),r(278),r(288),r(289),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(339),r(344),r(351),r(342),r(334),r(335),r(340),r(345),r(347),r(330),r(331),r(332),r(333),r(336),r(337),r(338),r(341),r(343),r(346),r(348),r(349),r(350),r(253),r(255),r(254),r(257),r(256),r(242),r(240),r(246),r(243),r(249),r(251),r(239),r(245),r(236),r(250),r(234),r(248),r(247),r(241),r(244),r(233),r(235),r(238),r(237),r(252),r(162),r(324),r(197),r(329),r(198),r(325),r(326),r(327),r(328),r(309),r(196),r(199),r(200),r(364),r(353),r(354),r(359),r(362),r(363),r(357),r(360),r(358),r(361),r(355),r(356),r(310),r(311),r(312),r(313),r(314),r(317),r(315),r(316),r(318),r(319),r(320),r(321),r(323),r(322),r(367),r(365),r(366),r(408),r(411),r(410),r(412),r(413),r(409),r(414),r(415),r(389),r(392),r(388),r(386),r(387),r(390),r(391),r(373),r(407),r(372),r(406),r(418),r(420),r(371),r(405),r(417),r(419),r(370),r(416),r(369),r(374),r(375),r(376),r(377),r(378),r(380),r(379),r(381),r(382),r(383),r(385),r(384),r(394),r(395),r(396),r(397),r(399),r(398),r(401),r(400),r(402),r(403),r(404),r(368),r(393),r(423),r(422),r(421),t.exports=r(46)},function(t,n){t.exports=function(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}}])</script><script src="/blog/./main.dd9d91.js"></script><script>!function(){var e,t;e="/blog/slider.8c791f.js",t=document.createElement("script"),document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}()</script>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 50%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
        
      
      <li style="width: 50%" q-on="click: openSlider(e, 'outline')"><a href="javascript:void(0)" q-class="active:outline">大纲</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">运维</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Windows</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">七牛云</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">WEB开发</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Web前端</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Web代理工具</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">黑科技</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Web后端</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Django</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">web开发 后台 django</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">django</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">IDE</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Docker</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">VSCode</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Jenkins</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Linux</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">NodeJs</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">转载</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Rendertron</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Redis</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">SEO</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Sentry</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Typora</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">hexo</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">docker</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">VR</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">eslint</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Git</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">前端</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">数据库</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">mysql</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Nginx</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">nodejs</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">nvm</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">express</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">python</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">typescript</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">vue</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Web安全</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">前端 js canvas</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">随笔</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">业务</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">公考</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">兼容问题</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">代码规范</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Css预处理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Less</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">从入门到放弃系列</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Angular</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">实战章无法显示问题</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">jquery</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Grunt</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">angularjs</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">lodash</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">JQuery</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">基础</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">大前端</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">好文收藏</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">学习中</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">elk日志收集</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">NAS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">微信</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">公众号</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">日记</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">生活</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">树莓派</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">程序人生</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">笔试面试</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">软考</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">系统分析师</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">草稿</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">设计模式</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Centos</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">hide</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">VirtualBox</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Centos7</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">通过典型应用快速上手Linux</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">工作遇到的问题</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">面试题</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">常见面试题收集</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">区块链</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">挖矿</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">React</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Sass</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">canvas</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、请确保node版本大于6.2<br/>2、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    

    


    
    	<section class="tools-section tools-section-me" q-show="outline">
  	  		<div class="outline-wrap" id="js-outline">
            <ul class="search-ul">
              <li q-attr="style:style" class="search-li" q-repeat="outlineItems">
                <!-- q-attr="href:path,style:style"   q-on="click:stop(e)" -->
                <a q-attr="href:path" class="search-title" q-on="click:closeSlider"><span q-text="title"></span></a>
              </li>
            </ul>
          </div>
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
<script src="/blog/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/blog/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":120,"height":230,"hOffset":-10,"vOffset":-10},"mobile":{"show":false}});</script></body>
</html>